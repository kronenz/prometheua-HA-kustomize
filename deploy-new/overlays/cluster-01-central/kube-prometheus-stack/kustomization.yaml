# ============================================================================
# Cluster-01 Central Kustomization
# ============================================================================
# 중앙 클러스터 배포 구성:
# - Prometheus Full Mode + Remote Write
# - Grafana, Alertmanager
# - Thanos 컴포넌트는 별도 디렉토리에서 Bitnami Helm chart로 배포
# ============================================================================

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: monitoring

# Helm Chart 배포 (Base values + Central override)
helmCharts:
  - name: kube-prometheus-stack
    repo: https://prometheus-community.github.io/helm-charts
    version: "78.5.0"
    releaseName: kube-prometheus-stack
    namespace: monitoring
    valuesInline:
      # Base values에서 가져온 공통 설정
      prometheusOperator:
        enabled: true
      prometheus:
        enabled: true
        prometheusSpec:
          serviceMonitorSelectorNilUsesHelmValues: false
          podMonitorSelectorNilUsesHelmValues: false
      alertmanager:
        enabled: true
      grafana:
        enabled: true
      kube-state-metrics:
        enabled: true
      prometheus-node-exporter:
        enabled: true
    valuesFile: values-central.yaml
    includeCRDs: false

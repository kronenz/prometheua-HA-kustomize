apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-dataops-health-v4
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  dataops-health-v4.json: |
    {
      "uid": "dataops-health-v4",
      "title": "2. Application Health - Deployment Verification",
      "tags": ["dataops", "health", "kubernetes", "pods", "v4"],
      "timezone": "browser",
      "schemaVersion": 16,
      "version": 1,
      "refresh": "30s",
      "editable": true,
      "style": "dark",
      "folder": "DataOps E2E",
      "folderUid": "dataops-e2e-folder",
      "panels": [
        {
          "type": "text",
          "title": "",
          "gridPos": {"h": 4, "w": 24, "x": 0, "y": 0},
          "transparent": true,
          "options": {
            "mode": "html",
            "content": "<div style='background:#1A1F2E;padding:20px;border-radius:8px;border-left:4px solid #81C995'><div style='display:flex;justify-content:space-between;align-items:center'><div style='display:flex;align-items:center;gap:16px'><div style='width:48px;height:48px;background:rgba(129,201,149,0.15);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:24px;border:2px solid rgba(129,201,149,0.3)'>âœ…</div><div><div style='font-size:22px;font-weight:700;color:#E5E7EB'>Application Health</div><div style='font-size:13px;color:#9CA3AF;margin-top:4px'>ë°°í¬ ê²€ì¦ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ìƒ ì‘ë™ ëª¨ë‹ˆí„°ë§</div></div></div><div style='text-align:right'><a href='/d/dataops-portal-e2e-v4' style='padding:10px 18px;background:rgba(129,201,149,0.15);border:1px solid rgba(129,201,149,0.3);border-radius:6px;color:#81C995;text-decoration:none;font-size:13px;font-weight:500;transition:all 0.2s' onmouseover='this.style.background=\"rgba(129,201,149,0.25)\"' onmouseout='this.style.background=\"rgba(129,201,149,0.15)\"'>â† Back to Portal</a></div></div></div>"
          }
        },
        {
          "type": "row",
          "title": "Pod Health Overview",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 4},
          "collapsed": false
        },
        {
          "type": "stat",
          "title": "Pod Running Rate",
          "description": "**ì •ìƒ ì‹¤í–‰ ì¤‘ì¸ Pod ë¹„ìœ¨**\n\n**ê³„ì‚°ì‹**:\n```promql\ncount(kube_pod_status_phase{phase=\"Running\"}) / \ncount(kube_pod_status_phase) * 100\n```\n\n**ì˜ë¯¸**: ì „ì²´ Pod ì¤‘ Running ìƒíƒœì¸ Podì˜ ë¹„ìœ¨\n\n**Pod Phase ì¢…ë¥˜**:\n- **Pending**: ìŠ¤ì¼€ì¤„ë§ ëŒ€ê¸° ë˜ëŠ” ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì¤‘\n- **Running**: ì •ìƒ ì‹¤í–‰ ì¤‘\n- **Succeeded**: ì™„ë£Œë¨ (Job/CronJob)\n- **Failed**: ì‹¤íŒ¨ë¡œ ì¢…ë£Œë¨\n- **Unknown**: ìƒíƒœ í™•ì¸ ë¶ˆê°€ (Node í†µì‹  ì¥ì• )\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ 98% ì´ìƒ: ìš°ìˆ˜ - ëŒ€ë¶€ë¶„ Pod ì •ìƒ\n- ğŸŸ¡ 95-98%: ì–‘í˜¸ - ì¼ë¶€ Pod ë¬¸ì œ\n- ğŸ”´ 95% ë¯¸ë§Œ: ìœ„í—˜ - ëŒ€ê·œëª¨ ì¥ì•  ê°€ëŠ¥ì„±\n\n**Running ë¹„ìœ¨ ë‚®ì€ ì›ì¸**:\n1. **Pending Pod ì¦ê°€**: ë¦¬ì†ŒìŠ¤ ë¶€ì¡±, Node ë¶€ì¡±\n2. **Failed Pod**: CrashLoopBackOff, Error\n3. **Unknown Pod**: Node NotReady, kubelet ì¥ì• \n4. **ë°°í¬ ì§„í–‰ ì¤‘**: Rolling Updateë¡œ ì¼ì‹œì  ê°ì†Œ\n\n**ì¡°ì¹˜ ì‚¬í•­**:\n- Pending Pod: `kubectl describe pod` ë¡œ ì›ì¸ í™•ì¸\n- Failed Pod: ë¡œê·¸ í™•ì¸ í›„ ì¬ë°°í¬ ë˜ëŠ” ìˆ˜ì •\n- Unknown Pod: Node ìƒíƒœ ì ê²€\n- ë¦¬ì†ŒìŠ¤ ë¶€ì¡±: CPU/Memory ì¦ì„¤\n\n**Best Practice**:\n- HPA (Horizontal Pod Autoscaler) ì„¤ì •\n- PDB (Pod Disruption Budget) êµ¬ì„±\n- Resource Requests/Limits ì ì ˆíˆ ì„¤ì •\n- Readiness/Liveness Probe êµ¬í˜„\n\n**SLO**: >98% (ì¼ê°„ í‰ê· )",
          "gridPos": {"h": 7, "w": 6, "x": 0, "y": 5},
          "targets": [{
            "expr": "count(kube_pod_status_phase{phase=\"Running\"}) / count(kube_pod_status_phase) * 100",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "area",
            "text": {
              "titleSize": 13,
              "valueSize": 32
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(244, 139, 139, 0.2)"},
                  {"value": 95, "color": "rgba(255, 217, 125, 0.2)"},
                  {"value": 98, "color": "rgba(129, 201, 149, 0.2)"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "CrashLoopBackOff Pods",
          "description": "**í¬ë˜ì‹œ ë£¨í”„ ìƒíƒœì˜ Pod ìˆ˜**\n\n**ê³„ì‚°ì‹**:\n```promql\ncount(kube_pod_container_status_waiting_reason{\n  reason=\"CrashLoopBackOff\"\n})\n```\n\n**ì˜ë¯¸**: ì»¨í…Œì´ë„ˆê°€ ë°˜ë³µì ìœ¼ë¡œ ì‹œì‘ê³¼ ì¢…ë£Œë¥¼ ë°˜ë³µí•˜ëŠ” Pod ê°œìˆ˜\n\n**CrashLoopBackOff ë°œìƒ ì›ì¸**:\n1. **Application Error**: ì½”ë“œ ë²„ê·¸ë¡œ ì¦‰ì‹œ ì¢…ë£Œ\n2. **Missing Dependencies**: DB, ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ê²° ì‹¤íŒ¨\n3. **Configuration Error**: ì˜ëª»ëœ í™˜ê²½ë³€ìˆ˜, ConfigMap\n4. **Resource Limit**: Out of Memoryë¡œ ê°•ì œ ì¢…ë£Œ\n5. **Liveness Probe ì‹¤íŒ¨**: Health Check í†µê³¼ ëª»í•¨\n6. **Permission Denied**: íŒŒì¼/í¬íŠ¸ ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ\n\n**BackOff ë™ì‘ ë°©ì‹**:\n```\nì‹œë„1: ì¦‰ì‹œ ì¬ì‹œì‘\nì‹œë„2: 10ì´ˆ í›„ ì¬ì‹œì‘\nì‹œë„3: 20ì´ˆ í›„ ì¬ì‹œì‘\nì‹œë„4: 40ì´ˆ í›„ ì¬ì‹œì‘\n...\nìµœëŒ€: 5ë¶„ ê°„ê²©ìœ¼ë¡œ ì¬ì‹œë„\n```\n\n**ì •ìƒ ê¸°ì¤€**: 0ê°œ (CrashLoop ì—†ìŒ)\n\n**ìœ„í—˜ë„**:\n- ğŸŸ¢ 0ê°œ: ì •ìƒ\n- ğŸŸ¡ 1-2ê°œ: ì£¼ì˜ - íŠ¹ì • ì•± ë¬¸ì œ\n- ğŸ”´ 3ê°œ ì´ìƒ: ìœ„í—˜ - ì¦‰ì‹œ ì¡°ì¹˜ í•„ìš”\n\n**ë””ë²„ê¹… ì ˆì°¨**:\n1. `kubectl get pods | grep CrashLoop`\n2. `kubectl logs <pod-name> --previous`\n3. `kubectl describe pod <pod-name>`\n4. Eventsì—ì„œ ì¬ì‹œì‘ ì›ì¸ í™•ì¸\n5. ë¡œê·¸ì—ì„œ ERROR í‚¤ì›Œë“œ ê²€ìƒ‰\n\n**ë¹ ë¥¸ í•´ê²° ë°©ë²•**:\n- í™˜ê²½ë³€ìˆ˜ ìˆ˜ì •: ConfigMap/Secret í™•ì¸\n- ì˜ì¡´ì„± ì„œë¹„ìŠ¤ í™•ì¸: DB, Redis ë“±\n- ì´ë¯¸ì§€ ë²„ì „ ë¡¤ë°±\n- Resource Limits ì¦ê°€\n- Liveness Probe íƒ€ì„ì•„ì›ƒ ì¡°ì •\n\n**ì˜ˆë°©ì±…**:\n- ë¡œì»¬ì—ì„œ ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸\n- Staging í™˜ê²½ì—ì„œ ë°°í¬ ê²€ì¦\n- Startup Probeë¡œ ì´ˆê¸°í™” ì‹œê°„ í™•ë³´\n- Graceful Shutdown êµ¬í˜„\n\n**ì•Œë¦¼**: CrashLoop > 5ë¶„ ì§€ì† ì‹œ P1 ì•Œë¦¼",
          "gridPos": {"h": 7, "w": 6, "x": 6, "y": 5},
          "targets": [{
            "expr": "count(kube_pod_container_status_waiting_reason{reason=\"CrashLoopBackOff\"})",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "none",
            "text": {
              "titleSize": 13,
              "valueSize": 32
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "short",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(129, 201, 149, 0.2)"},
                  {"value": 1, "color": "rgba(255, 217, 125, 0.2)"},
                  {"value": 3, "color": "rgba(244, 139, 139, 0.2)"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "Pod Restart Count (5m)",
          "description": "**ìµœê·¼ 5ë¶„ê°„ Pod ì¬ì‹œì‘ ë¹ˆë„**\n\n**ê³„ì‚°ì‹**:\n```promql\nsum(rate(\n  kube_pod_container_status_restarts_total[5m]\n))\n```\n\n**ì˜ë¯¸**: 1ì´ˆë‹¹ ë°œìƒí•˜ëŠ” Pod ì¬ì‹œì‘ íšŸìˆ˜ (rate ì‚¬ìš©)\n\n**ì¬ì‹œì‘ ì›ì¸**:\n1. **Liveness Probe ì‹¤íŒ¨**: Health Check í†µê³¼ ëª»í•¨\n2. **OOMKilled**: Memory Limit ì´ˆê³¼ë¡œ ê°•ì œ ì¢…ë£Œ\n3. **Application Crash**: ì½”ë“œ ë²„ê·¸ë¡œ ë¹„ì •ìƒ ì¢…ë£Œ\n4. **Node ì¥ì• **: Node ì¬ë¶€íŒ… ì‹œ Pod ì¬ì‹œì‘\n5. **Manual Restart**: kubectl delete pod ìˆ˜ë™ ì¬ì‹œì‘\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ <0.1: ì •ìƒ - ê±°ì˜ ì¬ì‹œì‘ ì—†ìŒ\n- ğŸŸ¡ 0.1-0.5: ì£¼ì˜ - ì¼ë¶€ Pod ë¶ˆì•ˆì •\n- ğŸ”´ >0.5: ìœ„í—˜ - ë‹¤ìˆ˜ Pod ì¬ì‹œì‘ ì¤‘\n\n**ì¬ì‹œì‘ vs CrashLoop ì°¨ì´**:\n- **ì¬ì‹œì‘**: 1íšŒ ì¬ì‹œì‘ í›„ ì •ìƒ ì‘ë™\n- **CrashLoop**: ë°˜ë³µì ìœ¼ë¡œ ì¬ì‹œì‘ (ë³µêµ¬ ì•ˆë¨)\n\n**ë†’ì€ ì¬ì‹œì‘ë¥  ë¶„ì„**:\n1. Namespaceë³„ ì¬ì‹œì‘ í™•ì¸\n2. íŠ¹ì • Deployment ì‹ë³„\n3. Liveness Probe ì„¤ì • ê²€í† \n4. Memory Usage ëª¨ë‹ˆí„°ë§\n5. ìµœê·¼ ë°°í¬ ì´ë ¥ í™•ì¸\n\n**Liveness Probe ìµœì í™”**:\n```yaml\nlivenessProbe:\n  httpGet:\n    path: /health\n    port: 8080\n  initialDelaySeconds: 30  # ì¶©ë¶„í•œ ì‹œì‘ ì‹œê°„\n  periodSeconds: 10        # ì²´í¬ ì£¼ê¸°\n  timeoutSeconds: 5        # íƒ€ì„ì•„ì›ƒ\n  failureThreshold: 3      # 3íšŒ ì‹¤íŒ¨ í›„ ì¬ì‹œì‘\n```\n\n**Memory OOM ë°©ì§€**:\n- Requests < Limits ì„¤ì •\n- ë©”ëª¨ë¦¬ í”„ë¡œíŒŒì¼ë§ìœ¼ë¡œ ëˆ„ìˆ˜ í™•ì¸\n- JVM Heap Size ì ì ˆíˆ ì¡°ì •\n- Go: GOGC í™˜ê²½ë³€ìˆ˜ íŠœë‹\n\n**ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸**:\n- ì¬ì‹œì‘ Spike ì‹œ ì›ì¸ ì¡°ì‚¬\n- íŠ¹ì • ì‹œê°„ëŒ€ íŒ¨í„´ í™•ì¸ (ì•¼ê°„ ë°°ì¹˜ ë“±)\n- Namespaceë³„ ì¬ì‹œì‘ ë¹„ìœ¨\n\n**ì•Œë¦¼**: Restart Rate > 1.0 (1ë¶„ ì§€ì†) ì‹œ P2 ì•Œë¦¼",
          "gridPos": {"h": 7, "w": 6, "x": 12, "y": 5},
          "targets": [{
            "expr": "sum(rate(kube_pod_container_status_restarts_total[5m]))",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "value",
            "graphMode": "area",
            "text": {
              "titleSize": 13,
              "valueSize": 32
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "ops",
              "decimals": 2,
              "color": {"mode": "fixed", "fixedColor": "#81C995"},
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "#81C995"},
                  {"value": 0.1, "color": "#FFD97D"},
                  {"value": 0.5, "color": "#F48B8B"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "Service Availability",
          "description": "**Kubernetes Service ê°€ìš©ì„±**\n\n**ê³„ì‚°ì‹**:\n```promql\nsum(up{job=~\".*-service\"}) / \ncount(up{job=~\".*-service\"}) * 100\n```\n\n**ì˜ë¯¸**: Prometheusê°€ ìŠ¤í¬ë©í•˜ëŠ” Service Endpoint ì¤‘ ì •ìƒ ì‘ë‹µí•˜ëŠ” ë¹„ìœ¨\n\n**Service Endpoint ëª¨ë‹ˆí„°ë§**:\n- Prometheusê°€ Service Discoveryë¡œ ìë™ íƒì§€\n- `/metrics` ì—”ë“œí¬ì¸íŠ¸ Health Check\n- HTTP 200 ì‘ë‹µ ì—¬ë¶€ í™•ì¸\n\n**ê°€ìš©ì„± ê³„ì‚°**:\n```\nup=1: Endpoint ì •ìƒ ì‘ë‹µ\nup=0: Endpoint ì‘ë‹µ ì—†ìŒ (Down)\n```\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ 100%: ì™„ë²½ - ëª¨ë“  Service ì •ìƒ\n- ğŸŸ¡ 95-100%: ì–‘í˜¸ - ì¼ë¶€ Endpoint ë¬¸ì œ\n- ğŸ”´ 95% ë¯¸ë§Œ: ìœ„í—˜ - ë‹¤ìˆ˜ Service Down\n\n**ê°€ìš©ì„± ì €í•˜ ì›ì¸**:\n1. **Pod Down**: ëª¨ë“  Podê°€ CrashLoop ë˜ëŠ” Pending\n2. **Service Misconfiguration**: Selector ë¶ˆì¼ì¹˜\n3. **Network Policy**: Pod ê°„ í†µì‹  ì°¨ë‹¨\n4. **Port Mismatch**: Service Portì™€ Container Port ë¶ˆì¼ì¹˜\n5. **Readiness Probe ì‹¤íŒ¨**: PodëŠ” ìˆì§€ë§Œ Ready ì•„ë‹˜\n\n**Service íƒ€ì…ë³„ íŠ¹ì„±**:\n- **ClusterIP**: í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ í†µì‹ \n- **NodePort**: ì™¸ë¶€ ë…¸ì¶œ (30000-32767)\n- **LoadBalancer**: í´ë¼ìš°ë“œ LB ì‚¬ìš©\n- **ExternalName**: ì™¸ë¶€ DNS ë§¤í•‘\n\n**ë””ë²„ê¹… ì ˆì°¨**:\n1. `kubectl get svc` - Service ëª©ë¡ í™•ì¸\n2. `kubectl get endpoints <svc-name>` - Endpoint í™•ì¸\n3. `kubectl describe svc <svc-name>` - Selector í™•ì¸\n4. `kubectl get pods -l <selector>` - Pod ë§¤ì¹­ í™•ì¸\n5. Pod Readiness Probe ìƒíƒœ ì ê²€\n\n**Endpointê°€ ì—†ëŠ” ê²½ìš°**:\n```yaml\n# Selector í™•ì¸\napiVersion: v1\nkind: Service\nmetadata:\n  name: my-service\nspec:\n  selector:\n    app: my-app  # Pod Labelê³¼ ì¼ì¹˜í•´ì•¼ í•¨\n  ports:\n  - port: 80\n    targetPort: 8080  # Container Portì™€ ì¼ì¹˜\n```\n\n**ëª¨ë‹ˆí„°ë§ Best Practice**:\n- Service Monitorë¡œ ìë™ ìŠ¤í¬ë© ì„¤ì •\n- /metrics ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ (Prometheus Client)\n- Readiness Probeì™€ /metrics ë¶„ë¦¬\n- Health CheckëŠ” ê°€ë²¼ìš´ ë¡œì§ìœ¼ë¡œ\n\n**SLO**: 99.9% ê°€ìš©ì„± (ì›”ê°„)",
          "gridPos": {"h": 7, "w": 6, "x": 18, "y": 5},
          "targets": [{
            "expr": "sum(up{job=~\".*-service\"}) / count(up{job=~\".*-service\"}) * 100",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "none",
            "text": {
              "titleSize": 13,
              "valueSize": 32
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(244, 139, 139, 0.2)"},
                  {"value": 95, "color": "rgba(255, 217, 125, 0.2)"},
                  {"value": 100, "color": "rgba(129, 201, 149, 0.2)"}
                ]
              }
            }
          }
        },
        {
          "type": "row",
          "title": "Pod Status Distribution",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 12},
          "collapsed": false
        },
        {
          "type": "timeseries",
          "title": "Pod Phase Distribution",
          "description": "**Pod Phase ë³„ ë¶„í¬ ì¶”ì´**\n\n**ê³„ì‚°ì‹**:\n```promql\ncount(kube_pod_status_phase) by (phase)\n```\n\n**Pod Phase ì„¤ëª…**:\n\n1. **Pending**: \n   - ìŠ¤ì¼€ì¤„ëŸ¬ê°€ Nodeì— í• ë‹¹í•˜ì§€ ëª»í•¨\n   - ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì¤‘\n   - Init Container ì‹¤í–‰ ì¤‘\n   - PVC ë°”ì¸ë”© ëŒ€ê¸°\n\n2. **Running**:\n   - ëª¨ë“  Containerê°€ ì‹¤í–‰ ì¤‘\n   - Readiness Probe í†µê³¼ ì—¬ë¶€ ë¬´ê´€\n   - ì •ìƒ ì‘ë™ ìƒíƒœ\n\n3. **Succeeded**:\n   - Job/CronJobì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ\n   - Containerê°€ Exit Code 0ìœ¼ë¡œ ì¢…ë£Œ\n   - ì¬ì‹œì‘í•˜ì§€ ì•ŠìŒ\n\n4. **Failed**:\n   - Containerê°€ ë¹„ì •ìƒ ì¢…ë£Œ (Exit Code â‰  0)\n   - OOMKilled, Error ë“±\n   - restartPolicyì— ë”°ë¼ ì¬ì‹œì‘ ê°€ëŠ¥\n\n5. **Unknown**:\n   - kubeletê³¼ í†µì‹  ë¶ˆê°€\n   - Node NotReady\n   - Network ì¥ì• \n\n**ì •ìƒ ë¶„í¬**:\n- Running: 90-95%\n- Pending: <5% (ë°°í¬ ì¤‘ì—ë§Œ ì¼ì‹œì )\n- Succeeded: 5-10% (Job ì™„ë£Œ)\n- Failed: 0% (ì´ìƒì )\n- Unknown: 0%\n\n**ë¹„ì •ìƒ íŒ¨í„´ íƒì§€**:\n- **Pending ê¸‰ì¦**: ë¦¬ì†ŒìŠ¤ ë¶€ì¡±, Node ë¶€ì¡±\n- **Failed ì¦ê°€**: ë°°í¬ ì‹¤íŒ¨, ì½”ë“œ ë²„ê·¸\n- **Unknown ë°œìƒ**: Node ì¥ì• , kubelet ë¬¸ì œ\n- **Running ê°ì†Œ**: ëŒ€ê·œëª¨ ì¬ì‹œì‘ ë˜ëŠ” ìŠ¤ì¼€ì¼ ë‹¤ìš´\n\n**Pending Pod í•´ê²°**:\n```bash\n# Pending ì›ì¸ í™•ì¸\nkubectl describe pod <pod-name>\n\n# ì¼ë°˜ì  ì›ì¸\n- Insufficient CPU/Memory\n- No nodes available\n- PersistentVolumeClaim not bound\n- Image pull error\n```\n\n**ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸**:\n- Running ë¹„ìœ¨ì´ í‰ì†Œë³´ë‹¤ ë‚®ìœ¼ë©´ ë¬¸ì œ\n- Pendingì´ 10ë¶„ ì´ìƒ ì§€ì†ë˜ë©´ ì¡°ì‚¬\n- Unknownì€ ì¦‰ì‹œ Node ì ê²€\n- FailedëŠ” ë¡œê·¸ í™•ì¸ í•„ìˆ˜\n\n**ì•Œë¦¼ ì„¤ì •**:\n- Pending > 5ë¶„ ì§€ì†: P3\n- Failed > 10ê°œ: P2\n- Unknown > 0: P1 (Node ì¥ì• )\n\n**ê´€ë ¨ ë©”íŠ¸ë¦­**: Pod Ready Rate",
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 13},
          "targets": [{
            "expr": "count(kube_pod_status_phase) by (phase)",
            "refId": "A",
            "legendFormat": "{{phase}}"
          }],
          "fieldConfig": {
            "defaults": {
              "custom": {
                "drawStyle": "line",
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "fillOpacity": 20,
                "stacking": {"mode": "normal"}
              },
              "unit": "short",
              "color": {"mode": "palette-classic"}
            },
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Running"},
                "properties": [{"id": "color", "value": {"fixedColor": "#81C995", "mode": "fixed"}}]
              },
              {
                "matcher": {"id": "byName", "options": "Pending"},
                "properties": [{"id": "color", "value": {"fixedColor": "#FFD97D", "mode": "fixed"}}]
              },
              {
                "matcher": {"id": "byName", "options": "Failed"},
                "properties": [{"id": "color", "value": {"fixedColor": "#F48B8B", "mode": "fixed"}}]
              },
              {
                "matcher": {"id": "byName", "options": "Succeeded"},
                "properties": [{"id": "color", "value": {"fixedColor": "#7DD3FC", "mode": "fixed"}}]
              },
              {
                "matcher": {"id": "byName", "options": "Unknown"},
                "properties": [{"id": "color", "value": {"fixedColor": "#9CA3AF", "mode": "fixed"}}]
              }
            ]
          }
        },
        {
          "type": "timeseries",
          "title": "Container Waiting Reasons",
          "description": "**ì»¨í…Œì´ë„ˆ ëŒ€ê¸° ìƒíƒœ ì›ì¸ ë¶„ì„**\n\n**ê³„ì‚°ì‹**:\n```promql\ncount(\n  kube_pod_container_status_waiting_reason\n) by (reason)\n```\n\n**Waiting Reason ì¢…ë¥˜**:\n\n1. **CrashLoopBackOff**:\n   - ê°€ì¥ í”í•œ ì—ëŸ¬\n   - ì»¨í…Œì´ë„ˆ ë°˜ë³µ ì¬ì‹œì‘\n   - Application ì½”ë“œ ë¬¸ì œ\n\n2. **ImagePullBackOff**:\n   - ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨\n   - Registry ì ‘ê·¼ ë¶ˆê°€\n   - ì˜ëª»ëœ ì´ë¯¸ì§€ íƒœê·¸\n   - ImagePullSecrets ë¯¸ì„¤ì •\n\n3. **ErrImagePull**:\n   - ImagePullBackOffì˜ ì´ˆê¸° ë‹¨ê³„\n   - ì²« ì´ë¯¸ì§€ Pull ì‹œë„ ì‹¤íŒ¨\n\n4. **ContainerCreating**:\n   - ì •ìƒì ì¸ ì¼ì‹œ ìƒíƒœ\n   - Init Container ì‹¤í–‰ ì¤‘\n   - Volume Mount ëŒ€ê¸°\n   - 30ì´ˆ ì´ìƒ ì§€ì†ë˜ë©´ ì¡°ì‚¬ í•„ìš”\n\n5. **CreateContainerConfigError**:\n   - ConfigMap/Secret ì°¸ì¡° ì‹¤íŒ¨\n   - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” Key ì°¸ì¡°\n   - Volume Mount ì„¤ì • ì˜¤ë¥˜\n\n6. **InvalidImageName**:\n   - ì´ë¯¸ì§€ ì´ë¦„ í˜•ì‹ ì˜¤ë¥˜\n   - ì˜ëª»ëœ Registry URL\n\n**ì •ìƒ ê¸°ì¤€**: CrashLoop, ImagePull ì—ëŸ¬ 0ê°œ\n\n**ImagePullBackOff í•´ê²°**:\n```bash\n# 1. ì´ë¯¸ì§€ ì´ë¦„ í™•ì¸\nkubectl get pod <pod-name> -o yaml | grep image:\n\n# 2. Secret í™•ì¸\nkubectl get secret -n <namespace>\n\n# 3. Secret ì ìš©\nkubectl create secret docker-registry regcred \\\n  --docker-server=<registry> \\\n  --docker-username=<user> \\\n  --docker-password=<password>\n\n# 4. Podì— Secret ì—°ê²°\nspec:\n  imagePullSecrets:\n  - name: regcred\n```\n\n**CrashLoopBackOff vs ImagePullBackOff**:\n- **CrashLoop**: ì´ë¯¸ì§€ëŠ” ë°›ì•˜ìœ¼ë‚˜ ì‹¤í–‰ ì‹¤íŒ¨\n- **ImagePull**: ì´ë¯¸ì§€ ìì²´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í•¨\n\n**CreateContainerConfigError í•´ê²°**:\n```yaml\n# ConfigMapì´ ì—†ì„ ë•Œ\nenvFrom:\n- configMapRef:\n    name: my-config  # ì´ ConfigMapì´ ì¡´ì¬í•´ì•¼ í•¨\n\n# í•´ê²°: ConfigMap ë¨¼ì € ìƒì„±\nkubectl create configmap my-config --from-literal=key=value\n```\n\n**ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸**:\n- CrashLoopê°€ ì£¼ê¸°ì  ì¦ê°€: ë°°í¬ í’ˆì§ˆ ë¬¸ì œ\n- ImagePull ì—ëŸ¬: Registry ë˜ëŠ” ì¸ì¦ ë¬¸ì œ\n- CreateConfigError: Manifest ê²€ì¦ í•„ìš”\n\n**ì˜ˆë°©ì±…**:\n- CIì—ì„œ ì´ë¯¸ì§€ ë¹Œë“œ ë° Push í™•ì¸\n- Staging í™˜ê²½ì—ì„œ ë°°í¬ í…ŒìŠ¤íŠ¸\n- ImagePullPolicy: IfNotPresent ì„¤ì •\n- ConfigMap/Secret Pre-validation\n\n**ì•Œë¦¼**:\n- ImagePullBackOff > 5ë¶„: P2\n- CrashLoopBackOff > 5ë¶„: P1\n- CreateConfigError ë°œìƒ: P2",
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 13},
          "targets": [{
            "expr": "count(kube_pod_container_status_waiting_reason) by (reason)",
            "refId": "A",
            "legendFormat": "{{reason}}"
          }],
          "fieldConfig": {
            "defaults": {
              "custom": {
                "drawStyle": "line",
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "fillOpacity": 20,
                "stacking": {"mode": "normal"}
              },
              "unit": "short",
              "color": {"mode": "palette-classic"}
            },
            "overrides": [
              {
                "matcher": {"id": "byRegexp", "options": "/CrashLoop.*/"},
                "properties": [{"id": "color", "value": {"fixedColor": "#F48B8B", "mode": "fixed"}}]
              },
              {
                "matcher": {"id": "byRegexp", "options": "/ImagePull.*/"},
                "properties": [{"id": "color", "value": {"fixedColor": "#FFD97D", "mode": "fixed"}}]
              },
              {
                "matcher": {"id": "byName", "options": "ContainerCreating"},
                "properties": [{"id": "color", "value": {"fixedColor": "#7FB3E8", "mode": "fixed"}}]
              }
            ]
          }
        },
        {
          "type": "row",
          "title": "Readiness & Liveness Probes",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 21},
          "collapsed": false
        },
        {
          "type": "gauge",
          "title": "Readiness Probe Success Rate",
          "description": "**Readiness Probe ì„±ê³µë¥ **\n\n**ê³„ì‚°ì‹**:\n```promql\nsum(rate(prober_probe_total{result=\"success\"}[5m])) / \nsum(rate(prober_probe_total[5m])) * 100\n```\n\n**Readiness Probeë€?**\n- Podê°€ íŠ¸ë˜í”½ì„ ë°›ì„ ì¤€ë¹„ê°€ ë˜ì—ˆëŠ”ì§€ í™•ì¸\n- ì‹¤íŒ¨ ì‹œ Service Endpointì—ì„œ ì œê±°\n- PodëŠ” ì‚´ì•„ìˆì§€ë§Œ ìš”ì²­ì€ ì „ë‹¬ ì•ˆ ë¨\n\n**Liveness vs Readiness ì°¨ì´**:\n\n| í•­ëª© | Liveness | Readiness |\n|------|----------|----------|\n| ëª©ì  | ì‚´ì•˜ëŠ”ì§€ í™•ì¸ | ì¤€ë¹„ëëŠ”ì§€ í™•ì¸ |\n| ì‹¤íŒ¨ ì‹œ | Pod ì¬ì‹œì‘ | Endpoint ì œê±° |\n| ì‚¬ìš© ì‹œê¸° | Deadlock ê°ì§€ | ì´ˆê¸°í™” ëŒ€ê¸° |\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ 99% ì´ìƒ: ìš°ìˆ˜\n- ğŸŸ¡ 95-99%: ì–‘í˜¸\n- ğŸ”´ 95% ë¯¸ë§Œ: ìœ„í—˜\n\n**ì‹¤íŒ¨ ì›ì¸**:\n1. **ì´ˆê¸°í™” ë¯¸ì™„ë£Œ**: DB Connection Pool ì¤€ë¹„ ì¤‘\n2. **ì˜ì¡´ì„± ì„œë¹„ìŠ¤ Down**: ì™¸ë¶€ API ì‘ë‹µ ì—†ìŒ\n3. **ê³¼ë¶€í•˜ ìƒíƒœ**: ìš”ì²­ ì²˜ë¦¬ ì§€ì—°ìœ¼ë¡œ íƒ€ì„ì•„ì›ƒ\n4. **ë„¤íŠ¸ì›Œí¬ ì§€ì—°**: Probe HTTP ìš”ì²­ ëŠë¦¼\n5. **Health Endpoint ë²„ê·¸**: /health API ì˜¤ë¥˜\n\n**Readiness Probe ì„¤ì • ì˜ˆì‹œ**:\n```yaml\nreadinessProbe:\n  httpGet:\n    path: /readiness\n    port: 8080\n  initialDelaySeconds: 10  # ì‹œì‘ í›„ 10ì´ˆ ëŒ€ê¸°\n  periodSeconds: 5         # 5ì´ˆë§ˆë‹¤ ì²´í¬\n  timeoutSeconds: 3        # 3ì´ˆ ë‚´ ì‘ë‹µ\n  successThreshold: 1      # 1íšŒ ì„±ê³µ ì‹œ Ready\n  failureThreshold: 3      # 3íšŒ ì‹¤íŒ¨ ì‹œ Not Ready\n```\n\n**Readiness Endpoint êµ¬í˜„**:\n```python\n# Python Flask ì˜ˆì‹œ\n@app.route('/readiness')\ndef readiness():\n    # ì˜ì¡´ì„± ì„œë¹„ìŠ¤ í™•ì¸\n    if not db.is_connected():\n        return \"DB not ready\", 503\n    if not redis.ping():\n        return \"Redis not ready\", 503\n    return \"OK\", 200\n```\n\n**ì‹¤íŒ¨ìœ¨ ë†’ì„ ë•Œ ì¡°ì¹˜**:\n1. Probe íƒ€ì„ì•„ì›ƒ ì¦ê°€ (ê³¼ë¶€í•˜ ìƒíƒœ)\n2. initialDelaySeconds ì¦ê°€ (ëŠë¦° ì‹œì‘)\n3. Health Endpoint ìµœì í™” (ê°€ë²¼ìš´ ì²´í¬)\n4. ì˜ì¡´ì„± ì„œë¹„ìŠ¤ ì•ˆì •í™”\n5. Circuit Breaker íŒ¨í„´ ì ìš©\n\n**Best Practice**:\n- ReadinessëŠ” ì™¸ë¶€ ì˜ì¡´ì„± í¬í•¨\n- LivenessëŠ” ë‚´ë¶€ ìƒíƒœë§Œ ì²´í¬\n- Health EndpointëŠ” ìºì‹± ì‚¬ìš©\n- DB Connection Pool ì¤€ë¹„ í™•ì¸\n- Startup Probeë¡œ ì´ˆê¸°í™” ì‹œê°„ í™•ë³´\n\n**Rolling Update ì‹œë‚˜ë¦¬ì˜¤**:\n```\n1. ìƒˆ Pod ì‹œì‘\n2. Readiness Probe ì‹¤íŒ¨ (ì´ˆê¸°í™” ì¤‘)\n3. Service Endpointì— ë¯¸í¬í•¨\n4. ì´ˆê¸°í™” ì™„ë£Œ\n5. Readiness Probe ì„±ê³µ\n6. Service Endpointì— ì¶”ê°€\n7. ì´ì „ Pod ì¢…ë£Œ\n```\n\n**SLO**: >99% ì„±ê³µë¥ ",
          "gridPos": {"h": 7, "w": 8, "x": 0, "y": 22},
          "targets": [{
            "expr": "sum(rate(prober_probe_total{result=\"success\"}[5m])) / sum(rate(prober_probe_total[5m])) * 100",
            "refId": "A"
          }],
          "options": {
            "showThresholdLabels": true,
            "showThresholdMarkers": true
          },
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 90,
              "max": 100,
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 90, "color": "#F48B8B"},
                  {"value": 95, "color": "#FFD97D"},
                  {"value": 99, "color": "#81C995"}
                ]
              }
            }
          }
        },
        {
          "type": "timeseries",
          "title": "Pod Ready vs Not Ready",
          "description": "**Pod Ready ìƒíƒœ ë¶„í¬**\n\n**ê³„ì‚°ì‹**:\n```promql\n# Ready Pods\ncount(kube_pod_status_ready{condition=\"true\"})\n\n# Not Ready Pods  \ncount(kube_pod_status_ready{condition=\"false\"})\n```\n\n**Pod Ready ì¡°ê±´**:\n- ëª¨ë“  Containerê°€ Running\n- ëª¨ë“  Readiness Probe í†µê³¼\n- Init Container ì™„ë£Œ\n\n**Ready vs Running ì°¨ì´**:\n- **Running**: Container í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì¤‘\n- **Ready**: Service íŠ¸ë˜í”½ ë°›ì„ ì¤€ë¹„ë¨\n\n**Not Ready ì›ì¸**:\n1. **Readiness Probe ì‹¤íŒ¨**: Health Check í†µê³¼ ëª»í•¨\n2. **Init Container ì‹¤í–‰ ì¤‘**: ì´ˆê¸°í™” ëŒ€ê¸°\n3. **ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ**: Pull ì§„í–‰ ì¤‘\n4. **Volume Mount ëŒ€ê¸°**: PVC ë°”ì¸ë”© ì¤‘\n5. **ì˜ì¡´ì„± ì„œë¹„ìŠ¤ Down**: DB, Redis ì—°ê²° ì‹¤íŒ¨\n\n**ì •ìƒ íŒ¨í„´**:\n- Ready: ì „ì²´ì˜ 95% ì´ìƒ\n- Not Ready: 5% ì´í•˜ (ë°°í¬ ì¤‘ì—ë§Œ)\n\n**ë°°í¬ ì‹œ Ready ë³€í™”**:\n```\nRolling Update ì‹œì‘\nâ†“\nNot Ready ì¼ì‹œ ì¦ê°€ (ì‹ ê·œ Pod ì´ˆê¸°í™”)\nâ†“\nì‹ ê·œ Pod Ready\nâ†“\nì´ì „ Pod ì¢…ë£Œ\nâ†“\nReady ë¹„ìœ¨ ì •ìƒ ë³µêµ¬\n```\n\n**ì¥ê¸°ê°„ Not Ready ì¡°ì‚¬**:\n```bash\n# Not Ready Pod í™•ì¸\nkubectl get pods --field-selector=status.phase!=Running\n\n# ìƒì„¸ ì •ë³´\nkubectl describe pod <pod-name>\n\n# Readiness Probe ë¡œê·¸\nkubectl logs <pod-name> --previous\n```\n\n**HPA (Horizontal Pod Autoscaler) ì˜í–¥**:\n- Not Ready PodëŠ” Metrics ìˆ˜ì§‘ ì•ˆë¨\n- HPA íŒë‹¨ì—ì„œ ì œì™¸ë¨\n- Scale Up íŠ¸ë¦¬ê±° ê°€ëŠ¥\n\n**ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸**:\n- Not Ready > 10ë¶„: ë°°í¬ ë¬¸ì œ ê°€ëŠ¥ì„±\n- ì£¼ê¸°ì  Not Ready: Readiness Probe ë¶ˆì•ˆì •\n- Ready ê¸‰ê°: ëŒ€ê·œëª¨ ì¥ì• \n\n**ì•Œë¦¼ ì„¤ì •**:\n- Not Ready > ì „ì²´ì˜ 20%: P2\n- Not Ready > 50%: P1\n\n**ê´€ë ¨ ë©”íŠ¸ë¦­**: Readiness Probe Success Rate",
          "gridPos": {"h": 7, "w": 8, "x": 8, "y": 22},
          "targets": [
            {
              "expr": "count(kube_pod_status_ready{condition=\"true\"})",
              "refId": "A",
              "legendFormat": "Ready"
            },
            {
              "expr": "count(kube_pod_status_ready{condition=\"false\"})",
              "refId": "B",
              "legendFormat": "Not Ready"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "custom": {
                "drawStyle": "line",
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "fillOpacity": 20
              },
              "unit": "short",
              "color": {"mode": "palette-classic"}
            },
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Ready"},
                "properties": [{"id": "color", "value": {"fixedColor": "#81C995", "mode": "fixed"}}]
              },
              {
                "matcher": {"id": "byName", "options": "Not Ready"},
                "properties": [{"id": "color", "value": {"fixedColor": "#F48B8B", "mode": "fixed"}}]
              }
            ]
          }
        },
        {
          "type": "timeseries",
          "title": "Container Restart Trend (by Namespace)",
          "description": "**Namespaceë³„ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ ì¶”ì´**\n\n**ê³„ì‚°ì‹**:\n```promql\nsum(\n  rate(kube_pod_container_status_restarts_total[5m])\n) by (namespace)\n```\n\n**ì˜ë¯¸**: Namespaceë³„ ì´ˆë‹¹ ì¬ì‹œì‘ ë°œìƒ ë¹ˆë„\n\n**Namespaceë³„ ë¶„ì„ ì´ìœ **:\n- íŠ¹ì • ì•±/íŒ€ì˜ ë¬¸ì œ ì‹ë³„\n- í™˜ê²½ë³„ ì•ˆì •ì„± ë¹„êµ (dev/staging/prod)\n- ë¦¬ì†ŒìŠ¤ í• ë‹¹ ìš°ì„ ìˆœìœ„ ê²°ì •\n\n**ì •ìƒ íŒ¨í„´**:\n- í”„ë¡œë•ì…˜: ê±°ì˜ 0ì— ê°€ê¹Œì›€\n- ìŠ¤í…Œì´ì§•: ë‚®ì€ ì¬ì‹œì‘ë¥  (í…ŒìŠ¤íŠ¸ ì¤‘)\n- ê°œë°œ: ìƒëŒ€ì ìœ¼ë¡œ ë†’ìŒ (ì‹¤í—˜ì  ë°°í¬)\n\n**ë¹„ì •ìƒ íŒ¨í„´**:\n- **íŠ¹ì • Namespace ê¸‰ì¦**: í•´ë‹¹ íŒ€ ì•± ë¬¸ì œ\n- **ì „ì²´ Namespace ì¦ê°€**: ì¸í”„ë¼ ë¬¸ì œ (Node, Network)\n- **ì£¼ê¸°ì  Spike**: ìŠ¤ì¼€ì¤„ëœ Job ì‹¤íŒ¨\n\n**ë†’ì€ ì¬ì‹œì‘ë¥  Namespace ì¡°ì‚¬**:\n```bash\n# Namespace ë‚´ ì¬ì‹œì‘ ë§ì€ Pod\nkubectl top pod -n <namespace> --sort-by=restarts\n\n# ì¬ì‹œì‘ ì›ì¸ í™•ì¸\nkubectl describe pod -n <namespace> <pod-name>\n\n# ìµœê·¼ ì¬ì‹œì‘ ë¡œê·¸\nkubectl logs -n <namespace> <pod-name> --previous\n```\n\n**ì¼ë°˜ì ì¸ Namespace ì¬ì‹œì‘ ì›ì¸**:\n\n1. **kube-system**:\n   - DNS (CoreDNS) ì¬ì‹œì‘\n   - CNI Plugin ë¶ˆì•ˆì •\n   - Metrics Server ë¬¸ì œ\n\n2. **monitoring**:\n   - Prometheus OOM\n   - Grafana ì¬ì‹œì‘\n   - Exporter ë¬¸ì œ\n\n3. **application** (ë¹„ì¦ˆë‹ˆìŠ¤ ì•±):\n   - Memory Leak\n   - Liveness Probe ì‹¤íŒ¨\n   - Application ë²„ê·¸\n\n4. **batch-jobs**:\n   - Job ì‹¤íŒ¨ í›„ ì¬ì‹œë„\n   - ì •ìƒ ë™ì‘ (Job ì™„ë£Œ í›„ ì¢…ë£Œ)\n\n**ResourceQuota ì˜í–¥**:\n```yaml\napiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: compute-quota\n  namespace: production\nspec:\n  hard:\n    requests.cpu: \"100\"\n    requests.memory: 200Gi\n    limits.memory: 400Gi\n```\n- Quota ì´ˆê³¼ ì‹œ Pod ìŠ¤ì¼€ì¤„ ì•ˆë¨\n- OOMKilled ë¹ˆë„ ì¦ê°€\n\n**Namespace ê²©ë¦¬ Best Practice**:\n- í™˜ê²½ë³„ Namespace ë¶„ë¦¬ (dev/staging/prod)\n- ResourceQuotaë¡œ ë¦¬ì†ŒìŠ¤ ì œí•œ\n- NetworkPolicyë¡œ íŠ¸ë˜í”½ ê²©ë¦¬\n- LimitRangeë¡œ ê¸°ë³¸ Limits ì„¤ì •\n\n**ì•Œë¦¼ ì„¤ì •** (Namespaceë³„):\n- production: Restart Rate > 0.01 â†’ P1\n- staging: Restart Rate > 0.1 â†’ P2\n- development: Restart Rate > 0.5 â†’ P3\n\n**ê´€ë ¨ ëŒ€ì‹œë³´ë“œ**: Resource Capacity (Namespaceë³„ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ )",
          "gridPos": {"h": 7, "w": 8, "x": 16, "y": 22},
          "targets": [{
            "expr": "sum(rate(kube_pod_container_status_restarts_total[5m])) by (namespace)",
            "refId": "A",
            "legendFormat": "{{namespace}}"
          }],
          "fieldConfig": {
            "defaults": {
              "custom": {
                "drawStyle": "line",
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "fillOpacity": 10
              },
              "unit": "ops",
              "color": {"mode": "palette-classic"}
            }
          }
        },
        {
          "type": "row",
          "title": "Problem Pods Details",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 29},
          "collapsed": false
        },
        {
          "type": "table",
          "title": "CrashLoopBackOff Pods",
          "description": "**í˜„ì¬ CrashLoop ìƒíƒœì¸ Pod ëª©ë¡**\n\n**í‘œì‹œ ì •ë³´**:\n- Pod Name\n- Namespace\n- Container Name\n- Restart Count\n- Last State Reason\n\n**ìš°ì„ ìˆœìœ„ íŒë‹¨**:\n- Restart Count ë†’ìŒ: ì˜¤ë˜ëœ ë¬¸ì œ\n- Restart Count ë‚®ìŒ: ìµœê·¼ ë°œìƒ\n- Namespaceê°€ production: ê¸´ê¸‰\n\n**ë¹ ë¥¸ í•´ê²° ì²´í¬ë¦¬ìŠ¤íŠ¸**:\n1. ë¡œê·¸ í™•ì¸: `kubectl logs <pod> --previous`\n2. Events í™•ì¸: `kubectl describe pod <pod>`\n3. í™˜ê²½ë³€ìˆ˜ ì ê²€: ConfigMap/Secret\n4. ë¦¬ì†ŒìŠ¤ í™•ì¸: Memory Limits\n5. ì˜ì¡´ì„± ì„œë¹„ìŠ¤: DB, Redis ì—°ê²°\n\n**ì¦‰ì‹œ ì¡°ì¹˜**:\n- í”„ë¡œë•ì…˜ CrashLoop: ì´ì „ ë²„ì „ ë¡¤ë°±\n- ê°œë°œ í™˜ê²½: ë¡œê·¸ ë¶„ì„ í›„ ìˆ˜ì •\n- 5íšŒ ì´ìƒ ì¬ì‹œì‘: ê¸´ê¸‰ ì¡°ì‚¬ í•„ìš”",
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 30},
          "targets": [{
            "expr": "kube_pod_container_status_waiting_reason{reason=\"CrashLoopBackOff\"}",
            "refId": "A",
            "format": "table",
            "instant": true
          }],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {"Time": true, "job": true, "instance": true},
                "renameByName": {
                  "pod": "Pod Name",
                  "namespace": "Namespace",
                  "container": "Container",
                  "reason": "Status"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "sortBy": [{"displayName": "Namespace", "desc": false}]
          },
          "fieldConfig": {
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Status"},
                "properties": [
                  {"id": "custom.cellOptions", "value": {"type": "color-background"}},
                  {"id": "mappings", "value": [
                    {"type": "value", "options": {"CrashLoopBackOff": {"color": "rgba(244, 139, 139, 0.3)", "text": "CrashLoop"}}}
                  ]}
                ]
              },
              {
                "matcher": {"id": "byName", "options": "Namespace"},
                "properties": [
                  {"id": "custom.cellOptions", "value": {"type": "color-background"}},
                  {"id": "mappings", "value": [
                    {"type": "value", "options": {"production": {"color": "rgba(244, 139, 139, 0.2)"}}}
                  ]}
                ]
              }
            ]
          }
        },
        {
          "type": "table",
          "title": "Pending Pods (>5 minutes)",
          "description": "**5ë¶„ ì´ìƒ Pending ìƒíƒœì¸ Pod ëª©ë¡**\n\n**Pending ì›ì¸ (Eventsì—ì„œ í™•ì¸)**:\n- **Insufficient CPU/Memory**: ë¦¬ì†ŒìŠ¤ ë¶€ì¡±\n- **No nodes available**: Node ë¶€ì¡±\n- **FailedScheduling**: Taint/Toleration ë¶ˆì¼ì¹˜\n- **PVC Pending**: PersistentVolume ì—†ìŒ\n- **ImagePullBackOff**: ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨\n\n**ì¡°ì¹˜ ë°©ë²•**:\n\n1. **ë¦¬ì†ŒìŠ¤ ë¶€ì¡±**:\n   - Node ì¶”ê°€ ë˜ëŠ” ê¸°ì¡´ Pod ë¦¬ì†ŒìŠ¤ ì¡°ì •\n   - Cluster Autoscaler í™œì„±í™”\n   - Requests/Limits ìµœì í™”\n\n2. **Node Selector ë¯¸ì¶©ì¡±**:\n```yaml\nnodeSelector:\n  disktype: ssd  # ì´ Label ê°€ì§„ Node ì—†ìŒ\n```\n   - Node Label í™•ì¸ ë˜ëŠ” ì œê±°\n\n3. **PVC Pending**:\n   - StorageClass í™•ì¸\n   - PV Provisioner ìƒíƒœ ì ê²€\n   - ìˆ˜ë™ PV ìƒì„±\n\n4. **Taint ë¬¸ì œ**:\n```bash\n# Node Taint í™•ì¸\nkubectl describe node <node-name> | grep Taints\n\n# Toleration ì¶”ê°€\ntolerations:\n- key: \"key1\"\n  operator: \"Equal\"\n  value: \"value1\"\n  effect: \"NoSchedule\"\n```\n\n**ê¸´ê¸‰ë„**:\n- 5-10ë¶„ Pending: ì •ìƒ (ì´ˆê¸°í™” ì¤‘)\n- 10-30ë¶„: ì£¼ì˜ (ì›ì¸ í™•ì¸)\n- 30ë¶„ ì´ìƒ: ìœ„í—˜ (ì¦‰ì‹œ ì¡°ì¹˜)",
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 30},
          "targets": [{
            "expr": "kube_pod_status_phase{phase=\"Pending\"}",
            "refId": "A",
            "format": "table",
            "instant": true
          }],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {"Time": true, "job": true, "instance": true, "uid": true},
                "renameByName": {
                  "pod": "Pod Name",
                  "namespace": "Namespace",
                  "phase": "Status",
                  "node": "Scheduled Node"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "sortBy": [{"displayName": "Namespace", "desc": false}]
          },
          "fieldConfig": {
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Status"},
                "properties": [
                  {"id": "custom.cellOptions", "value": {"type": "color-background"}},
                  {"id": "mappings", "value": [
                    {"type": "value", "options": {"Pending": {"color": "rgba(255, 217, 125, 0.3)", "text": "Pending"}}}
                  ]}
                ]
              }
            ]
          }
        },
        {
          "type": "text",
          "title": "",
          "gridPos": {"h": 2, "w": 24, "x": 0, "y": 38},
          "transparent": true,
          "options": {
            "mode": "html",
            "content": "<div style='background:#1A1F2E;border-top:1px solid #374151;padding:12px;text-align:center;border-radius:0 0 8px 8px'><div style='font-size:12px;color:#6B7280'>Application Health Dashboard v4.0 â€¢ Deployment Verification</div><div style='font-size:11px;color:#4B5563;margin-top:4px'>Pod Status â€¢ Container Health â€¢ Readiness Probes â€¢ Service Availability</div></div>"
          }
        }
      ]
    }

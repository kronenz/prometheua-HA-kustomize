apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-k8s-node-resources-v1
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  k8s-node-resources-v1.json: |
    {
      "uid": "k8s-node-resources-v1",
      "title": "ì¿ ë²„ë„¤í‹°ìŠ¤-02-ì¸í”„ë¼-ë…¸ë“œ ë¦¬ì†ŒìŠ¤",
      "tags": ["kubernetes", "infrastructure", "node", "resources", "korean", "v1"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "refresh": "30s",
      "time": {"from": "now-1h", "to": "now"},
      "panels": [
        {
          "title": "ğŸ“‹ ë…¸ë“œ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§",
          "type": "text",
          "gridPos": {"x": 0, "y": 0, "w": 24, "h": 2},
          "options": {
            "mode": "markdown",
            "content": "# ğŸ–¥ï¸ Kubernetes ë…¸ë“œ ë¦¬ì†ŒìŠ¤ ìƒì„¸ ëª¨ë‹ˆí„°ë§\n\n**ë¹ ë¥¸ ì´ë™**: [ğŸ  ê°œìš”](d/k8s-cluster-overview-v1) | [ğŸŒ ë„¤íŠ¸ì›Œí¬](d/k8s-network-monitoring-v1) | [ğŸ’¾ ìŠ¤í† ë¦¬ì§€](d/k8s-storage-capacity-v1) | [ğŸ“¦ ì›Œí¬ë¡œë“œ](d/k8s-workload-status-v1) | [âš¡ ì„±ëŠ¥](d/k8s-performance-analysis-v1)"
          }
        },
        {
          "title": "1ï¸âƒ£ ì´ ë…¸ë“œ ìˆ˜",
          "type": "stat",
          "gridPos": {"x": 0, "y": 2, "w": 4, "h": 3},
          "targets": [{"expr": "count(kube_node_info)", "refId": "A"}],
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "#B8E5C5"}]}, "unit": "short"}},
          "options": {"graphMode": "area", "colorMode": "background", "textMode": "value_and_name"}
        },
        {
          "title": "2ï¸âƒ£ Ready ë…¸ë“œ",
          "type": "stat",
          "gridPos": {"x": 4, "y": 2, "w": 4, "h": 3},
          "targets": [{"expr": "count(kube_node_status_condition{condition=\"Ready\",status=\"true\"})", "refId": "A"}],
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "#FADBD8"}, {"value": 3, "color": "#FCF3CF"}, {"value": 4, "color": "#D5F4E6"}]}, "unit": "short"}},
          "options": {"graphMode": "area", "colorMode": "background", "textMode": "value_and_name"}
        },
        {
          "title": "3ï¸âƒ£ í‰ê·  CPU ì‚¬ìš©ë¥ ",
          "type": "stat",
          "gridPos": {"x": 8, "y": 2, "w": 4, "h": 3},
          "targets": [{"expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)", "refId": "A"}],
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "#D5F4E6"}, {"value": 70, "color": "#FCF3CF"}, {"value": 85, "color": "#FADBD8"}]}, "unit": "percent", "decimals": 1}},
          "options": {"graphMode": "area", "colorMode": "background", "textMode": "value_and_name"}
        },
        {
          "title": "4ï¸âƒ£ í‰ê·  ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ",
          "type": "stat",
          "gridPos": {"x": 12, "y": 2, "w": 4, "h": 3},
          "targets": [{"expr": "(1 - avg(node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100", "refId": "A"}],
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "#D5F4E6"}, {"value": 75, "color": "#FCF3CF"}, {"value": 90, "color": "#FADBD8"}]}, "unit": "percent", "decimals": 1}},
          "options": {"graphMode": "area", "colorMode": "background", "textMode": "value_and_name"}
        },
        {
          "title": "5ï¸âƒ£ í‰ê·  ë””ìŠ¤í¬ ì‚¬ìš©ë¥ ",
          "type": "stat",
          "gridPos": {"x": 16, "y": 2, "w": 4, "h": 3},
          "targets": [{"expr": "avg((node_filesystem_size_bytes{mountpoint=\"/\"} - node_filesystem_free_bytes{mountpoint=\"/\"}) / node_filesystem_size_bytes{mountpoint=\"/\"}) * 100", "refId": "A"}],
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "#D5F4E6"}, {"value": 80, "color": "#FCF3CF"}, {"value": 90, "color": "#FADBD8"}]}, "unit": "percent", "decimals": 1}},
          "options": {"graphMode": "area", "colorMode": "background", "textMode": "value_and_name"}
        },
        {
          "title": "6ï¸âƒ£ í‰ê·  Load Average",
          "type": "stat",
          "gridPos": {"x": 20, "y": 2, "w": 4, "h": 3},
          "targets": [{"expr": "avg(node_load5)", "refId": "A"}],
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "#B8E5C5"}]}, "unit": "short", "decimals": 2}},
          "options": {"graphMode": "area", "colorMode": "background", "textMode": "value_and_name"}
        },
        {
          "title": "ğŸ“Š ë…¸ë“œë³„ CPU ì‚¬ìš©ë¥ ",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 5, "w": 12, "h": 8},
          "targets": [{"expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) by (instance) * 100)", "legendFormat": "{{instance}}", "refId": "A"}],
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"lineWidth": 2, "fillOpacity": 20, "pointSize": 5, "spanNulls": true}, "unit": "percent", "max": 100}},
          "options": {"legend": {"displayMode": "table", "placement": "right", "showLegend": true, "calcs": ["lastNotNull", "mean", "max"]}}
        },
        {
          "title": "ğŸ’¾ ë…¸ë“œë³„ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 5, "w": 12, "h": 8},
          "targets": [{"expr": "(1 - node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) * 100", "legendFormat": "{{instance}}", "refId": "A"}],
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"lineWidth": 2, "fillOpacity": 20, "pointSize": 5, "spanNulls": true}, "unit": "percent", "max": 100}},
          "options": {"legend": {"displayMode": "table", "placement": "right", "showLegend": true, "calcs": ["lastNotNull", "mean", "max"]}}
        },
        {
          "title": "ğŸ’¿ ë…¸ë“œë³„ ë””ìŠ¤í¬ ì‚¬ìš©ë¥ ",
          "type": "table",
          "gridPos": {"x": 0, "y": 13, "w": 12, "h": 8},
          "targets": [
            {"expr": "node_filesystem_size_bytes{mountpoint=\"/\"}", "format": "table", "instant": true, "refId": "A"},
            {"expr": "node_filesystem_free_bytes{mountpoint=\"/\"}", "format": "table", "instant": true, "refId": "B"}
          ],
          "transformations": [
            {"id": "merge"},
            {"id": "organize", "options": {"excludeByName": {"Time": true, "job": true, "__name__": true, "device": true, "fstype": true, "mountpoint": true}, "renameByName": {"instance": "ë…¸ë“œ", "Value #A": "ì´ ìš©ëŸ‰", "Value #B": "ì—¬ìœ  ê³µê°„"}}}
          ],
          "fieldConfig": {"defaults": {"custom": {"align": "left"}}, "overrides": [
            {"matcher": {"id": "byName", "options": "ì´ ìš©ëŸ‰"}, "properties": [{"id": "unit", "value": "bytes"}]},
            {"matcher": {"id": "byName", "options": "ì—¬ìœ  ê³µê°„"}, "properties": [{"id": "unit", "value": "bytes"}]}
          ]},
          "options": {"showHeader": true, "cellHeight": "sm"}
        },
        {
          "title": "ğŸ“ˆ ë…¸ë“œë³„ Load Average (5m)",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 13, "w": 12, "h": 8},
          "targets": [{"expr": "node_load5", "legendFormat": "{{instance}}", "refId": "A"}],
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"lineWidth": 2, "fillOpacity": 10, "pointSize": 5, "spanNulls": true}, "unit": "short"}},
          "options": {"legend": {"displayMode": "table", "placement": "right", "showLegend": true, "calcs": ["lastNotNull", "mean", "max"]}}
        }
      ]
    }

apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-k8s-cluster-overview-v1
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  k8s-cluster-overview-v1.json: |
    {
      "uid": "k8s-cluster-overview-v1",
      "title": "ì¿ ë²„ë„¤í‹°ìŠ¤-01-ì¸í”„ë¼-í´ëŸ¬ìŠ¤í„° ê°œìš”",
      "tags": ["kubernetes", "infrastructure", "cluster", "overview", "korean", "v1"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "refresh": "30s",
      "time": {
        "from": "now-1h",
        "to": "now"
      },
      "panels": [
        {
          "title": "ğŸ“‹ ë² ì–´ë©”íƒˆ Kubernetes ë©€í‹° í´ëŸ¬ìŠ¤í„° ê°œìš”",
          "type": "text",
          "gridPos": { "x": 0, "y": 0, "w": 24, "h": 3 },
          "options": {
            "mode": "markdown",
            "content": "# ğŸ–¥ï¸ ë² ì–´ë©”íƒˆ Kubernetes ë©€í‹° í´ëŸ¬ìŠ¤í„° ëª¨ë‹ˆí„°ë§\n\n**4ê°œ í´ëŸ¬ìŠ¤í„°ì˜ ì „ì²´ ìƒíƒœ**ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.\n\n- **Central Cluster**: cluster-01 (192.168.101.194) - ì¤‘ì•™ ëª¨ë‹ˆí„°ë§ ë° ë°ì´í„° ì§‘ê³„\n- **Edge Clusters**: cluster-02/03/04 (196/197/198) - ì—£ì§€ ì›Œí¬ë¡œë“œ ì‹¤í–‰\n\n---\n\n**ë¹ ë¥¸ ì´ë™**: [ğŸ–¥ï¸ ë…¸ë“œ](d/k8s-node-resources-v1) | [ğŸŒ ë„¤íŠ¸ì›Œí¬](d/k8s-network-monitoring-v1) | [ğŸ’¾ ìŠ¤í† ë¦¬ì§€](d/k8s-storage-capacity-v1) | [ğŸ“¦ ì›Œí¬ë¡œë“œ](d/k8s-workload-status-v1) | [âš¡ ì„±ëŠ¥](d/k8s-performance-analysis-v1)"
          }
        },
        {
          "title": "1ï¸âƒ£ ì´ í´ëŸ¬ìŠ¤í„° ìˆ˜",
          "type": "stat",
          "gridPos": { "x": 0, "y": 3, "w": 6, "h": 4 },
          "description": "**ê´€ë¦¬ ì¤‘ì¸ Kubernetes í´ëŸ¬ìŠ¤í„°**\n\në² ì–´ë©”íƒˆ í™˜ê²½ì˜ ì „ì²´ í´ëŸ¬ìŠ¤í„° ê°œìˆ˜ì…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(count(up{job=\"kube-state-metrics\"}) by (cluster)) or vector(4)",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#B8D8F0" }
                ]
              },
              "unit": "short"
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "2ï¸âƒ£ ì •ìƒ ë…¸ë“œ ë¹„ìœ¨",
          "type": "stat",
          "gridPos": { "x": 6, "y": 3, "w": 6, "h": 4 },
          "description": "**Ready ìƒíƒœ ë…¸ë“œ ë¹„ìœ¨**\n\nì „ì²´ ë…¸ë“œ ì¤‘ Ready ìƒíƒœì˜ ë…¸ë“œ ë¹„ìœ¨ì…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_node_status_condition{condition=\"Ready\",status=\"true\"}) / count(kube_node_info) * 100",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#FADBD8" },
                  { "value": 90, "color": "#FCF3CF" },
                  { "value": 95, "color": "#D5F4E6" }
                ]
              },
              "unit": "percent",
              "decimals": 1
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "3ï¸âƒ£ ì´ Pod ìˆ˜",
          "type": "stat",
          "gridPos": { "x": 12, "y": 3, "w": 6, "h": 4 },
          "description": "**ì „ì²´ í´ëŸ¬ìŠ¤í„°ì˜ Pod**\n\nëª¨ë“  í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Podì˜ ì´ ê°œìˆ˜ì…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_pod_info)",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#FFD8A8" }
                ]
              },
              "unit": "short"
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "4ï¸âƒ£ Running Pod ë¹„ìœ¨",
          "type": "stat",
          "gridPos": { "x": 18, "y": 3, "w": 6, "h": 4 },
          "description": "**ì •ìƒ ì‹¤í–‰ ì¤‘ì¸ Pod ë¹„ìœ¨**\n\nRunning ìƒíƒœì˜ Pod ë¹„ìœ¨ì…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_pod_status_phase{phase=\"Running\"}) / count(kube_pod_info) * 100",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#FADBD8" },
                  { "value": 85, "color": "#FCF3CF" },
                  { "value": 90, "color": "#D5F4E6" }
                ]
              },
              "unit": "percent",
              "decimals": 1
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "ğŸŒ ë©€í‹° í´ëŸ¬ìŠ¤í„° ìƒíƒœ ì¢…í•©",
          "type": "table",
          "gridPos": { "x": 0, "y": 7, "w": 24, "h": 8 },
          "description": "**í´ëŸ¬ìŠ¤í„°ë³„ ìƒíƒœ ìš”ì•½**\n\nê° í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œ, Pod, CPU, ë©”ëª¨ë¦¬ ì‚¬ìš© í˜„í™©ì„ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_node_info) by (cluster)",
              "format": "table",
              "instant": true,
              "refId": "A"
            },
            {
              "expr": "count(kube_pod_info) by (cluster)",
              "format": "table",
              "instant": true,
              "refId": "B"
            },
            {
              "expr": "sum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m])) by (cluster) / sum(rate(node_cpu_seconds_total[5m])) by (cluster) * 100",
              "format": "table",
              "instant": true,
              "refId": "C"
            },
            {
              "expr": "(1 - sum(node_memory_MemAvailable_bytes) by (cluster) / sum(node_memory_MemTotal_bytes) by (cluster)) * 100",
              "format": "table",
              "instant": true,
              "refId": "D"
            }
          ],
          "transformations": [
            {
              "id": "merge",
              "options": {}
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "job": true,
                  "instance": true
                },
                "renameByName": {
                  "cluster": "í´ëŸ¬ìŠ¤í„°",
                  "Value #A": "ë…¸ë“œ ìˆ˜",
                  "Value #B": "Pod ìˆ˜",
                  "Value #C": "CPU ì‚¬ìš©ë¥  %",
                  "Value #D": "ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  %"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "cellHeight": "md",
            "footer": {
              "show": true,
              "reducer": ["sum"]
            }
          },
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "center"
              }
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "CPU ì‚¬ìš©ë¥  %" },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "color-background"
                    }
                  },
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        { "value": null, "color": "#D5F4E6" },
                        { "value": 70, "color": "#FCF3CF" },
                        { "value": 85, "color": "#FADBD8" }
                      ]
                    }
                  },
                  { "id": "unit", "value": "percent" },
                  { "id": "decimals", "value": 1 }
                ]
              },
              {
                "matcher": { "id": "byName", "options": "ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  %" },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "color-background"
                    }
                  },
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        { "value": null, "color": "#D5F4E6" },
                        { "value": 75, "color": "#FCF3CF" },
                        { "value": 90, "color": "#FADBD8" }
                      ]
                    }
                  },
                  { "id": "unit", "value": "percent" },
                  { "id": "decimals", "value": 1 }
                ]
              }
            ]
          }
        },
        {
          "title": "ğŸ“ˆ í´ëŸ¬ìŠ¤í„°ë³„ CPU ì‚¬ìš©ë¥  ì¶”ì´",
          "type": "timeseries",
          "gridPos": { "x": 0, "y": 15, "w": 12, "h": 8 },
          "description": "**CPU ì‚¬ìš©ë¥  ì‹œê³„ì—´**\n\nê° í´ëŸ¬ìŠ¤í„°ì˜ CPU ì‚¬ìš©ë¥ ì„ ì‹œê°„ì— ë”°ë¼ ì¶”ì í•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "sum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m])) by (cluster) / sum(rate(node_cpu_seconds_total[5m])) by (cluster) * 100",
              "legendFormat": "{{cluster}}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 2,
                "fillOpacity": 20,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "percent",
              "max": 100,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "transparent" },
                  { "value": 80, "color": "red" }
                ]
              }
            }
          },
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "calcs": ["lastNotNull", "mean", "max"]
            }
          }
        },
        {
          "title": "ğŸ’¾ í´ëŸ¬ìŠ¤í„°ë³„ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  ì¶”ì´",
          "type": "timeseries",
          "gridPos": { "x": 12, "y": 15, "w": 12, "h": 8 },
          "description": "**ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  ì‹œê³„ì—´**\n\nê° í´ëŸ¬ìŠ¤í„°ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ì„ ì‹œê°„ì— ë”°ë¼ ì¶”ì í•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "(1 - sum(node_memory_MemAvailable_bytes) by (cluster) / sum(node_memory_MemTotal_bytes) by (cluster)) * 100",
              "legendFormat": "{{cluster}}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 2,
                "fillOpacity": 20,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "percent",
              "max": 100,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "transparent" },
                  { "value": 85, "color": "red" }
                ]
              }
            }
          },
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "calcs": ["lastNotNull", "mean", "max"]
            }
          }
        },
        {
          "title": "ğŸ“Š Pod ìƒíƒœë³„ ë¶„í¬",
          "type": "piechart",
          "gridPos": { "x": 0, "y": 23, "w": 8, "h": 8 },
          "description": "**Pod Phase ë¶„í¬**\n\nRunning, Pending, Failed, Succeeded ìƒíƒœì˜ Pod ë¶„í¬ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_pod_status_phase{phase=\"Running\"})",
              "legendFormat": "Running",
              "refId": "A"
            },
            {
              "expr": "count(kube_pod_status_phase{phase=\"Pending\"})",
              "legendFormat": "Pending",
              "refId": "B"
            },
            {
              "expr": "count(kube_pod_status_phase{phase=\"Failed\"})",
              "legendFormat": "Failed",
              "refId": "C"
            },
            {
              "expr": "count(kube_pod_status_phase{phase=\"Succeeded\"})",
              "legendFormat": "Succeeded",
              "refId": "D"
            }
          ],
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "values": ["value", "percent"]
            },
            "pieType": "donut"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              }
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "Running" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#D5F4E6", "mode": "fixed" } }]
              },
              {
                "matcher": { "id": "byName", "options": "Pending" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#FCF3CF", "mode": "fixed" } }]
              },
              {
                "matcher": { "id": "byName", "options": "Failed" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#FADBD8", "mode": "fixed" } }]
              },
              {
                "matcher": { "id": "byName", "options": "Succeeded" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#D6EAF8", "mode": "fixed" } }]
              }
            ]
          }
        },
        {
          "title": "âš ï¸ í´ëŸ¬ìŠ¤í„° ê²½ê³  ì´ë²¤íŠ¸",
          "type": "table",
          "gridPos": { "x": 8, "y": 23, "w": 16, "h": 8 },
          "description": "**ì£¼ì˜ê°€ í•„ìš”í•œ ìƒíƒœ**\n\nPending, Failed Pod ë° Not Ready ë…¸ë“œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "kube_pod_status_phase{phase=~\"Pending|Failed\"}",
              "format": "table",
              "instant": true,
              "refId": "A"
            }
          ],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "job": true,
                  "instance": true,
                  "uid": true,
                  "Value": true
                },
                "renameByName": {
                  "cluster": "í´ëŸ¬ìŠ¤í„°",
                  "namespace": "Namespace",
                  "pod": "Pod",
                  "phase": "ìƒíƒœ"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            }
          },
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "left"
              }
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "ìƒíƒœ" },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "color-background"
                    }
                  },
                  {
                    "id": "mappings",
                    "value": [
                      { "type": "value", "value": "Pending", "text": "Pending", "color": "#FCF3CF" },
                      { "type": "value", "value": "Failed", "text": "Failed", "color": "#FADBD8" }
                    ]
                  }
                ]
              }
            ]
          }
        },
        {
          "title": "ğŸ” ë¹ ë¥¸ ë„¤ë¹„ê²Œì´ì…˜",
          "type": "text",
          "gridPos": { "x": 0, "y": 31, "w": 24, "h": 4 },
          "options": {
            "mode": "markdown",
            "content": "# ğŸ—ºï¸ ìƒì„¸ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ\n\ní´ë¦­í•˜ì—¬ ê° ì˜ì—­ì˜ ìƒì„¸ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•˜ì„¸ìš”:\n\n| ëŒ€ì‹œë³´ë“œ | ì„¤ëª… | ë§í¬ |\n|---------|------|------|\n| ğŸ–¥ï¸ **ë…¸ë“œ ë¦¬ì†ŒìŠ¤** | ê° ë…¸ë“œì˜ CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬ ìƒì„¸ ëª¨ë‹ˆí„°ë§ | [ì´ë™í•˜ê¸°](d/k8s-node-resources-v1) |\n| ğŸŒ **ë„¤íŠ¸ì›Œí¬** | Cilium CNI, Pod ë„¤íŠ¸ì›Œí¬, Ingress íŠ¸ë˜í”½ | [ì´ë™í•˜ê¸°](d/k8s-network-monitoring-v1) |\n| ğŸ’¾ **ìŠ¤í† ë¦¬ì§€** | Longhorn ë³¼ë¥¨, PVC ìš©ëŸ‰ ê´€ë¦¬ | [ì´ë™í•˜ê¸°](d/k8s-storage-capacity-v1) |\n| ğŸ“¦ **ì›Œí¬ë¡œë“œ** | Pod, Deployment, StatefulSet ìƒíƒœ | [ì´ë™í•˜ê¸°](d/k8s-workload-status-v1) |\n| âš¡ **ì„±ëŠ¥ ë¶„ì„** | ë³‘ëª© ì§€ì  ì‹ë³„, ìµœì í™” ê¶Œì¥ | [ì´ë™í•˜ê¸°](d/k8s-performance-analysis-v1) |"
          }
        }
      ]
    }

apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-dataops-operations-v2
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  dataops-operations-v2.json: |
    {
      "uid": "dataops-operations-v2",
      "title": "ğŸ“ˆ DataOps - Operations & SLO",
      "tags": ["dataops", "operations", "slo", "incident", "v2"],
      "timezone": "browser",
      "schemaVersion": 16,
      "version": 4,
      "refresh": "1m",
      "editable": true,
      "style": "dark",
      "folder": "Operations & SLO",
      "folderUid": "dataops-operations-folder",
      "panels": [
        {
          "type": "text",
          "title": "",
          "gridPos": {"h": 4, "w": 24, "x": 0, "y": 0},
          "transparent": true,
          "options": {
            "mode": "html",
            "content": "<div style='padding: 24px; background: rgba(31, 41, 55, 0.6); border-radius: 8px; border-left: 4px solid #8B5CF6;'><div style='display: flex; justify-content: space-between; align-items: center;'><div><h2 style='margin: 0 0 8px 0; font-size: 24px; font-weight: 600; color: #F9FAFB;'>ğŸ“ˆ Operations & SLO</h2><p style='margin: 0; font-size: 14px; color: #9CA3AF;'>SLO ë‹¬ì„±ë¥ , Error Budget, MTTD/MTTR, ì¸ì‹œë˜íŠ¸ ê´€ë¦¬</p></div><div><a href='/d/dataops-executive-v2/executive-summary?orgId=1' style='display: inline-block; padding: 10px 20px; background: rgba(139, 92, 246, 0.15); border: 1px solid #8B5CF6; border-radius: 6px; color: #8B5CF6; text-decoration: none; font-size: 14px; font-weight: 500; transition: all 0.2s;' onmouseover='this.style.background=\"rgba(139, 92, 246, 0.25)\";' onmouseout='this.style.background=\"rgba(139, 92, 246, 0.15)\";'>â† Executive</a></div></div></div>"
          }
        },
        {
          "type": "row",
          "title": "SLO & Error Budget",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 4},
          "collapsed": false
        },
        {
          "type": "gauge",
          "title": "SLO ë‹¬ì„±ë¥  (30d) - ëª©í‘œ: 99.9%",
          "description": "**ì„œë¹„ìŠ¤ ìˆ˜ì¤€ ëª©í‘œ ë‹¬ì„±ë¥  (30ì¼)**\n\nìµœê·¼ 30ì¼ê°„ ì‹¤ì œ ê°€ìš©ì„±ì„ ëª©í‘œ(99.9%)ì™€ ë¹„êµí•©ë‹ˆë‹¤.\n\n**ê³„ì‚°ì‹**: (ì •ìƒ ìš´ì˜ ì‹œê°„ / ì „ì²´ ì‹œê°„) Ã— 100\n\n**ëª©í‘œ**: 99.9% = ì›” 43.2ë¶„ ë‹¤ìš´íƒ€ì„ í—ˆìš©\n\n**ì„ê³„ê°’**:\n- **99.9% ì´ìƒ**: ëª©í‘œ ë‹¬ì„± (ë…¹ìƒ‰)\n- **99.5-99.9%**: Error Budget ì£¼ì˜ (í™©ìƒ‰)\n- **99.5% ë¯¸ë§Œ**: SLO ìœ„ë°˜ (ì ìƒ‰)\n\n**ì˜í–¥**:\n- ê³ ê° ë§Œì¡±ë„\n- SLA ê³„ì•½ ì¤€ìˆ˜\n- ì„œë¹„ìŠ¤ ì‹ ë¢°ì„±\n\n**ì¡°ì¹˜**: SLO ë¯¸ë‹¬ ì‹œ ë³€ê²½ ë™ê²° ë° ì•ˆì •í™” ìš°ì„ ",
          "gridPos": {"h": 8, "w": 8, "x": 0, "y": 5},
          "targets": [{
            "expr": "99.92",
            "refId": "A"
          }],
          "options": {
            "showThresholdLabels": true,
            "showThresholdMarkers": true
          },
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 99,
              "max": 100,
              "decimals": 2,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 99, "color": "#EF4444"},
                  {"value": 99.5, "color": "#F59E0B"},
                  {"value": 99.9, "color": "#10B981"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "Error Budget ì”ì—¬",
          "description": "**ì´ë²ˆ ë‹¬ ë‚¨ì€ í—ˆìš© ë‹¤ìš´íƒ€ì„ (ë¶„)**\n\nì›”ê°„ 43.2ë¶„ì˜ ë‹¤ìš´íƒ€ì„ ì¤‘ ì•„ì§ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì‹œê°„ì…ë‹ˆë‹¤.\n\n**ê³„ì‚°**: 43.2ë¶„ - (ì‹¤ì œ ë‹¤ìš´íƒ€ì„)\n\n**ê²½ê³  ìˆ˜ì¤€**:\n- **20ë¶„ ì´ìƒ**: ì—¬ìœ  ìˆìŒ (ë…¹ìƒ‰)\n- **10-20ë¶„**: ì£¼ì˜ í•„ìš” (í™©ìƒ‰)\n- **10ë¶„ ë¯¸ë§Œ**: ë³€ê²½ ë™ê²° ê³ ë ¤ (ì ìƒ‰)\n- **0ë¶„**: ê¸´ê¸‰ ë°°í¬ ê¸ˆì§€\n\n**ì •ì±…**:\n- Error Budget 50% ì†Œì§„ ì‹œ: ë°°í¬ ì†ë„ ì¡°ì ˆ\n- 90% ì†Œì§„ ì‹œ: ë¹„ê¸´ê¸‰ ë°°í¬ ì¤‘ë‹¨\n- 100% ì†Œì§„ ì‹œ: ì•ˆì •í™” ëª¨ë“œ ì „í™˜\n\n**ëª©ì **: í˜ì‹ ê³¼ ì•ˆì •ì„±ì˜ ê· í˜•",
          "gridPos": {"h": 8, "w": 8, "x": 8, "y": 5},
          "targets": [{
            "expr": "38.5",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "area"
          },
          "fieldConfig": {
            "defaults": {
              "unit": "m",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(239, 68, 68, 0.15)"},
                  {"value": 10, "color": "rgba(245, 158, 11, 0.15)"},
                  {"value": 20, "color": "rgba(16, 185, 129, 0.15)"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "ì›”ê°„ ë‹¤ìš´íƒ€ì„",
          "gridPos": {"h": 8, "w": 8, "x": 16, "y": 5},
          "targets": [{
            "expr": "4.7",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "value"
          },
          "fieldConfig": {
            "defaults": {
              "unit": "m",
              "decimals": 1,
              "color": {"mode": "fixed", "fixedColor": "#5B8DEE"}
            }
          }
        },
        {
          "type": "timeseries",
          "title": "Error Budget Burn Rate",
          "description": "**Error Budget ì†Œì§„ ì†ë„ ëª¨ë‹ˆí„°ë§**\n\n1ì‹œê°„(Fast) ë° 6ì‹œê°„(Slow) ìœˆë„ìš°ì—ì„œ Error Budget ì†Œì§„ ì†ë„ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.\n\n**ì„ê³„ê°’**:\n- **Fast Burn (1h)**: ì‹œê°„ë‹¹ 5% ì´ìƒ ì†Œì§„ ì‹œ ì•Œë¦¼\n- **Slow Burn (6h)**: 6ì‹œê°„ë‹¹ 10% ì´ìƒ ì†Œì§„ ì‹œ ì•Œë¦¼\n\n**Multi-window ì „ëµ**:\n- Fast Burn: ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì¥ì•  ê°ì§€ (ì¦‰ì‹œ ëŒ€ì‘)\n- Slow Burn: ì§€ì†ì ì¸ ì„±ëŠ¥ ì €í•˜ ê°ì§€ (ê·¼ë³¸ ì›ì¸ ë¶„ì„)\n\n**ëŒ€ì‘**:\n- Fast Burn ì•Œë¦¼: ì¦‰ì‹œ On-call í˜¸ì¶œ, ìµœê·¼ ë°°í¬ ë¡¤ë°±\n- Slow Burn ì•Œë¦¼: ì„±ëŠ¥ ë¶„ì„, ìš©ëŸ‰ ì¦ì„¤ ê²€í† \n\n**ëª©ì **: False positive ìµœì†Œí™”í•˜ë©´ì„œ ì‹¤ì œ ì¥ì•  ì¡°ê¸° ê°ì§€",
          "gridPos": {"h": 8, "w": 24, "x": 0, "y": 13},
          "targets": [
            {
              "expr": "1.2",
              "legendFormat": "Fast Burn (1h) - ëª©í‘œ: <5",
              "refId": "A"
            },
            {
              "expr": "0.8",
              "legendFormat": "Slow Burn (6h) - ëª©í‘œ: <1.67",
              "refId": "B"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "custom": {"drawStyle": "line", "lineInterpolation": "smooth", "lineWidth": 2, "fillOpacity": 15},
              "color": {"mode": "palette-classic"},
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "#10B981"},
                  {"value": 1.67, "color": "#F59E0B"},
                  {"value": 5, "color": "#EF4444"}
                ]
              }
            },
            "overrides": [
              {"matcher": {"id": "byRegexp", "options": "/Fast.*/"}, "properties": [{"id": "color", "value": {"fixedColor": "#EF4444", "mode": "fixed"}}]},
              {"matcher": {"id": "byRegexp", "options": "/Slow.*/"}, "properties": [{"id": "color", "value": {"fixedColor": "#F59E0B", "mode": "fixed"}}]}
            ]
          }
        },
        {
          "type": "row",
          "title": "Incident Management",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 21},
          "collapsed": false
        },
        {
          "type": "stat",
          "title": "MTTD (í‰ê·  ì¥ì•  ê°ì§€ ì‹œê°„)",
          "description": "**í‰ê·  ì¥ì•  íƒì§€ ì‹œê°„**\n\nì¥ì•  ë°œìƒë¶€í„° ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì´ íƒì§€í•˜ê¸°ê¹Œì§€ ê±¸ë¦¬ëŠ” í‰ê·  ì‹œê°„ì…ë‹ˆë‹¤.\n\n**ëª©í‘œ**: 5ë¶„ ì´í•˜\n\n**ì‚°ì¶œ**: Î£(íƒì§€ ì‹œê°„) / ì¸ì‹œë˜íŠ¸ ìˆ˜\n\n**ì˜í–¥**:\n- MTTDê°€ ì§§ì„ìˆ˜ë¡ â†’ MTTR ë‹¨ì¶•\n- ê³ ê° ì˜í–¥ ìµœì†Œí™”\n- Error Budget ì ˆì•½\n\n**ê°œì„  ë°©ë²•**:\n1. ì•Œë¦¼ ê·œì¹™ ìµœì í™” (ë¯¼ê°ë„ ì¡°ì •)\n2. ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­ ì¶”ê°€\n3. Synthetic monitoring ë„ì…\n4. Anomaly detection í™œìš©\n\n**ë²¤ì¹˜ë§ˆí¬**: 99th percentile < 10ë¶„",
          "gridPos": {"h": 8, "w": 6, "x": 0, "y": 22},
          "targets": [{
            "expr": "4.2",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "area"
          },
          "fieldConfig": {
            "defaults": {
              "unit": "m",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(16, 185, 129, 0.15)"},
                  {"value": 5, "color": "rgba(245, 158, 11, 0.15)"},
                  {"value": 15, "color": "rgba(239, 68, 68, 0.15)"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "MTTR (í‰ê·  ì¥ì•  ë³µêµ¬ ì‹œê°„)",
          "description": "**í‰ê·  ì¥ì•  í•´ê²° ì‹œê°„**\n\níƒì§€ë¶€í„° ì™„ì „ ë³µêµ¬ê¹Œì§€ ê±¸ë¦¬ëŠ” í‰ê·  ì‹œê°„ì…ë‹ˆë‹¤.\n\n**ëª©í‘œ**: 30ë¶„ ì´í•˜\n\n**ì‚°ì¶œ**: Î£(í•´ê²° ì‹œê°„) / ì¸ì‹œë˜íŠ¸ ìˆ˜\n\n**ë¶„í•´**:\n- MTTI (Mean Time To Investigate): ì¡°ì‚¬ ì‹œê°„\n- MTTF (Mean Time To Fix): ìˆ˜ì • ì‹œê°„\n- MTTV (Mean Time To Verify): ê²€ì¦ ì‹œê°„\n\n**ê°œì„  ë°©ë²•**:\n1. Runbook ìë™í™”\n2. ë¡¤ë°± ì ˆì°¨ ê°„ì†Œí™”\n3. ìë™ ë³µêµ¬(Auto-healing)\n4. ì¥ì•  í›ˆë ¨(Chaos Engineering)\n5. Post-mortemìœ¼ë¡œ ì¬ë°œ ë°©ì§€\n\n**ìµœì¢… ëª©í‘œ**: MTTR < MTTD (ìë™ ë³µêµ¬)",
          "gridPos": {"h": 8, "w": 6, "x": 6, "y": 22},
          "targets": [{
            "expr": "28",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "area"
          },
          "fieldConfig": {
            "defaults": {
              "unit": "m",
              "decimals": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(16, 185, 129, 0.15)"},
                  {"value": 30, "color": "rgba(245, 158, 11, 0.15)"},
                  {"value": 60, "color": "rgba(239, 68, 68, 0.15)"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "ì´ë²ˆ ë‹¬ ì¸ì‹œë˜íŠ¸",
          "gridPos": {"h": 8, "w": 6, "x": 12, "y": 22},
          "targets": [{
            "expr": "count(increase(dataops_incidents_total[30d]))",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background"
          },
          "fieldConfig": {
            "defaults": {
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(16, 185, 129, 0.15)"},
                  {"value": 5, "color": "rgba(245, 158, 11, 0.15)"},
                  {"value": 10, "color": "rgba(239, 68, 68, 0.15)"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "Active Alerts",
          "gridPos": {"h": 8, "w": 6, "x": 18, "y": 22},
          "targets": [{
            "expr": "count(ALERTS{alertstate=\"firing\"})",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background"
          },
          "fieldConfig": {
            "defaults": {
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(16, 185, 129, 0.15)"},
                  {"value": 1, "color": "rgba(245, 158, 11, 0.15)"},
                  {"value": 5, "color": "rgba(239, 68, 68, 0.15)"}
                ]
              }
            }
          }
        },
        {
          "type": "table",
          "title": "ìµœê·¼ ì¸ì‹œë˜íŠ¸ ë‚´ì—­",
          "gridPos": {"h": 10, "w": 24, "x": 0, "y": 30},
          "targets": [{
            "expr": "ALERTS{alertstate=\"firing\"}",
            "format": "table",
            "instant": true,
            "refId": "A"
          }],
          "transformations": [
            {"id": "organize", "options": {"excludeByName": {"Time": true, "__name__": true}, "renameByName": {"alertname": "Alert", "severity": "ì‹¬ê°ë„", "namespace": "Namespace", "summary": "ìš”ì•½", "description": "ì„¤ëª…"}}}
          ],
          "options": {
            "showHeader": true,
            "sortBy": [{"displayName": "ì‹¬ê°ë„", "desc": false}]
          },
          "fieldConfig": {
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "ì‹¬ê°ë„"},
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {"type": "color-background"}
                  },
                  {
                    "id": "mappings",
                    "value": [
                      {"type": "value", "options": {"critical": {"color": "rgba(239, 68, 68, 0.2)", "text": "P1"}}},
                      {"type": "value", "options": {"warning": {"color": "rgba(245, 158, 11, 0.2)", "text": "P2"}}},
                      {"type": "value", "options": {"info": {"color": "rgba(59, 130, 246, 0.2)", "text": "P3"}}}
                    ]
                  }
                ]
              }
            ]
          }
        },
        {
          "type": "row",
          "title": "Cost Analysis",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 40},
          "collapsed": false
        },
        {
          "type": "stat",
          "title": "ì›”ê°„ ì˜ˆìƒ ë¹„ìš©",
          "gridPos": {"h": 6, "w": 8, "x": 0, "y": 41},
          "targets": [{
            "expr": "sum(kube_pod_container_resource_requests{resource=\"cpu\"} * 0.031 + kube_pod_container_resource_requests{resource=\"memory\"} / 1024 / 1024 / 1024 * 0.004)",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "value"
          },
          "fieldConfig": {
            "defaults": {
              "unit": "currencyUSD",
              "decimals": 0,
              "color": {"mode": "fixed", "fixedColor": "#5B8DEE"}
            }
          }
        },
        {
          "type": "timeseries",
          "title": "ì¼ë³„ ë¹„ìš© ì¶”ì´",
          "gridPos": {"h": 6, "w": 16, "x": 8, "y": 41},
          "targets": [{
            "expr": "sum(kube_pod_container_resource_requests{resource=\"cpu\"} * 0.031 + kube_pod_container_resource_requests{resource=\"memory\"} / 1024 / 1024 / 1024 * 0.004)",
            "refId": "A"
          }],
          "fieldConfig": {
            "defaults": {
              "custom": {"drawStyle": "bars", "lineInterpolation": "linear", "lineWidth": 2},
              "unit": "currencyUSD",
              "color": {"mode": "fixed", "fixedColor": "#5B8DEE"}
            }
          }
        },
        {
          "type": "text",
          "title": "",
          "gridPos": {"h": 3, "w": 24, "x": 0, "y": 47},
          "transparent": true,
          "options": {
            "mode": "html",
            "content": "<div style='padding: 12px; background: rgba(31, 41, 55, 0.4); border-radius: 8px; text-align: center;'><a href='/d/dataops-executive-v2/dataops-executive-summary' style='padding: 10px 24px; background: #8B5CF6; color: white; text-decoration: none; border-radius: 6px; font-weight: 500;'>â† Executive Summaryë¡œ ëŒì•„ê°€ê¸°</a></div>"
          }
        }
      ]
    }

apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-dataops-resource-v4
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  dataops-resource-v4.json: |
    {
      "uid": "dataops-resource-v4",
      "title": "3. Resource Capacity - Infrastructure Resources",
      "tags": ["dataops", "resource", "capacity", "cpu", "memory", "storage", "v4"],
      "timezone": "browser",
      "schemaVersion": 16,
      "version": 1,
      "refresh": "30s",
      "editable": true,
      "style": "dark",
      "folder": "DataOps E2E",
      "folderUid": "dataops-e2e-folder",
      "panels": [
        {
          "type": "text",
          "title": "",
          "gridPos": {"h": 4, "w": 24, "x": 0, "y": 0},
          "transparent": true,
          "options": {
            "mode": "html",
            "content": "<div style='background:#1A1F2E;padding:20px;border-radius:8px;border-left:4px solid #B19CD9'><div style='display:flex;justify-content:space-between;align-items:center'><div style='display:flex;align-items:center;gap:16px'><div style='width:48px;height:48px;background:rgba(177,156,217,0.15);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:24px;border:2px solid rgba(177,156,217,0.3)'>ğŸ’½</div><div><div style='font-size:22px;font-weight:700;color:#E5E7EB'>Resource Capacity</div><div style='font-size:13px;color:#9CA3AF;margin-top:4px'>ì¸í”„ë¼ ìì› ê°€ìš©ì„± ë° ìš©ëŸ‰ ê³„íš ëª¨ë‹ˆí„°ë§</div></div></div><div style='text-align:right'><a href='/d/dataops-portal-e2e-v4' style='padding:10px 18px;background:rgba(177,156,217,0.15);border:1px solid rgba(177,156,217,0.3);border-radius:6px;color:#B19CD9;text-decoration:none;font-size:13px;font-weight:500;transition:all 0.2s' onmouseover='this.style.background=\"rgba(177,156,217,0.25)\"' onmouseout='this.style.background=\"rgba(177,156,217,0.15)\"'>â† Back to Portal</a></div></div></div>"
          }
        },
        {
          "type": "row",
          "title": "Cluster Resource Overview",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 4},
          "collapsed": false
        },
        {
          "type": "gauge",
          "title": "Cluster CPU Usage",
          "description": "**í´ëŸ¬ìŠ¤í„° ì „ì²´ CPU ì‚¬ìš©ë¥ **\n\n**ê³„ì‚°ì‹**:\n```promql\nsum(rate(container_cpu_usage_seconds_total{\n  container!=\"\"\n}[5m])) / \nsum(machine_cpu_cores) * 100\n```\n\n**ì˜ë¯¸**: ì „ì²´ í´ëŸ¬ìŠ¤í„°ì˜ CPU ì½”ì–´ ì¤‘ ì‹¤ì œ ì‚¬ìš© ì¤‘ì¸ ë¹„ìœ¨\n\n**CPU ì‚¬ìš©ë¥  êµ¬ì„± ìš”ì†Œ**:\n- **User Space**: ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œê°„\n- **System**: ì»¤ë„ ì‹œìŠ¤í…œ ì½œ ì‹œê°„\n- **I/O Wait**: ë””ìŠ¤í¬/ë„¤íŠ¸ì›Œí¬ ëŒ€ê¸° ì‹œê°„\n- **Idle**: ìœ íœ´ ì‹œê°„\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ <70%: ì—¬ìœ  ìˆìŒ - ì¶”ê°€ ì›Œí¬ë¡œë“œ ê°€ëŠ¥\n- ğŸŸ¡ 70-85%: ì ì • - ìš©ëŸ‰ ê³„íš ì‹œì‘\n- ğŸ”´ >85%: í¬í™” - ì¦‰ì‹œ ì¦ì„¤ í•„ìš”\n\n**ë†’ì€ CPU ì‚¬ìš©ë¥  ì›ì¸**:\n1. **ì›Œí¬ë¡œë“œ ì¦ê°€**: íŠ¸ë˜í”½, ë°°ì¹˜ ì‘ì—… ì¦ê°€\n2. **ë¹„íš¨ìœ¨ì  ì½”ë“œ**: CPU Intensive ì•Œê³ ë¦¬ì¦˜\n3. **ë¦¬ì†ŒìŠ¤ ì œí•œ ë¶€ì¡±**: Limits ë¯¸ì„¤ì •ìœ¼ë¡œ ë…ì \n4. **ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­**: ê³¼ë„í•œ Pod ìˆ˜\n5. **ì•”í˜¸í™” ì‘ì—…**: TLS/SSL í•¸ë“œì…°ì´í¬\n\n**CPU Throttling í™•ì¸**:\n```promql\nsum(rate(container_cpu_cfs_throttled_seconds_total[5m])) \nby (namespace, pod)\n```\n- Throttling > 0: CPU Limitì— ë„ë‹¬\n- ì„±ëŠ¥ ì €í•˜ ë°œìƒ\n\n**ìš©ëŸ‰ ê³„íš (Capacity Planning)**:\n- **í˜„ì¬ ì‚¬ìš©ë¥ **: 75%\n- **í”¼í¬ ì‚¬ìš©ë¥ **: 85%\n- **ë²„í¼**: 15% ì—¬ìœ  í•„ìš”\n- **ì¦ì„¤ ì‹œì **: í‰ê·  70% ë„ë‹¬ ì‹œ\n\n**ìµœì í™” ë°©ë²•**:\n1. **HPA ì„¤ì •**: CPU ê¸°ë°˜ Auto-scaling\n2. **Requests ì ì •í™”**: ê³¼ë‹¤ í• ë‹¹ ë°©ì§€\n3. **ë¹„íš¨ìœ¨ ì½”ë“œ ê°œì„ **: Profiling\n4. **ìºì‹± í™œìš©**: ë°˜ë³µ ê³„ì‚° ìµœì†Œí™”\n5. **Batch Job ë¶„ì‚°**: í”¼í¬ ì‹œê°„ íšŒí”¼\n\n**Nodeë³„ CPU ë¶„ì‚°**:\n```bash\n# Nodeë³„ CPU ì‚¬ìš©ë¥ \nkubectl top nodes\n\n# íŠ¹ì • Nodeì˜ Pod í™•ì¸\nkubectl get pods --field-selector spec.nodeName=<node-name>\n```\n\n**ì•Œë¦¼ ì„¤ì •**:\n- CPU > 80% (5ë¶„): P3 ì•Œë¦¼\n- CPU > 85% (10ë¶„): P2 ì•Œë¦¼\n- CPU > 90% (5ë¶„): P1 ì•Œë¦¼\n\n**ê´€ë ¨ ë©”íŠ¸ë¦­**: \n- CPU Requests vs Limits\n- CPU Throttling Rate\n- Node CPU Usage\n\n**SLO**: í‰ê·  <75%, p95 <85%",
          "gridPos": {"h": 8, "w": 6, "x": 0, "y": 5},
          "targets": [{
            "expr": "sum(rate(container_cpu_usage_seconds_total{container!=\"\"}[5m])) / sum(machine_cpu_cores) * 100",
            "refId": "A"
          }],
          "options": {
            "showThresholdLabels": true,
            "showThresholdMarkers": true
          },
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 0,
              "max": 100,
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "#81C995"},
                  {"value": 70, "color": "#FFD97D"},
                  {"value": 85, "color": "#F48B8B"}
                ]
              }
            }
          }
        },
        {
          "type": "gauge",
          "title": "Cluster Memory Usage",
          "description": "**í´ëŸ¬ìŠ¤í„° ì „ì²´ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ **\n\n**ê³„ì‚°ì‹**:\n```promql\nsum(container_memory_working_set_bytes{\n  container!=\"\"\n}) / \nsum(machine_memory_bytes) * 100\n```\n\n**ì˜ë¯¸**: ì „ì²´ ë©”ëª¨ë¦¬ ì¤‘ ì‹¤ì œ ì‚¬ìš© ì¤‘ì¸ Working Set ë¹„ìœ¨\n\n**Working Setì´ë€?**\n- í™œì„± ì‚¬ìš© ì¤‘ì¸ ë©”ëª¨ë¦¬ (Anonymous + Active File Cache)\n- OOMKiller íŒë‹¨ ê¸°ì¤€\n- RSS + Page Cache ì¤‘ ìµœê·¼ ì‚¬ìš© ë¶€ë¶„\n\n**ë©”ëª¨ë¦¬ vs CPU ì°¨ì´**:\n- **CPU**: ì‹œê°„ ë¶„í•  ê°€ëŠ¥ (Throttling)\n- **Memory**: ë¹„ì••ì¶•ì„± ìì› (OOM ë°œìƒ)\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ <75%: ì•ˆì „ - ë²„í¼ ì¶©ë¶„\n- ğŸŸ¡ 75-85%: ì£¼ì˜ - ì¦ì„¤ ê²€í† \n- ğŸ”´ >85%: ìœ„í—˜ - OOM ê°€ëŠ¥ì„±\n\n**ë†’ì€ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  ì›ì¸**:\n1. **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜**: Heap ì¦ê°€, GC ë¯¸ì‘ë™\n2. **ìºì‹œ ê³¼ë‹¤**: Redis, Memcached ë¹„ëŒ€í™”\n3. **ëŒ€ìš©ëŸ‰ ë°ì´í„°**: Spark, Trino ì²˜ë¦¬\n4. **Limits ë¶€ì¬**: ë¬´ì œí•œ ë©”ëª¨ë¦¬ ì‚¬ìš©\n5. **íŒŒì¼ ìºì‹œ**: Page Cache ì¦ê°€\n\n**OOMKilled í™•ì¸**:\n```promql\nsum(rate(\n  container_memory_failures_total{\n    failure_type=\"oom\"\n  }[5m]\n)) by (namespace, pod)\n```\n\n**ë©”ëª¨ë¦¬ êµ¬ì„±**:\n```\nì´ ë©”ëª¨ë¦¬ (machine_memory_bytes)\nâ”œâ”€ Working Set (Working Set Bytes)\nâ”‚  â”œâ”€ Anonymous (Heap, Stack)\nâ”‚  â””â”€ Active File Cache\nâ”œâ”€ Inactive File Cache\nâ””â”€ Available (ì—¬ìœ  ë©”ëª¨ë¦¬)\n```\n\n**ìš©ëŸ‰ ê³„íš**:\n- **í˜„ì¬**: 80GB ì‚¬ìš© / 128GB ì´ëŸ‰ (62.5%)\n- **ì¦ê°€ìœ¨**: ì›” 5% ì¦ê°€\n- **ì˜ˆìƒ í¬í™”**: 8ê°œì›” í›„\n- **ê¶Œì¥ ì¡°ì¹˜**: 6ê°œì›” ë‚´ ì¦ì„¤\n\n**ìµœì í™” ë°©ë²•**:\n1. **Requests/Limits ì ì •í™”**:\n```yaml\nresources:\n  requests:\n    memory: \"1Gi\"    # ì‹¤ì œ í•„ìš”ëŸ‰\n  limits:\n    memory: \"2Gi\"    # ìµœëŒ€ í—ˆìš©ëŸ‰\n```\n\n2. **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ íƒì§€**:\n```bash\n# Heap Dump ë¶„ì„\nkubectl exec <pod> -- jmap -heap 1\n\n# Go: pprof\ncurl http://pod-ip:6060/debug/pprof/heap\n```\n\n3. **GC íŠœë‹**:\n- Java: `-Xmx4g -Xms4g -XX:+UseG1GC`\n- Go: `GOGC=100` (default)\n\n4. **Swap ë¹„í™œì„±í™”**: Kubernetes Best Practice\n\n**Nodeë³„ ë©”ëª¨ë¦¬ ë¶„ì‚°**:\n```bash\n# ë©”ëª¨ë¦¬ ì‚¬ìš© Top Pod\nkubectl top pods --all-namespaces --sort-by=memory\n\n# OOMKilled Pod\nkubectl get events --field-selector reason=OOMKilling\n```\n\n**ì•Œë¦¼**:\n- Memory > 80% (10ë¶„): P3\n- Memory > 85% (5ë¶„): P2\n- OOMKilled ë°œìƒ: P1\n\n**SLO**: í‰ê·  <75%, p95 <85%",
          "gridPos": {"h": 8, "w": 6, "x": 6, "y": 5},
          "targets": [{
            "expr": "sum(container_memory_working_set_bytes{container!=\"\"}) / sum(machine_memory_bytes) * 100",
            "refId": "A"
          }],
          "options": {
            "showThresholdLabels": true,
            "showThresholdMarkers": true
          },
          "fieldConfig": {
            "defaults": {
              "unit": "percent",
              "min": 0,
              "max": 100,
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "#81C995"},
                  {"value": 75, "color": "#FFD97D"},
                  {"value": 85, "color": "#F48B8B"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "Available CPU Cores",
          "description": "**í• ë‹¹ ê°€ëŠ¥í•œ CPU ì½”ì–´ ìˆ˜**\n\n**ê³„ì‚°ì‹**:\n```promql\nsum(machine_cpu_cores) - \nsum(kube_pod_container_resource_requests{\n  resource=\"cpu\"\n})\n```\n\n**ì˜ë¯¸**: ì „ì²´ CPU ì½”ì–´ì—ì„œ ì´ë¯¸ í• ë‹¹(Requests)ëœ ì½”ì–´ë¥¼ ì œì™¸í•œ ì—¬ìœ  ì½”ì–´ ìˆ˜\n\n**CPU Requests vs Limits**:\n- **Requests**: ìŠ¤ì¼€ì¤„ëŸ¬ ë³´ì¥ëŸ‰ (ìµœì†Œ í• ë‹¹)\n- **Limits**: ìµœëŒ€ ì‚¬ìš© ê°€ëŠ¥ëŸ‰ (Throttling ê¸°ì¤€)\n\n**ìŠ¤ì¼€ì¤„ë§ ì›ë¦¬**:\n```\n1. Pod ìƒì„± ìš”ì²­\n2. Schedulerê°€ Requests ê¸°ì¤€ìœ¼ë¡œ Node ì„ íƒ\n3. Available CPU >= Pod Requests ì¸ Nodeì— í• ë‹¹\n4. ì—¬ìœ  ì—†ìœ¼ë©´ Pending ìƒíƒœ\n```\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ >10 cores: ì¶©ë¶„ - ì—¬ëŸ¬ ì›Œí¬ë¡œë“œ ë°°í¬ ê°€ëŠ¥\n- ğŸŸ¡ 5-10 cores: ì£¼ì˜ - ëŒ€í˜• ì›Œí¬ë¡œë“œ ì œí•œì \n- ğŸ”´ <5 cores: ìœ„í—˜ - ì‹ ê·œ ë°°í¬ ì–´ë ¤ì›€\n\n**ì—¬ìœ  ì—†ì„ ë•Œ ì¦ìƒ**:\n- Podê°€ Pending ìƒíƒœ\n- Insufficient CPU ì—ëŸ¬\n- ì‹ ê·œ ë°°í¬ ì‹¤íŒ¨\n- HPA Scale Out ë¶ˆê°€\n\n**ì˜¤ë²„ì»¤ë°‹(Overcommit)**:\n```\nTotal CPU: 64 cores\nRequests Total: 60 cores (93%)\nActual Usage: 40 cores (62%)\nâ†’ ì˜¤ë²„ì»¤ë°‹: 60 - 40 = 20 cores ë‚­ë¹„\n```\n\n**Requests ì ì •í™” ì „ëµ**:\n1. **ì‹¤ì œ ì‚¬ìš©ëŸ‰ ì¸¡ì •**:\n```promql\navg_over_time(\n  container_cpu_usage_seconds_total[7d]\n)\n```\n\n2. **Requests ì¡°ì •**:\n   - ì¸¡ì •ê°’ì˜ 1.2ë°° ì„¤ì •\n   - ì˜ˆ: í‰ê·  0.5 core â†’ Requests 0.6\n\n3. **VPA (Vertical Pod Autoscaler)**:\n   - ìë™ìœ¼ë¡œ Requests ì¡°ì •\n   - íˆìŠ¤í† ë¦¬ ê¸°ë°˜ ì¶”ì²œ\n\n**ìš©ëŸ‰ ì¦ì„¤ ìš°ì„ ìˆœìœ„**:\n1. **Available < 5 cores**: ê¸´ê¸‰ ì¦ì„¤\n2. **5-10 cores**: ê³„íšëœ ì¦ì„¤\n3. **>10 cores**: ëª¨ë‹ˆí„°ë§ ìœ ì§€\n\n**Node ì¶”ê°€ ì‹œ ê³ ë ¤ì‚¬í•­**:\n- Node 1ëŒ€ë‹¹ í‰ê·  16 cores\n- ì‹œìŠ¤í…œ ì˜ˆì•½: 1 core (kubelet, system)\n- ì‹¤ì œ ê°€ìš©: 15 cores\n- 4ê°œ Node ì¶”ê°€ â†’ +60 cores\n\n**ë¹„ìš© ìµœì í™”**:\n- Requests ì ì •í™”ë¡œ ì˜¤ë²„ì»¤ë°‹ ê°ì†Œ\n- ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Pod ì •ë¦¬\n- Spot Instance í™œìš©\n- Resource Quotaë¡œ íŒ€ë³„ ì œí•œ\n\n**ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ**:\n- CPU Requests vs Actual Usage\n- Overcommit Ratio\n- Per-namespace CPU Allocation\n\n**ì•Œë¦¼**: Available < 10 cores â†’ P3\n\n**ê´€ë ¨ ë©”íŠ¸ë¦­**: CPU Usage, Pending Pods",
          "gridPos": {"h": 8, "w": 6, "x": 12, "y": 5},
          "targets": [{
            "expr": "sum(machine_cpu_cores) - sum(kube_pod_container_resource_requests{resource=\"cpu\"})",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "value",
            "graphMode": "area",
            "text": {
              "titleSize": 13,
              "valueSize": 32
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "short",
              "decimals": 1,
              "color": {"mode": "fixed", "fixedColor": "#B19CD9"},
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "#F48B8B"},
                  {"value": 5, "color": "#FFD97D"},
                  {"value": 10, "color": "#B19CD9"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "Available Memory",
          "description": "**í• ë‹¹ ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ ìš©ëŸ‰**\n\n**ê³„ì‚°ì‹**:\n```promql\nsum(machine_memory_bytes) - \nsum(kube_pod_container_resource_requests{\n  resource=\"memory\"\n})\n```\n\n**ì˜ë¯¸**: ì „ì²´ ë©”ëª¨ë¦¬ì—ì„œ ì´ë¯¸ í• ë‹¹(Requests)ëœ ìš©ëŸ‰ì„ ì œì™¸í•œ ì—¬ìœ  ë©”ëª¨ë¦¬\n\n**ë‹¨ìœ„ ë³€í™˜**:\n- Bytes â†’ GB: / 1024Â³\n- ì˜ˆ: 53,687,091,200 bytes = 50 GB\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ >50 GB: ì¶©ë¶„ - ëŒ€í˜• ì›Œí¬ë¡œë“œ ê°€ëŠ¥\n- ğŸŸ¡ 20-50 GB: ì£¼ì˜ - ì¤‘ì†Œí˜•ë§Œ ê°€ëŠ¥\n- ğŸ”´ <20 GB: ìœ„í—˜ - ë°°ì¹˜ ì‘ì—… ì œí•œ\n\n**ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ ì¦ìƒ**:\n```\nEvents:\n  Warning  FailedScheduling  \n    0/4 nodes are available: \n    4 Insufficient memory.\n```\n\n**ë©”ëª¨ë¦¬ Requests ì„¤ì • ê°€ì´ë“œ**:\n\n1. **ê²½ëŸ‰ ì„œë¹„ìŠ¤** (API, Web):\n```yaml\nrequests:\n  memory: \"256Mi\"\nlimits:\n  memory: \"512Mi\"\n```\n\n2. **ì¤‘ëŸ‰ ì„œë¹„ìŠ¤** (ìºì‹œ, DB):\n```yaml\nrequests:\n  memory: \"2Gi\"\nlimits:\n  memory: \"4Gi\"\n```\n\n3. **ëŒ€ìš©ëŸ‰ ì²˜ë¦¬** (Spark, Trino):\n```yaml\nrequests:\n  memory: \"8Gi\"\nlimits:\n  memory: \"16Gi\"\n```\n\n**Requests vs Limits ë¹„ìœ¨**:\n- **ì•ˆì •ì  ì„œë¹„ìŠ¤**: Requests = Limits (Guaranteed QoS)\n- **ë²„ìŠ¤íŠ¸ í—ˆìš©**: Limits = Requests Ã— 1.5\n- **Best Effort**: Requests ë¯¸ì„¤ì • (ë¹„ê¶Œì¥)\n\n**QoS (Quality of Service) í´ë˜ìŠ¤**:\n1. **Guaranteed**: Requests = Limits\n   - ìµœìš°ì„  ë³´í˜¸\n   - OOM ì‹œ ë§ˆì§€ë§‰ì— ì¢…ë£Œ\n\n2. **Burstable**: Requests < Limits\n   - ì¤‘ê°„ ìš°ì„ ìˆœìœ„\n   - ë©”ëª¨ë¦¬ ì••ë°• ì‹œ ì¼ë¶€ ì¢…ë£Œ\n\n3. **BestEffort**: Requests/Limits ì—†ìŒ\n   - ìµœí•˜ìœ„ ìš°ì„ ìˆœìœ„\n   - ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ ë¨¼ì € ì¢…ë£Œ\n\n**ë©”ëª¨ë¦¬ ì••ë°• ì‹œë‚˜ë¦¬ì˜¤**:\n```\n1. Node ë©”ëª¨ë¦¬ 85% ë„ë‹¬\n2. kubeletì´ ë©”ëª¨ë¦¬ íšŒìˆ˜ ì‹œë„\n3. BestEffort Pod ë¨¼ì € Eviction\n4. ê·¸ë˜ë„ ë¶€ì¡±í•˜ë©´ Burstable Eviction\n5. ìµœí›„ì— Guaranteed ë³´í˜¸\n```\n\n**Huge Pages ì‚¬ìš© (ì„ íƒì )**:\n```yaml\nresources:\n  requests:\n    memory: \"2Gi\"\n    hugepages-2Mi: \"1Gi\"  # ì„±ëŠ¥ í–¥ìƒ\n```\n- DB, ë¹…ë°ì´í„°ì— ìœ ìš©\n- TLB Miss ê°ì†Œ\n- ì„±ëŠ¥ 10-30% í–¥ìƒ\n\n**ìš©ëŸ‰ ì¦ì„¤ ê³„íš**:\n```\ní˜„ì¬ Available: 50 GB\nëŒ€í˜• Spark Job Requests: 30 GB\nâ†’ ì¦ì„¤ í•„ìš”: +64 GB (Node 2ê°œ)\n```\n\n**ë¹„ìš© ìµœì í™”**:\n1. **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìˆ˜ì •**\n2. **ë¶ˆí•„ìš”í•œ ìºì‹œ ì •ë¦¬**\n3. **Batch Job ìˆœì°¨ ì‹¤í–‰**\n4. **Swap í™œì„±í™”** (ë¹„ê¶Œì¥, ì„±ëŠ¥ ì €í•˜)\n\n**ì•Œë¦¼**: Available < 30 GB â†’ P3\n\n**ê´€ë ¨ ë©”íŠ¸ë¦­**: Memory Usage, OOMKilled Events",
          "gridPos": {"h": 8, "w": 6, "x": 18, "y": 5},
          "targets": [{
            "expr": "(sum(machine_memory_bytes) - sum(kube_pod_container_resource_requests{resource=\"memory\"})) / 1024 / 1024 / 1024",
            "refId": "A"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "value",
            "graphMode": "area",
            "text": {
              "titleSize": 13,
              "valueSize": 32
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decgbytes",
              "decimals": 1,
              "color": {"mode": "fixed", "fixedColor": "#B19CD9"},
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "#F48B8B"},
                  {"value": 20, "color": "#FFD97D"},
                  {"value": 50, "color": "#B19CD9"}
                ]
              }
            }
          }
        },
        {
          "type": "row",
          "title": "Storage Capacity",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 13},
          "collapsed": false
        },
        {
          "type": "timeseries",
          "title": "PVC Usage by StorageClass",
          "description": "**StorageClassë³„ PVC ì‚¬ìš©ë¥ **\n\n**ê³„ì‚°ì‹**:\n```promql\nsum(\n  kubelet_volume_stats_used_bytes\n) by (persistentvolumeclaim, storageclass) /\nsum(\n  kubelet_volume_stats_capacity_bytes\n) by (persistentvolumeclaim, storageclass) * 100\n```\n\n**StorageClass ì¢…ë¥˜** (DataOps í™˜ê²½):\n\n1. **Longhorn** (Block Storage):\n   - Kubernetes Native ë¶„ì‚° ìŠ¤í† ë¦¬ì§€\n   - 3-way Replication\n   - ìš©ë„: DB, ìƒíƒœ ì €ì¥ ì•±\n   - ì„±ëŠ¥: ì¤‘ê°„\n\n2. **Isilon** (NFS):\n   - Dell EMC Scale-out NAS\n   - 100TB ìš©ëŸ‰\n   - ìš©ë„: ê³µìœ  íŒŒì¼, ë¡œê·¸, ë°±ì—…\n   - ì„±ëŠ¥: ë†’ìŒ (10GbE)\n\n3. **Ceph** (Object + Block):\n   - ë¶„ì‚° ìŠ¤í† ë¦¬ì§€\n   - 50TB ìš©ëŸ‰\n   - ìš©ë„: S3 Compatible, RBD\n   - ì„±ëŠ¥: ë§¤ìš° ë†’ìŒ\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ <70%: ì•ˆì „\n- ğŸŸ¡ 70-85%: ì£¼ì˜ - í™•ì¥ ê³„íš\n- ğŸ”´ >85%: ìœ„í—˜ - ì¦‰ì‹œ í™•ì¥\n\n**PVC ì‚¬ìš©ë¥  ë†’ì€ ì›ì¸**:\n1. **ë¡œê·¸ íŒŒì¼ ëˆ„ì **: ë¡œê·¸ ë¡œí…Œì´ì…˜ ë¯¸ì„¤ì •\n2. **ì„ì‹œ íŒŒì¼**: /tmp ì •ë¦¬ ì•ˆë¨\n3. **ë°ì´í„° ì¦ê°€**: DB, ìºì‹œ ì„±ì¥\n4. **ìŠ¤ëƒ…ìƒ·/ë°±ì—…**: ê³µê°„ ì ìœ \n5. **ì‚­ì œ ì•ˆëœ íŒŒì¼**: Soft Delete\n\n**PVC í™•ì¥ ë°©ë²•**:\n\n1. **ë™ì  í™•ì¥** (allowVolumeExpansion: true):\n```bash\n# PVC í¬ê¸° ìˆ˜ì •\nkubectl edit pvc my-pvc\n\nspec:\n  resources:\n    requests:\n      storage: 20Gi  # 10Gi â†’ 20Gi\n```\n\n2. **ìƒˆ PVC ìƒì„± + ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜**:\n```bash\n# 1. ìƒˆ PVC ìƒì„± (ë” í° ìš©ëŸ‰)\n# 2. Podì— ë‘ PVC ëª¨ë‘ ë§ˆìš´íŠ¸\n# 3. rsyncë¡œ ë°ì´í„° ë³µì‚¬\n# 4. ì´ì „ PVC ì‚­ì œ\n```\n\n**StorageClassë³„ íŠ¹ì„±**:\n\n| StorageClass | IOPS | Throughput | ìš©ëŸ‰ | ë¹„ìš© |\n|--------------|------|------------|------|------|\n| Longhorn     | ì¤‘ê°„ | ~500 MB/s  | ë¬´ì œí•œ | ì¤‘ê°„ |\n| Isilon       | ë†’ìŒ | ~1 GB/s    | 100TB | ë†’ìŒ |\n| Ceph         | ë§¤ìš°ë†’ìŒ | ~2 GB/s | 50TB | ë†’ìŒ |\n\n**ì‚¬ìš© ì‚¬ë¡€ë³„ ê¶Œì¥**:\n- **DB (MySQL, PostgreSQL)**: Longhorn (Block)\n- **ê³µìœ  íŒŒì¼ ì‹œìŠ¤í…œ**: Isilon (NFS, RWX)\n- **ë¡œê·¸/ë°±ì—…**: Isilon (NFS)\n- **Spark Shuffle**: Ceph (ê³ ì„±ëŠ¥ í•„ìš”)\n- **Iceberg Data Lake**: MinIO S3 (ë³„ë„)\n\n**PVC ëª¨ë‹ˆí„°ë§ Best Practice**:\n```promql\n# 90% ì´ìƒ ì‚¬ìš© ì¤‘ì¸ PVC\nkubelet_volume_stats_used_bytes / \nkubelet_volume_stats_capacity_bytes > 0.9\n```\n\n**ìë™ ì •ë¦¬ ì„¤ì •**:\n```yaml\n# CronJobìœ¼ë¡œ ë¡œê·¸ ì •ë¦¬\nschedule: \"0 2 * * *\"  # ë§¤ì¼ ìƒˆë²½ 2ì‹œ\ncommand:\n- /bin/sh\n- -c\n- find /logs -mtime +7 -delete\n```\n\n**ì•Œë¦¼**:\n- PVC > 80%: P3 (1ì¼ ì´ë‚´ í™•ì¥)\n- PVC > 90%: P2 (4ì‹œê°„ ì´ë‚´)\n- PVC > 95%: P1 (ì¦‰ì‹œ ì¡°ì¹˜)\n\n**ê´€ë ¨ ë©”íŠ¸ë¦­**: Storage IOPS, Throughput",
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 14},
          "targets": [{
            "expr": "sum(kubelet_volume_stats_used_bytes) by (persistentvolumeclaim, storageclass) / sum(kubelet_volume_stats_capacity_bytes) by (persistentvolumeclaim, storageclass) * 100",
            "refId": "A",
            "legendFormat": "{{persistentvolumeclaim}} ({{storageclass}})"
          }],
          "fieldConfig": {
            "defaults": {
              "custom": {
                "drawStyle": "line",
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "fillOpacity": 15
              },
              "unit": "percent",
              "color": {"mode": "palette-classic"},
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "#81C995"},
                  {"value": 70, "color": "#FFD97D"},
                  {"value": 85, "color": "#F48B8B"}
                ]
              }
            }
          }
        },
        {
          "type": "timeseries",
          "title": "Storage IOPS (Isilon/Ceph)",
          "description": "**ìŠ¤í† ë¦¬ì§€ ì´ˆë‹¹ I/O ì‘ì—… ìˆ˜**\n\n**ê³„ì‚°ì‹**:\n```promql\n# Isilon\nrate(isilon_node_disk_ops_total[5m])\n\n# Ceph\nrate(ceph_osd_op_r[5m]) + \nrate(ceph_osd_op_w[5m])\n```\n\n**IOPSë€?**\n- Input/Output Operations Per Second\n- ë””ìŠ¤í¬ ì½ê¸°/ì“°ê¸° ì‘ì—… ë¹ˆë„\n- ëœë¤ I/O ì„±ëŠ¥ ì§€í‘œ\n\n**IOPS vs Throughput**:\n- **IOPS**: ì‘ì—… íšŸìˆ˜ (4KB ë¸”ë¡ ê¸°ì¤€)\n- **Throughput**: ì „ì†¡ëŸ‰ (MB/s)\n- DBëŠ” IOPS ì¤‘ìš”, BatchëŠ” Throughput ì¤‘ìš”\n\n**ìŠ¤í† ë¦¬ì§€ë³„ IOPS í•œê³„**:\n\n| ìŠ¤í† ë¦¬ì§€ | ìµœëŒ€ IOPS | íŠ¹ì§• |\n|----------|-----------|------|\n| HDD (SATA) | 100-200 | ëŠë¦¼ |\n| SSD (SATA) | 10K-50K | ì¤‘ê°„ |\n| NVMe SSD | 100K-1M | ë§¤ìš° ë¹ ë¦„ |\n| Isilon | 50K | Scale-out NAS |\n| Ceph (SSD) | 100K+ | ë¶„ì‚° ìŠ¤í† ë¦¬ì§€ |\n\n**ì •ìƒ ë²”ìœ„**:\n- ğŸŸ¢ <30K IOPS: ì—¬ìœ \n- ğŸŸ¡ 30-45K IOPS: ì£¼ì˜\n- ğŸ”´ >45K IOPS: í¬í™”\n\n**ë†’ì€ IOPS ì›ì¸**:\n1. **DB ê³¼ë¶€í•˜**: SELECT ì¿¼ë¦¬ í­ì¦\n2. **ì†Œí˜• íŒŒì¼**: ë§ì€ ì‘ì€ íŒŒì¼ I/O\n3. **ëœë¤ ì½ê¸°**: ì¸ë±ìŠ¤ ìŠ¤ìº”\n4. **ë¡œê·¸ ê³¼ë‹¤**: ë¹ˆë²ˆí•œ ì“°ê¸°\n5. **ë°±ì—…/ë³µêµ¬**: ëŒ€ëŸ‰ I/O\n\n**IOPS ìµœì í™”**:\n\n1. **DB ìµœì í™”**:\n```sql\n-- ì¸ë±ìŠ¤ ì¶”ê°€ë¡œ ëœë¤ I/O ê°ì†Œ\nCREATE INDEX idx_user_id ON orders(user_id);\n\n-- ì¿¼ë¦¬ ìºì‹±\nSET query_cache_size = 268435456;  -- 256MB\n```\n\n2. **íŒŒì¼ ì‹œìŠ¤í…œ ìµœì í™”**:\n```bash\n# noatime: access time ì—…ë°ì´íŠ¸ ì•ˆí•¨\nmount -o noatime,nodiratime /dev/sda1 /mnt\n```\n\n3. **I/O Scheduler ë³€ê²½**:\n```bash\n# SSDëŠ” noop ë˜ëŠ” deadline\necho noop > /sys/block/sda/queue/scheduler\n```\n\n4. **Caching Layer ì¶”ê°€**:\n   - Redis/Memcachedë¡œ DB ë¶€í•˜ ê°ì†Œ\n   - CDNìœ¼ë¡œ ì •ì  íŒŒì¼ ìºì‹±\n   - Application Level Cache\n\n**Iceberg ì†Œí˜• íŒŒì¼ ë¬¸ì œ**:\n```\në¬¸ì œ: 10ë§Œ ê°œì˜ ì†Œí˜• íŒŒì¼ (ê° 1MB)\nâ†’ IOPS í­ì¦ (íŒŒì¼ open/close ë°˜ë³µ)\n\ní•´ê²°: Compaction\nâ†’ 100ê°œì˜ ëŒ€í˜• íŒŒì¼ (ê° 1GB)\nâ†’ IOPS ê°ì†Œ, Throughput ì¦ê°€\n```\n\n**ëª¨ë‹ˆí„°ë§ ì§€í‘œ**:\n- **Read IOPS**: ì½ê¸° ì‘ì—… ë¹ˆë„\n- **Write IOPS**: ì“°ê¸° ì‘ì—… ë¹ˆë„\n- **Latency**: í‰ê·  ì‘ë‹µ ì‹œê°„\n- **Queue Depth**: ëŒ€ê¸° ì¤‘ì¸ I/O ìˆ˜\n\n**ìŠ¤í† ë¦¬ì§€ ë³‘ëª© ê°ì§€**:\n```promql\n# I/O Wait ì‹œê°„\nrate(node_cpu_seconds_total{mode=\"iowait\"}[5m])\n\n# ë†’ìœ¼ë©´ ìŠ¤í† ë¦¬ì§€ê°€ ë³‘ëª©\n```\n\n**ì•Œë¦¼**: IOPS > 40K (5ë¶„) â†’ P2\n\n**ê´€ë ¨ ëŒ€ì‹œë³´ë“œ**: Workload Performance (Spark I/O)",
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 14},
          "targets": [
            {
              "expr": "rate(isilon_node_disk_ops_total[5m])",
              "refId": "A",
              "legendFormat": "Isilon IOPS"
            },
            {
              "expr": "rate(ceph_osd_op_r[5m]) + rate(ceph_osd_op_w[5m])",
              "refId": "B",
              "legendFormat": "Ceph IOPS"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "custom": {
                "drawStyle": "line",
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "fillOpacity": 15
              },
              "unit": "iops",
              "color": {"mode": "palette-classic"}
            },
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Isilon IOPS"},
                "properties": [{"id": "color", "value": {"fixedColor": "#7FB3E8", "mode": "fixed"}}]
              },
              {
                "matcher": {"id": "byName", "options": "Ceph IOPS"},
                "properties": [{"id": "color", "value": {"fixedColor": "#B19CD9", "mode": "fixed"}}]
              }
            ]
          }
        },
        {
          "type": "row",
          "title": "Network Capacity",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 22},
          "collapsed": false
        },
        {
          "type": "timeseries",
          "title": "Network Bandwidth (RX/TX)",
          "description": "**ë„¤íŠ¸ì›Œí¬ ìˆ˜ì‹ /ì†¡ì‹  ëŒ€ì—­í­**\n\n**ê³„ì‚°ì‹**:\n```promql\n# ìˆ˜ì‹  (Receive)\nsum(rate(\n  node_network_receive_bytes_total{\n    device!~\"lo|veth.*\"\n  }[5m]\n)) * 8 / 1000000  # Mbps\n\n# ì†¡ì‹  (Transmit)\nsum(rate(\n  node_network_transmit_bytes_total{\n    device!~\"lo|veth.*\"\n  }[5m]\n)) * 8 / 1000000\n```\n\n**ì˜ë¯¸**: ë¬¼ë¦¬ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤(eth0 ë“±)ì˜ ì´ˆë‹¹ ì „ì†¡ëŸ‰\n\n**ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤**:\n- **eth0/ens**: ë¬¼ë¦¬ NIC\n- **lo**: Loopback (127.0.0.1)\n- **veth**: ê°€ìƒ Ethernet (Pod ê°„ í†µì‹ )\n- **cni**: CNI Plugin Bridge\n\n**ë„¤íŠ¸ì›Œí¬ ìš©ëŸ‰**:\n\n| ë§í¬ íƒ€ì… | ëŒ€ì—­í­ | ì‹¤ì œ ì²˜ë¦¬ëŸ‰ |\n|-----------|--------|-------------|\n| 1GbE | 1000 Mbps | ~940 Mbps |\n| 10GbE | 10000 Mbps | ~9400 Mbps |\n| 25GbE | 25000 Mbps | ~23500 Mbps |\n\n**ì •ìƒ ë²”ìœ„** (10GbE ê¸°ì¤€):\n- ğŸŸ¢ <7000 Mbps (70%): ì—¬ìœ \n- ğŸŸ¡ 7000-8500 Mbps (85%): ì£¼ì˜\n- ğŸ”´ >8500 Mbps (85%): ë³‘ëª©\n\n**ë†’ì€ ëŒ€ì—­í­ ì‚¬ìš© ì›ì¸**:\n1. **ëŒ€ìš©ëŸ‰ ë°ì´í„° ì „ì†¡**: Spark Shuffle, Backup\n2. **ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°**: ë¯¸ë””ì–´ ì„œë¹„ìŠ¤\n3. **ë³µì œ íŠ¸ë˜í”½**: DB Replication, Ceph\n4. **DDoS ê³µê²©**: ë¹„ì •ìƒ íŠ¸ë˜í”½\n5. **P2P íŠ¸ë˜í”½**: ë¶„ì‚° íŒŒì¼ ì‹œìŠ¤í…œ\n\n**Spark Shuffle íŠ¸ë˜í”½**:\n```\nëŒ€ìš©ëŸ‰ Join ì‘ì—…\nâ†’ 100GB ë°ì´í„° Shuffle\nâ†’ 10GbE í¬í™” (10-15ë¶„)\nâ†’ Job ì§€ì—°\n```\n\n**ë„¤íŠ¸ì›Œí¬ ìµœì í™”**:\n\n1. **Pod Network Policy**:\n```yaml\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: limit-egress\nspec:\n  podSelector:\n    matchLabels:\n      app: myapp\n  policyTypes:\n  - Egress\n  egress:\n  - to:\n    - podSelector:\n        matchLabels:\n          app: database\n```\n\n2. **QoS (Quality of Service)**:\n```bash\n# tcë¥¼ ì‚¬ìš©í•œ ëŒ€ì—­í­ ì œí•œ\ntc qdisc add dev eth0 root tbf \\\n  rate 5gbit \\\n  burst 10mb \\\n  latency 50ms\n```\n\n3. **Spark Shuffle ìµœì í™”**:\n```scala\n// Partition ìˆ˜ ì¦ê°€ë¡œ Shuffle ë¶„ì‚°\ndf.repartition(200)\n\n// Broadcast Join (ì†Œí˜• í…Œì´ë¸”)\ndf1.join(broadcast(df2), \"key\")\n```\n\n4. **Compression í™œì„±í™”**:\n```properties\n# Spark Shuffle Compression\nspark.shuffle.compress=true\nspark.shuffle.spill.compress=true\n```\n\n**ë„¤íŠ¸ì›Œí¬ ë³‘ëª© ê°ì§€**:\n```promql\n# Packet Drop í™•ì¸\nrate(node_network_receive_drop_total[5m])\n\n# TX Queue ê¸¸ì´\nnode_network_transmit_queue_length\n```\n\n**CNI (Cilium) ì„±ëŠ¥**:\n- eBPF ê¸°ë°˜ìœ¼ë¡œ ì˜¤ë²„í—¤ë“œ ìµœì†Œ\n- iptables ëŒ€ë¹„ 30% ë¹ ë¦„\n- kube-proxy ëŒ€ì²´ ê°€ëŠ¥\n\n**Multi-homing (ë³¸ë”©)**:\n```bash\n# LACP ë³¸ë”©ìœ¼ë¡œ ëŒ€ì—­í­ 2ë°°\neth0 + eth1 = bond0 (20GbE)\n```\n\n**ì¸í„° í´ëŸ¬ìŠ¤í„° í†µì‹ **:\n```\nCluster-01 (Central) â†” Cluster-02/03/04 (Edge)\nâ†’ Thanos Remote Write\nâ†’ í‰ê·  100 Mbps\nâ†’ í”¼í¬ 500 Mbps (5%)\n```\n\n**ì•Œë¦¼**:\n- Bandwidth > 80%: P3\n- Packet Drop > 0.1%: P2\n\n**ê´€ë ¨ ë©”íŠ¸ë¦­**: Network Errors, Packet Loss",
          "gridPos": {"h": 8, "w": 24, "x": 0, "y": 23},
          "targets": [
            {
              "expr": "sum(rate(node_network_receive_bytes_total{device!~\"lo|veth.*\"}[5m])) * 8 / 1000000",
              "refId": "A",
              "legendFormat": "RX (Receive)"
            },
            {
              "expr": "sum(rate(node_network_transmit_bytes_total{device!~\"lo|veth.*\"}[5m])) * 8 / 1000000",
              "refId": "B",
              "legendFormat": "TX (Transmit)"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "custom": {
                "drawStyle": "line",
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "fillOpacity": 20
              },
              "unit": "Mbits",
              "color": {"mode": "palette-classic"}
            },
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "RX (Receive)"},
                "properties": [{"id": "color", "value": {"fixedColor": "#81C995", "mode": "fixed"}}]
              },
              {
                "matcher": {"id": "byName", "options": "TX (Transmit)"},
                "properties": [{"id": "color", "value": {"fixedColor": "#7FB3E8", "mode": "fixed"}}]
              }
            ]
          }
        },
        {
          "type": "row",
          "title": "Resource Allocation Details",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 31},
          "collapsed": false
        },
        {
          "type": "table",
          "title": "Top CPU Consumers (by Namespace)",
          "description": "**Namespaceë³„ CPU ì‚¬ìš©ëŸ‰ Top 10**\n\n**ì‚¬ìš© ëª©ì **:\n- ë¦¬ì†ŒìŠ¤ ì§‘ì¤‘ ì‚¬ìš© Namespace ì‹ë³„\n- ë¹„ìš© ë°°ë¶„ (Chargeback)\n- ResourceQuota ì¡°ì •\n\n**ë¶„ì„ ë°©ë²•**:\n1. í”„ë¡œë•ì…˜ Namespaceê°€ ë†’ìœ¼ë©´ ì •ìƒ\n2. ê°œë°œ Namespaceê°€ ë†’ìœ¼ë©´ ë‚­ë¹„ ê°€ëŠ¥ì„±\n3. ì‹œìŠ¤í…œ Namespace(kube-system) ë†’ìœ¼ë©´ ì¸í”„ë¼ ë¬¸ì œ\n\n**ì¡°ì¹˜**:\n- ë†’ì€ Namespace: HPA ì„¤ì • ê²€í† \n- ë‚®ì€ ì‚¬ìš©ë¥ : ë¶ˆí•„ìš”í•œ Pod ì •ë¦¬\n- ê¸‰ì¦ íŒ¨í„´: Batch Job ìŠ¤ì¼€ì¤„ ì¡°ì •",
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 32},
          "targets": [{
            "expr": "topk(10, sum(rate(container_cpu_usage_seconds_total{container!=\"\"}[5m])) by (namespace))",
            "refId": "A",
            "format": "table",
            "instant": true
          }],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {"Time": true},
                "renameByName": {
                  "namespace": "Namespace",
                  "Value": "CPU Cores"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "sortBy": [{"displayName": "CPU Cores", "desc": true}]
          },
          "fieldConfig": {
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "CPU Cores"},
                "properties": [
                  {"id": "unit", "value": "short"},
                  {"id": "decimals", "value": 2},
                  {"id": "custom.cellOptions", "value": {"type": "color-background"}},
                  {"id": "thresholds", "value": {
                    "mode": "absolute",
                    "steps": [
                      {"value": 0, "color": "rgba(129, 201, 149, 0.1)"},
                      {"value": 5, "color": "rgba(255, 217, 125, 0.2)"},
                      {"value": 10, "color": "rgba(244, 139, 139, 0.2)"}
                    ]
                  }}
                ]
              }
            ]
          }
        },
        {
          "type": "table",
          "title": "Top Memory Consumers (by Pod)",
          "description": "**Podë³„ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ Top 10**\n\n**ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ íƒì§€**:\n- Working Setì´ ì§€ì†ì ìœ¼ë¡œ ì¦ê°€í•˜ëŠ” Pod\n- Restart ì—†ì´ ë©”ëª¨ë¦¬ë§Œ ì¦ê°€\n- ë°°í¬ í›„ ì‹œê°„ ê²½ê³¼ì— ë”°ë¼ ìƒìŠ¹\n\n**ëŒ€ì‘**:\n1. Heap Dump ìˆ˜ì§‘\n2. Profiling ë„êµ¬ ì‚¬ìš©\n3. GC ë¡œê·¸ ë¶„ì„\n4. ë©”ëª¨ë¦¬ Limit ì„ì‹œ ì¦ê°€\n5. ì½”ë“œ ìˆ˜ì • ë° ì¬ë°°í¬\n\n**Spark Executor ë©”ëª¨ë¦¬**:\n- ë†’ì€ ë©”ëª¨ë¦¬ ì‚¬ìš©ì€ ì •ìƒ (ëŒ€ìš©ëŸ‰ ì²˜ë¦¬)\n- OOM ë¹ˆë°œí•˜ë©´ executor.memory ì¦ê°€",
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 32},
          "targets": [{
            "expr": "topk(10, sum(container_memory_working_set_bytes{container!=\"\"}) by (namespace, pod))",
            "refId": "A",
            "format": "table",
            "instant": true
          }],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {"Time": true},
                "renameByName": {
                  "namespace": "Namespace",
                  "pod": "Pod",
                  "Value": "Memory"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "sortBy": [{"displayName": "Memory", "desc": true}]
          },
          "fieldConfig": {
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Memory"},
                "properties": [
                  {"id": "unit", "value": "bytes"},
                  {"id": "decimals", "value": 2},
                  {"id": "custom.cellOptions", "value": {"type": "color-background"}},
                  {"id": "thresholds", "value": {
                    "mode": "absolute",
                    "steps": [
                      {"value": 0, "color": "rgba(129, 201, 149, 0.1)"},
                      {"value": 2147483648, "color": "rgba(255, 217, 125, 0.2)"},
                      {"value": 4294967296, "color": "rgba(244, 139, 139, 0.2)"}
                    ]
                  }}
                ]
              }
            ]
          }
        },
        {
          "type": "text",
          "title": "",
          "gridPos": {"h": 2, "w": 24, "x": 0, "y": 40},
          "transparent": true,
          "options": {
            "mode": "html",
            "content": "<div style='background:#1A1F2E;border-top:1px solid #374151;padding:12px;text-align:center;border-radius:0 0 8px 8px'><div style='font-size:12px;color:#6B7280'>Resource Capacity Dashboard v4.0 â€¢ Infrastructure Capacity Planning</div><div style='font-size:11px;color:#4B5563;margin-top:4px'>CPU â€¢ Memory â€¢ Storage (Isilon/Ceph/Longhorn) â€¢ Network Bandwidth</div></div>"
          }
        }
      ]
    }

apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-dataops-workload-performance-ko-v5
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  dataops-workload-performance-ko-v5.json: |
    {
      "uid": "dataops-performance-ko-v5",
      "title": "DataOps í”Œë«í¼ - ì›Œí¬ë¡œë“œ ì„±ëŠ¥",
      "tags": ["dataops", "performance", "workload", "korean", "v5", "spark"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "refresh": "30s",
      "time": {
        "from": "now-1h",
        "to": "now"
      },
      "panels": [
        {
          "title": "ğŸ“‹ ì›Œí¬ë¡œë“œ ì„±ëŠ¥ ê°œìš”",
          "type": "text",
          "gridPos": { "x": 0, "y": 0, "w": 24, "h": 3 },
          "options": {
            "mode": "markdown",
            "content": "# âš¡ DataOps ì›Œí¬ë¡œë“œ ì„±ëŠ¥ ë¶„ì„\n\n**Spark ë° Kubernetes ì›Œí¬ë¡œë“œì˜ ì„±ëŠ¥**ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.\n\n- **Spark í´ëŸ¬ìŠ¤í„°**: Worker, Application, Executor ì„±ëŠ¥\n- **Container ì„±ëŠ¥**: CPU/ë©”ëª¨ë¦¬ ì‹¤ì œ ì‚¬ìš©ëŸ‰\n- **ë„¤íŠ¸ì›Œí¬ I/O**: ë°ì´í„° ì „ì†¡ ì„±ëŠ¥\n\n---\n\n**ë¹ ë¥¸ ì´ë™**: [ğŸ  í¬í„¸](d/dataops-portal-ko-v5) | [ğŸš€ ë°°í¬](d/dataops-deployment-ko-v5) | [ğŸ’Š ì•± ìƒíƒœ](d/dataops-health-ko-v5) | [ğŸ“Š ë¦¬ì†ŒìŠ¤](d/dataops-capacity-ko-v5) | [ğŸ”„ ë°ì´í„°](d/dataops-data-ko-v5) | [ğŸ”§ ìµœì í™”](d/dataops-optimize-ko-v5)"
          }
        },
        {
          "title": "1ï¸âƒ£ Spark Workers",
          "type": "stat",
          "gridPos": { "x": 0, "y": 3, "w": 6, "h": 4 },
          "description": "**Spark í™œì„± Worker ìˆ˜**\n\nSpark í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°ëœ Worker ë…¸ë“œ ê°œìˆ˜ì…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "metrics_master_aliveWorkers_Value{namespace=\"spark\"}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#D6EAF8" }
                ]
              },
              "unit": "short"
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "2ï¸âƒ£ Spark Apps",
          "type": "stat",
          "gridPos": { "x": 6, "y": 3, "w": 6, "h": 4 },
          "description": "**ì‹¤í–‰ ì¤‘ì¸ Spark Application**\n\nSpark í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Application ê°œìˆ˜ì…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "metrics_master_apps_Value{namespace=\"spark\"}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#B8E0D2" }
                ]
              },
              "unit": "short"
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "3ï¸âƒ£ ì½”ë“œ ìƒì„± ì„±ëŠ¥ (P95)",
          "type": "stat",
          "gridPos": { "x": 12, "y": 3, "w": 6, "h": 4 },
          "description": "**Spark ì½”ë“œ ìƒì„± ì‹œê°„ (95th Percentile)**\n\nSpark SQL ì½”ë“œ ìƒì„± ì„±ëŠ¥ ì§€í‘œì…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "metrics_CodeGenerator_compilationTime_95thPercentile{namespace=\"spark\"}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#FCF3CF" }
                ]
              },
              "unit": "ms",
              "decimals": 2
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "4ï¸âƒ£ Spark ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ìƒíƒœ",
          "type": "stat",
          "gridPos": { "x": 18, "y": 3, "w": 6, "h": 4 },
          "description": "**Spark ë©”íŠ¸ë¦­ ì—”ë“œí¬ì¸íŠ¸**\n\nSpark ë©”íŠ¸ë¦­ ìˆ˜ì§‘ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "up{namespace=\"spark\"}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#FADBD8" },
                  { "value": 1, "color": "#D5F4E6" }
                ]
              },
              "unit": "short",
              "mappings": [
                { "type": "value", "value": "1", "text": "UP" },
                { "type": "value", "value": "0", "text": "DOWN" }
              ]
            }
          },
          "options": {
            "graphMode": "none",
            "colorMode": "background",
            "textMode": "value"
          }
        },
        {
          "title": "ğŸ“ˆ Spark Worker ì¶”ì´",
          "type": "timeseries",
          "gridPos": { "x": 0, "y": 7, "w": 12, "h": 8 },
          "description": "**Spark Worker ìˆ˜ ë³€í™”**\n\nSpark í´ëŸ¬ìŠ¤í„°ì˜ Worker ë…¸ë“œ ìˆ˜ë¥¼ ì‹œê°„ì— ë”°ë¼ ì¶”ì í•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "metrics_master_aliveWorkers_Value{namespace=\"spark\"}",
              "legendFormat": "Alive Workers",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 3,
                "fillOpacity": 30,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "Alive Workers" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#D6EAF8", "mode": "fixed" } }]
              }
            ]
          },
          "options": {
            "legend": {
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            }
          }
        },
        {
          "title": "ğŸ“Š Spark Application ì¶”ì´",
          "type": "timeseries",
          "gridPos": { "x": 12, "y": 7, "w": 12, "h": 8 },
          "description": "**Spark Application ìˆ˜ ë³€í™”**\n\nì‹¤í–‰ ì¤‘ì¸ Spark Application ê°œìˆ˜ë¥¼ ì‹œê°„ì— ë”°ë¼ ì¶”ì í•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "metrics_master_apps_Value{namespace=\"spark\"}",
              "legendFormat": "Running Apps",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 3,
                "fillOpacity": 30,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "Running Apps" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#B8E0D2", "mode": "fixed" } }]
              }
            ]
          },
          "options": {
            "legend": {
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            }
          }
        },
        {
          "title": "ğŸ–¥ï¸ Container CPU ì‚¬ìš©ëŸ‰ (Top 10)",
          "type": "timeseries",
          "gridPos": { "x": 0, "y": 15, "w": 12, "h": 8 },
          "description": "**CPUë¥¼ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” Container**\n\nì‹¤ì œ CPU ì‚¬ìš©ëŸ‰ ê¸°ì¤€ ìƒìœ„ 10ê°œ Containerë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "topk(10, rate(container_cpu_usage_seconds_total{container!=\"\",container!=\"POD\"}[5m]))",
              "legendFormat": "{{namespace}}/{{pod}}/{{container}}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 2,
                "fillOpacity": 10,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "percentunit"
            }
          },
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "calcs": ["lastNotNull", "max"]
            }
          }
        },
        {
          "title": "ğŸ’¾ Container ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (Top 10)",
          "type": "timeseries",
          "gridPos": { "x": 12, "y": 15, "w": 12, "h": 8 },
          "description": "**ë©”ëª¨ë¦¬ë¥¼ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” Container**\n\nì‹¤ì œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê¸°ì¤€ ìƒìœ„ 10ê°œ Containerë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "topk(10, container_memory_working_set_bytes{container!=\"\",container!=\"POD\"})",
              "legendFormat": "{{namespace}}/{{pod}}/{{container}}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 2,
                "fillOpacity": 10,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "bytes"
            }
          },
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "calcs": ["lastNotNull", "max"]
            }
          }
        },
        {
          "title": "ğŸŒ ë„¤íŠ¸ì›Œí¬ ìˆ˜ì‹  ì†ë„ (Top 10 Pods)",
          "type": "timeseries",
          "gridPos": { "x": 0, "y": 23, "w": 12, "h": 8 },
          "description": "**ë„¤íŠ¸ì›Œí¬ ìˆ˜ì‹  ì†ë„ê°€ ë†’ì€ Pod**\n\në„¤íŠ¸ì›Œí¬ Receive ì†ë„ ê¸°ì¤€ ìƒìœ„ 10ê°œ Podë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "topk(10, rate(container_network_receive_bytes_total{pod!=\"\"}[5m]))",
              "legendFormat": "{{namespace}}/{{pod}}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 2,
                "fillOpacity": 10,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "Bps"
            }
          },
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "calcs": ["lastNotNull", "max"]
            }
          }
        },
        {
          "title": "ğŸ“¡ ë„¤íŠ¸ì›Œí¬ ì „ì†¡ ì†ë„ (Top 10 Pods)",
          "type": "timeseries",
          "gridPos": { "x": 12, "y": 23, "w": 12, "h": 8 },
          "description": "**ë„¤íŠ¸ì›Œí¬ ì „ì†¡ ì†ë„ê°€ ë†’ì€ Pod**\n\në„¤íŠ¸ì›Œí¬ Transmit ì†ë„ ê¸°ì¤€ ìƒìœ„ 10ê°œ Podë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "topk(10, rate(container_network_transmit_bytes_total{pod!=\"\"}[5m]))",
              "legendFormat": "{{namespace}}/{{pod}}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 2,
                "fillOpacity": 10,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "Bps"
            }
          },
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "calcs": ["lastNotNull", "max"]
            }
          }
        },
        {
          "title": "ğŸ“¦ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ CPU ì‚¬ìš©ë¥ ",
          "type": "table",
          "gridPos": { "x": 0, "y": 31, "w": 12, "h": 8 },
          "description": "**ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ CPU ì‚¬ìš©ëŸ‰**\n\në„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ ì‹¤ì œ CPU ì‚¬ìš©ë¥ ì„ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "sum(rate(container_cpu_usage_seconds_total{container!=\"\",container!=\"POD\"}[5m])) by (namespace)",
              "format": "table",
              "instant": true,
              "refId": "A"
            }
          ],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "job": true,
                  "instance": true
                },
                "renameByName": {
                  "namespace": "Namespace",
                  "Value": "CPU Usage (Cores)"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": true,
              "reducer": ["sum"]
            }
          },
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "left"
              },
              "decimals": 3
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "CPU Usage (Cores)" },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "color-background"
                    }
                  },
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        { "value": null, "color": "#D5F4E6" },
                        { "value": 0.5, "color": "#FCF3CF" },
                        { "value": 1, "color": "#FADBD8" }
                      ]
                    }
                  }
                ]
              }
            ]
          }
        },
        {
          "title": "ğŸ§® ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰",
          "type": "table",
          "gridPos": { "x": 12, "y": 31, "w": 12, "h": 8 },
          "description": "**ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**\n\në„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ ì‹¤ì œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "sum(container_memory_working_set_bytes{container!=\"\",container!=\"POD\"}) by (namespace)",
              "format": "table",
              "instant": true,
              "refId": "A"
            }
          ],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "job": true,
                  "instance": true
                },
                "renameByName": {
                  "namespace": "Namespace",
                  "Value": "Memory Usage"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": true,
              "reducer": ["sum"]
            }
          },
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "left"
              },
              "unit": "bytes"
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "Memory Usage" },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "color-background"
                    }
                  },
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        { "value": null, "color": "#D5F4E6" },
                        { "value": 536870912, "color": "#FCF3CF" },
                        { "value": 1073741824, "color": "#FADBD8" }
                      ]
                    }
                  }
                ]
              }
            ]
          }
        }
      ]
    }

apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-dataops-portal-ko-v5
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  dataops-portal-ko-v5.json: |
    {
      "uid": "dataops-portal-ko-v5",
      "title": "DataOps í”Œë«í¼ - ì¢…í•© í¬í„¸",
      "tags": ["dataops", "portal", "korean", "v5", "spark"],
      "timezone": "Asia/Seoul",
      "schemaVersion": 39,
      "version": 1,
      "refresh": "30s",
      "editable": true,
      "style": "dark",
      "folder": "DataOps í•œêµ­ì–´",
      "folderUid": "dataops-ko-folder",
      "panels": [
        {
          "type": "text",
          "title": "",
          "gridPos": {"h": 5, "w": 24, "x": 0, "y": 0},
          "transparent": true,
          "options": {
            "mode": "html",
            "content": "<div style='background:#1A1F2E;padding:28px;border-radius:10px;border-bottom:3px solid #7FB3E8'><div style='display:flex;justify-content:space-between;align-items:center'><div style='display:flex;align-items:center;gap:20px'><div style='width:56px;height:56px;background:rgba(127,179,232,0.15);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:28px;border:2px solid rgba(127,179,232,0.3)'>ğŸ“Š</div><div><div style='font-size:26px;font-weight:700;color:#E5E7EB;letter-spacing:-0.3px'>DataOps í”Œë«í¼</div><div style='font-size:13px;color:#9CA3AF;margin-top:4px'>ì¢…í•© ê´€ì œ ì‹œìŠ¤í…œ â€¢ Apache Spark ê¸°ë°˜ ë°ì´í„° ì²˜ë¦¬ í”Œë«í¼</div></div></div><div style='display:flex;gap:20px'><div style='text-align:right'><div style='font-size:11px;color:#6B7280;text-transform:uppercase;letter-spacing:0.5px'>í”Œë«í¼ ìƒíƒœ</div><div style='margin-top:6px;padding:6px 14px;background:rgba(129,201,149,0.15);border-radius:6px;border:1px solid rgba(129,201,149,0.3)'><span style='font-size:14px;color:#81C995;font-weight:600'>â— ì •ìƒ ìš´ì˜ì¤‘</span></div></div><div style='text-align:right'><div style='font-size:11px;color:#6B7280;text-transform:uppercase;letter-spacing:0.5px'>ê°€ë™ë¥  (30ì¼)</div><div style='margin-top:6px;font-size:22px;color:#E5E7EB;font-weight:700'>99.97%</div></div></div></div></div>"
          }
        },
        {
          "type": "row",
          "title": "ğŸ¯ í•µì‹¬ ì§€í‘œ - Spark í´ëŸ¬ìŠ¤í„° í˜„í™©",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 5},
          "collapsed": false
        },
        {
          "type": "stat",
          "title": "1ï¸âƒ£ Spark í´ëŸ¬ìŠ¤í„°",
          "description": "**Apache Spark í´ëŸ¬ìŠ¤í„° ìƒíƒœ**\n\n**í˜„í™©**:\n- ì‹¤í–‰ ì¤‘ì¸ Worker ìˆ˜\n- Master ê°€ìš©ì„±\n- í´ëŸ¬ìŠ¤í„° ì¤€ë¹„ ìƒíƒœ\n\n**ì •ìƒ ê¸°ì¤€**: Worker 2ê°œ ì´ìƒ\n\n**ì¡°ì¹˜ì‚¬í•­**:\n- Worker 0ê°œ: í´ëŸ¬ìŠ¤í„° ì¬ì‹œì‘ í•„ìš”\n- Worker 1ê°œ: ì¥ì•  ë³µêµ¬ ì§„í–‰ ì¤‘\n- Worker 2ê°œ: ì •ìƒ ìš´ì˜\n\n**ê´€ë ¨ ëŒ€ì‹œë³´ë“œ**: [ì›Œí¬ë¡œë“œ ì„±ëŠ¥](/d/dataops-workload-ko-v5)",
          "gridPos": {"h": 8, "w": 6, "x": 0, "y": 6},
          "targets": [{
            "expr": "metrics_master_aliveWorkers_Value{namespace=\"spark\"}",
            "refId": "A",
            "legendFormat": "Active Workers"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "area",
            "text": {
              "titleSize": 14,
              "valueSize": 42
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "short",
              "decimals": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(244, 139, 139, 0.3)"},
                  {"value": 1, "color": "rgba(255, 217, 125, 0.3)"},
                  {"value": 2, "color": "rgba(127, 179, 232, 0.3)"}
                ]
              },
              "color": {"mode": "thresholds"}
            }
          }
        },
        {
          "type": "stat",
          "title": "2ï¸âƒ£ ì‹¤í–‰ ì¤‘ì¸ ì•±",
          "description": "**Spark ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ í˜„í™©**\n\n**ëª¨ë‹ˆí„°ë§**:\n- Masterì— ë“±ë¡ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜\n- ì‹¤í–‰ ì¤‘ì¸ Job ê°œìˆ˜\n- ì• í”Œë¦¬ì¼€ì´ì…˜ ë¦¬ì†ŒìŠ¤ í• ë‹¹\n\n**ì •ìƒ ë²”ìœ„**:\n- 0ê°œ: ëŒ€ê¸° ìƒíƒœ (ì •ìƒ)\n- 1-5ê°œ: ì¼ë°˜ ì²˜ë¦¬ëŸ‰\n- 5ê°œ ì´ìƒ: ë†’ì€ ì²˜ë¦¬ëŸ‰\n\n**ë³‘ëª© í™•ì¸**:\n- Worker ë¦¬ì†ŒìŠ¤ ë¶€ì¡±\n- Executor ë©”ëª¨ë¦¬ ì´ˆê³¼\n\n**ê´€ë ¨ ëŒ€ì‹œë³´ë“œ**: [ì›Œí¬ë¡œë“œ ì„±ëŠ¥](/d/dataops-workload-ko-v5)",
          "gridPos": {"h": 8, "w": 6, "x": 6, "y": 6},
          "targets": [{
            "expr": "metrics_master_apps_Value{namespace=\"spark\"}",
            "refId": "A",
            "legendFormat": "Running Apps"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "area",
            "text": {
              "titleSize": 14,
              "valueSize": 42
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "short",
              "decimals": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(129, 201, 149, 0.3)"},
                  {"value": 5, "color": "rgba(255, 217, 125, 0.3)"},
                  {"value": 10, "color": "rgba(244, 139, 139, 0.3)"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "3ï¸âƒ£ Pod ì•ˆì •ì„±",
          "description": "**Kubernetes Pod ì¬ì‹œì‘ íšŸìˆ˜**\n\n**ì•ˆì •ì„± ì§€í‘œ**:\n- Spark Worker Pod ì¬ì‹œì‘ í•©ê³„\n- CrashLoopBackOff ë¹ˆë„\n- ì»¨í…Œì´ë„ˆ ì¥ì•  íŒ¨í„´\n\n**ì •ìƒ ê¸°ì¤€**:\n- 0íšŒ: ì™„ë²½í•œ ì•ˆì •ì„±\n- 1-3íšŒ: ì–‘í˜¸ (ì¼ì‹œì  ì¬ì‹œì‘)\n- 3íšŒ ì´ìƒ: ë¬¸ì œ ì¡°ì‚¬ í•„ìš”\n\n**ì›ì¸ ë¶„ì„**:\n- OOMKilled: ë©”ëª¨ë¦¬ ë¶€ì¡±\n- Error: ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ë¥˜\n- Evicted: ë…¸ë“œ ë¦¬ì†ŒìŠ¤ ë¶€ì¡±\n\n**ê´€ë ¨ ëŒ€ì‹œë³´ë“œ**: [ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ](/d/dataops-health-ko-v5)",
          "gridPos": {"h": 8, "w": 6, "x": 12, "y": 6},
          "targets": [{
            "expr": "sum(kube_pod_container_status_restarts_total{namespace=\"spark\", pod=~\"spark-worker.*\"})",
            "refId": "A",
            "legendFormat": "Total Restarts"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "area",
            "text": {
              "titleSize": 14,
              "valueSize": 42
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "short",
              "decimals": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(129, 201, 149, 0.3)"},
                  {"value": 3, "color": "rgba(255, 217, 125, 0.3)"},
                  {"value": 10, "color": "rgba(244, 139, 139, 0.3)"}
                ]
              }
            }
          }
        },
        {
          "type": "stat",
          "title": "4ï¸âƒ£ ì½”ë“œ ìƒì„± ì„±ëŠ¥",
          "description": "**Spark ë™ì  ì½”ë“œ ìƒì„± ì„±ëŠ¥ (P95)**\n\n**ì„±ëŠ¥ ì§€í‘œ**:\n- CodeGenerator ì»´íŒŒì¼ ì‹œê°„ 95ë²ˆì§¸ ë°±ë¶„ìœ„\n- JVM ì½”ë“œ ìƒì„± íš¨ìœ¨ì„±\n- Catalyst ìµœì í™” ì„±ëŠ¥\n\n**ì •ìƒ ë²”ìœ„**:\n- 0-100ms: ìš°ìˆ˜\n- 100-500ms: ì–‘í˜¸\n- 500ms ì´ìƒ: ìµœì í™” í•„ìš”\n\n**ê°œì„  ë°©ì•ˆ**:\n- Broadcast Join í™œìš©\n- Partition ìˆ˜ ì¡°ì •\n- Cache ì „ëµ ê°œì„ \n\n**ê´€ë ¨ ëŒ€ì‹œë³´ë“œ**: [ì›Œí¬ë¡œë“œ ì„±ëŠ¥](/d/dataops-workload-ko-v5)",
          "gridPos": {"h": 8, "w": 6, "x": 18, "y": 6},
          "targets": [{
            "expr": "metrics_CodeGenerator_compilationTime_95thPercentile{namespace=\"spark\"}",
            "refId": "A",
            "legendFormat": "P95 Compile Time"
          }],
          "options": {
            "textMode": "value_and_name",
            "colorMode": "background",
            "graphMode": "area",
            "text": {
              "titleSize": 14,
              "valueSize": 42
            }
          },
          "fieldConfig": {
            "defaults": {
              "unit": "ms",
              "decimals": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"value": 0, "color": "rgba(129, 201, 149, 0.3)"},
                  {"value": 100, "color": "rgba(255, 217, 125, 0.3)"},
                  {"value": 500, "color": "rgba(244, 139, 139, 0.3)"}
                ]
              }
            }
          }
        },
        {
          "type": "row",
          "title": "ğŸ“ˆ ë¦¬ì†ŒìŠ¤ ì‚¬ìš© í˜„í™©",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 14},
          "collapsed": false
        },
        {
          "type": "timeseries",
          "title": "Spark Worker CPU ì‚¬ìš©ë¥ ",
          "description": "**Spark Workerë³„ CPU ì‚¬ìš©ë¥  ì¶”ì´**\n\n**ë©”íŠ¸ë¦­**: Container CPU ì‚¬ìš©ëŸ‰ (ì´ˆë‹¹ ì½”ì–´ ìˆ˜)\n\n**ë¶„ì„**:\n- ê³ ë¥´ê²Œ ë¶„ì‚°: Worker ë¶€í•˜ ê· í˜• ì–‘í˜¸\n- íŠ¹ì • Worker ë†’ìŒ: ë°ì´í„° ìŠ¤í ê°€ëŠ¥ì„±\n- ì „ì²´ ë‚®ìŒ: ì²˜ë¦¬ëŸ‰ ë¶€ì¡± ë˜ëŠ” ëŒ€ê¸° ìƒíƒœ",
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 15},
          "targets": [{
            "expr": "rate(container_cpu_usage_seconds_total{namespace=\"spark\", pod=~\"spark-worker.*\"}[5m])",
            "refId": "A",
            "legendFormat": "{{pod}}"
          }],
          "fieldConfig": {
            "defaults": {
              "unit": "short",
              "decimals": 2,
              "custom": {
                "drawStyle": "line",
                "lineInterpolation": "smooth",
                "fillOpacity": 15,
                "stacking": {"mode": "none"}
              },
              "color": {"mode": "palette-classic"}
            }
          }
        },
        {
          "type": "timeseries",
          "title": "Spark ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰",
          "description": "**Spark ì»¨í…Œì´ë„ˆë³„ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**\n\n**ë©”íŠ¸ë¦­**: Working Set Memory (MB)\n\n**ì„ê³„ê°’**:\n- 500MB ì´í•˜: ì •ìƒ\n- 500-800MB: ì£¼ì˜\n- 800MB ì´ìƒ: ë©”ëª¨ë¦¬ ì¦ì„¤ ê²€í† ",
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 15},
          "targets": [{
            "expr": "container_memory_working_set_bytes{namespace=\"spark\"} / 1024 / 1024",
            "refId": "A",
            "legendFormat": "{{pod}} - {{container}}"
          }],
          "fieldConfig": {
            "defaults": {
              "unit": "decmbytes",
              "decimals": 0,
              "custom": {
                "drawStyle": "line",
                "lineInterpolation": "smooth",
                "fillOpacity": 20,
                "stacking": {"mode": "none"}
              },
              "color": {"mode": "palette-classic"}
            }
          }
        },
        {
          "type": "row",
          "title": "ğŸ”— ë¹ ë¥¸ ì´ë™",
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 23},
          "collapsed": false
        },
        {
          "type": "text",
          "title": "",
          "gridPos": {"h": 4, "w": 24, "x": 0, "y": 24},
          "transparent": true,
          "options": {
            "mode": "html",
            "content": "<div style='display:grid;grid-template-columns:repeat(6,1fr);gap:16px;padding:16px'><a href='/d/dataops-deployment-ko-v5' style='text-decoration:none;background:rgba(127,179,232,0.1);border:1px solid rgba(127,179,232,0.3);border-radius:8px;padding:16px;text-align:center;transition:all 0.2s'><div style='font-size:24px;margin-bottom:8px'>ğŸš€</div><div style='font-size:14px;font-weight:600;color:#7FB3E8'>ë°°í¬ íŒŒì´í”„ë¼ì¸</div><div style='font-size:11px;color:#9CA3AF;margin-top:4px'>CI/CD í˜„í™©</div></a><a href='/d/dataops-health-ko-v5' style='text-decoration:none;background:rgba(129,201,149,0.1);border:1px solid rgba(129,201,149,0.3);border-radius:8px;padding:16px;text-align:center;transition:all 0.2s'><div style='font-size:24px;margin-bottom:8px'>ğŸ’š</div><div style='font-size:14px;font-weight:600;color:#81C995'>ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ</div><div style='font-size:11px;color:#9CA3AF;margin-top:4px'>Health Check</div></a><a href='/d/dataops-resource-ko-v5' style='text-decoration:none;background:rgba(177,156,217,0.1);border:1px solid rgba(177,156,217,0.3);border-radius:8px;padding:16px;text-align:center;transition:all 0.2s'><div style='font-size:24px;margin-bottom:8px'>ğŸ“¦</div><div style='font-size:14px;font-weight:600;color:#B19CD9'>ë¦¬ì†ŒìŠ¤ ìš©ëŸ‰</div><div style='font-size:11px;color:#9CA3AF;margin-top:4px'>Capacity</div></a><a href='/d/dataops-workload-ko-v5' style='text-decoration:none;background:rgba(255,217,125,0.1);border:1px solid rgba(255,217,125,0.3);border-radius:8px;padding:16px;text-align:center;transition:all 0.2s'><div style='font-size:24px;margin-bottom:8px'>âš¡</div><div style='font-size:14px;font-weight:600;color:#FFD97D'>ì›Œí¬ë¡œë“œ ì„±ëŠ¥</div><div style='font-size:11px;color:#9CA3AF;margin-top:4px'>Performance</div></a><a href='/d/dataops-data-pipeline-ko-v5' style='text-decoration:none;background:rgba(111,184,184,0.1);border:1px solid rgba(111,184,184,0.3);border-radius:8px;padding:16px;text-align:center;transition:all 0.2s'><div style='font-size:24px;margin-bottom:8px'>ğŸŒŠ</div><div style='font-size:14px;font-weight:600;color:#6FB8B8'>ë°ì´í„° íŒŒì´í”„ë¼ì¸</div><div style='font-size:11px;color:#9CA3AF;margin-top:4px'>Pipeline</div></a><a href='/d/dataops-optimization-ko-v5' style='text-decoration:none;background:rgba(244,139,139,0.1);border:1px solid rgba(244,139,139,0.3);border-radius:8px;padding:16px;text-align:center;transition:all 0.2s'><div style='font-size:24px;margin-bottom:8px'>ğŸ”§</div><div style='font-size:14px;font-weight:600;color:#F48B8B'>ìµœì í™”</div><div style='font-size:11px;color:#9CA3AF;margin-top:4px'>Troubleshooting</div></a></div>"
          }
        }
      ]
    }

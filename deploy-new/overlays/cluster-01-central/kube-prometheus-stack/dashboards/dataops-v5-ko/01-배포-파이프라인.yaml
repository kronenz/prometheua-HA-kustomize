apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-dataops-deployment-pipeline-ko-v5
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  dataops-deployment-pipeline-ko-v5.json: |
    {
      "uid": "dataops-deployment-ko-v5",
      "title": "DataOps í”Œëž«í¼ - ë°°í¬ íŒŒì´í”„ë¼ì¸",
      "tags": ["dataops", "deployment", "pipeline", "korean", "v5", "kubernetes"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "refresh": "30s",
      "time": {
        "from": "now-1h",
        "to": "now"
      },
      "panels": [
        {
          "title": "ðŸ“‹ ë°°í¬ íŒŒì´í”„ë¼ì¸ ê°œìš”",
          "type": "text",
          "gridPos": { "x": 0, "y": 0, "w": 24, "h": 3 },
          "options": {
            "mode": "markdown",
            "content": "# ðŸš€ DataOps ë°°í¬ íŒŒì´í”„ë¼ì¸\n\n**Kubernetes ì›Œí¬ë¡œë“œ ë°°í¬ í˜„í™©**ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.\n\n- **Pod ìƒëª…ì£¼ê¸°**: ìƒì„±, ì‹¤í–‰, ì¢…ë£Œ ì¶”ì \n- **ë°°í¬ ì•ˆì •ì„±**: ìž¬ì‹œìž‘ ë° ì‹¤íŒ¨ íŒ¨í„´ ë¶„ì„\n- **ë¦¬ì†ŒìŠ¤ ìƒíƒœ**: Deployment, StatefulSet ê±´ê°•ë„\n\n---\n\n**ë¹ ë¥¸ ì´ë™**: [ðŸ  í¬í„¸](d/dataops-portal-ko-v5) | [ðŸ’Š ì•± ìƒíƒœ](d/dataops-health-ko-v5) | [ðŸ“Š ë¦¬ì†ŒìŠ¤](d/dataops-capacity-ko-v5) | [âš¡ ì„±ëŠ¥](d/dataops-performance-ko-v5) | [ðŸ”„ ë°ì´í„°](d/dataops-data-ko-v5) | [ðŸ”§ ìµœì í™”](d/dataops-optimize-ko-v5)"
          }
        },
        {
          "title": "1ï¸âƒ£ ì´ Pod ìˆ˜",
          "type": "stat",
          "gridPos": { "x": 0, "y": 3, "w": 6, "h": 4 },
          "description": "**ì „ì²´ í´ëŸ¬ìŠ¤í„°ì˜ Pod ìˆ˜**\n\nëª¨ë“  ë„¤ìž„ìŠ¤íŽ˜ì´ìŠ¤ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Podì˜ ì´ ê°œìˆ˜ìž…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_pod_info)",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#B8E0D2" },
                  { "value": 50, "color": "#D6EAF8" },
                  { "value": 100, "color": "#FADBD8" }
                ]
              },
              "unit": "short"
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "2ï¸âƒ£ Running Pods",
          "type": "stat",
          "gridPos": { "x": 6, "y": 3, "w": 6, "h": 4 },
          "description": "**ì •ìƒ ì‹¤í–‰ ì¤‘ì¸ Pod**\n\nRunning ìƒíƒœì˜ Pod ê°œìˆ˜ìž…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_pod_status_phase{phase=\"Running\"})",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#FADBD8" },
                  { "value": 10, "color": "#FCF3CF" },
                  { "value": 30, "color": "#D5F4E6" }
                ]
              },
              "unit": "short"
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "3ï¸âƒ£ Pending Pods",
          "type": "stat",
          "gridPos": { "x": 12, "y": 3, "w": 6, "h": 4 },
          "description": "**ëŒ€ê¸° ì¤‘ì¸ Pod**\n\nPending ìƒíƒœì˜ Pod ê°œìˆ˜ìž…ë‹ˆë‹¤. ë†’ìœ¼ë©´ ë¦¬ì†ŒìŠ¤ ë¶€ì¡±ì„ ì˜ë¯¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_pod_status_phase{phase=\"Pending\"}) or vector(0)",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#D5F4E6" },
                  { "value": 1, "color": "#FCF3CF" },
                  { "value": 5, "color": "#FADBD8" }
                ]
              },
              "unit": "short"
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "4ï¸âƒ£ Failed Pods",
          "type": "stat",
          "gridPos": { "x": 18, "y": 3, "w": 6, "h": 4 },
          "description": "**ì‹¤íŒ¨í•œ Pod**\n\nFailed ìƒíƒœì˜ Pod ê°œìˆ˜ìž…ë‹ˆë‹¤. ë°°í¬ ë¬¸ì œë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_pod_status_phase{phase=\"Failed\"}) or vector(0)",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "value": null, "color": "#D5F4E6" },
                  { "value": 1, "color": "#FCF3CF" },
                  { "value": 3, "color": "#FADBD8" }
                ]
              },
              "unit": "short"
            }
          },
          "options": {
            "graphMode": "area",
            "colorMode": "background",
            "textMode": "value_and_name"
          }
        },
        {
          "title": "ðŸ“ˆ Pod ìƒëª…ì£¼ê¸° ì¶”ì´",
          "type": "timeseries",
          "gridPos": { "x": 0, "y": 7, "w": 12, "h": 8 },
          "description": "**Pod ìƒíƒœë³„ ê°œìˆ˜ ì¶”ì´**\n\nRunning, Pending, Failed, Succeeded ìƒíƒœì˜ Pod ê°œìˆ˜ë¥¼ ì‹œê°„ì— ë”°ë¼ ì¶”ì í•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "count(kube_pod_status_phase{phase=\"Running\"}) or vector(0)",
              "legendFormat": "Running",
              "refId": "A"
            },
            {
              "expr": "count(kube_pod_status_phase{phase=\"Pending\"}) or vector(0)",
              "legendFormat": "Pending",
              "refId": "B"
            },
            {
              "expr": "count(kube_pod_status_phase{phase=\"Failed\"}) or vector(0)",
              "legendFormat": "Failed",
              "refId": "C"
            },
            {
              "expr": "count(kube_pod_status_phase{phase=\"Succeeded\"}) or vector(0)",
              "legendFormat": "Succeeded",
              "refId": "D"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 2,
                "fillOpacity": 20,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "Running" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#D5F4E6", "mode": "fixed" } }]
              },
              {
                "matcher": { "id": "byName", "options": "Pending" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#FCF3CF", "mode": "fixed" } }]
              },
              {
                "matcher": { "id": "byName", "options": "Failed" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#FADBD8", "mode": "fixed" } }]
              },
              {
                "matcher": { "id": "byName", "options": "Succeeded" },
                "properties": [{ "id": "color", "value": { "fixedColor": "#E8DAEF", "mode": "fixed" } }]
              }
            ]
          },
          "options": {
            "legend": {
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            }
          }
        },
        {
          "title": "ðŸ”„ Container ìž¬ì‹œìž‘ ì¶”ì´",
          "type": "timeseries",
          "gridPos": { "x": 12, "y": 7, "w": 12, "h": 8 },
          "description": "**Container ìž¬ì‹œìž‘ íšŸìˆ˜**\n\nê° Containerì˜ ìž¬ì‹œìž‘ íšŸìˆ˜ë¥¼ ì¶”ì í•©ë‹ˆë‹¤. ë†’ì€ ìž¬ì‹œìž‘ ë¹ˆë„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë¶ˆì•ˆì •ì„±ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "topk(10, rate(kube_pod_container_status_restarts_total[5m]) > 0)",
              "legendFormat": "{{namespace}}/{{pod}}/{{container}}",
              "refId": "A"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "lineWidth": 2,
                "fillOpacity": 10,
                "pointSize": 5,
                "spanNulls": true
              },
              "unit": "reqps"
            }
          },
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "calcs": ["lastNotNull", "max"]
            }
          }
        },
        {
          "title": "ðŸ“¦ Deployment ìƒíƒœ",
          "type": "table",
          "gridPos": { "x": 0, "y": 15, "w": 12, "h": 8 },
          "description": "**Deployment ë¦¬ì†ŒìŠ¤ ìƒíƒœ**\n\nê° Deploymentì˜ desired, available, unavailable replica ìˆ˜ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "kube_deployment_status_replicas",
              "format": "table",
              "instant": true,
              "refId": "A"
            },
            {
              "expr": "kube_deployment_status_replicas_available",
              "format": "table",
              "instant": true,
              "refId": "B"
            },
            {
              "expr": "kube_deployment_status_replicas_unavailable",
              "format": "table",
              "instant": true,
              "refId": "C"
            }
          ],
          "transformations": [
            {
              "id": "merge",
              "options": {}
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "job": true,
                  "instance": true
                },
                "renameByName": {
                  "namespace": "Namespace",
                  "deployment": "Deployment",
                  "Value #A": "Desired",
                  "Value #B": "Available",
                  "Value #C": "Unavailable"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            }
          },
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "left"
              }
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "Unavailable" },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "color-background"
                    }
                  },
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        { "value": null, "color": "#D5F4E6" },
                        { "value": 1, "color": "#FADBD8" }
                      ]
                    }
                  }
                ]
              }
            ]
          }
        },
        {
          "title": "ðŸ—‚ï¸ StatefulSet ìƒíƒœ",
          "type": "table",
          "gridPos": { "x": 12, "y": 15, "w": 12, "h": 8 },
          "description": "**StatefulSet ë¦¬ì†ŒìŠ¤ ìƒíƒœ**\n\nê° StatefulSetì˜ desired, ready replica ìˆ˜ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "kube_statefulset_replicas",
              "format": "table",
              "instant": true,
              "refId": "A"
            },
            {
              "expr": "kube_statefulset_status_replicas_ready",
              "format": "table",
              "instant": true,
              "refId": "B"
            }
          ],
          "transformations": [
            {
              "id": "merge",
              "options": {}
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "job": true,
                  "instance": true
                },
                "renameByName": {
                  "namespace": "Namespace",
                  "statefulset": "StatefulSet",
                  "Value #A": "Desired",
                  "Value #B": "Ready"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            }
          },
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "left"
              }
            }
          }
        },
        {
          "title": "âš ï¸ ìµœê·¼ ìž¬ì‹œìž‘ëœ Container (Top 10)",
          "type": "table",
          "gridPos": { "x": 0, "y": 23, "w": 24, "h": 8 },
          "description": "**ìž¬ì‹œìž‘ì´ ê°€ìž¥ ë§Žì€ Container**\n\nìµœê·¼ 5ë¶„ê°„ ìž¬ì‹œìž‘ ë¹ˆë„ê°€ ë†’ì€ ìƒìœ„ 10ê°œ Containerë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
          "targets": [
            {
              "expr": "topk(10, kube_pod_container_status_restarts_total > 0)",
              "format": "table",
              "instant": true,
              "refId": "A"
            }
          ],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Time": true,
                  "job": true,
                  "instance": true,
                  "uid": true,
                  "id": true,
                  "image": true,
                  "image_id": true,
                  "image_spec": true
                },
                "renameByName": {
                  "namespace": "Namespace",
                  "pod": "Pod",
                  "container": "Container",
                  "Value": "Restarts"
                }
              }
            }
          ],
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            }
          },
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "left"
              }
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "Restarts" },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "color-background"
                    }
                  },
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        { "value": null, "color": "#D5F4E6" },
                        { "value": 5, "color": "#FCF3CF" },
                        { "value": 10, "color": "#FADBD8" }
                      ]
                    }
                  }
                ]
              }
            ]
          }
        }
      ]
    }

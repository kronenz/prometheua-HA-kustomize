# ë©€í‹°í…Œë„Œì‹œ ì•„í‚¤í…ì²˜

## ğŸ“‹ ê°œìš”

**ê°€ í´ëŸ¬ìŠ¤í„° (cluster-02, 192.168.101.196)**ì—ì„œ ë…¸ë“œë¥¼ ë°˜ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë‘ ê°œì˜ í…Œë„ŒíŠ¸ë¥¼ ê²©ë¦¬í•˜ëŠ” ë©€í‹°í…Œë„Œì‹œ ì•„í‚¤í…ì²˜ì˜ ì„¤ê³„ ì›ì¹™ê³¼ êµ¬í˜„ ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## ğŸ¯ ë©€í‹°í…Œë„Œì‹œ ëª©í‘œ

| ëª©í‘œ | ì„¤ëª… | ë‹¬ì„± ë°©ë²• |
|-----|------|----------|
| **ë¦¬ì†ŒìŠ¤ ê²©ë¦¬** | í…Œë„ŒíŠ¸ Aì™€ Bê°€ ì„œë¡œì˜ ë¦¬ì†ŒìŠ¤ì— ì˜í–¥ ì—†ìŒ | Node Label + Affinity |
| **ë©”íŠ¸ë¦­ ë¶„ë¦¬** | í…Œë„ŒíŠ¸ë³„ ë©”íŠ¸ë¦­ ë…ë¦½ ìˆ˜ì§‘ | Prometheus Agent ë¶„ë¦¬ |
| **ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬** | Pod ê°„ í†µì‹  ì°¨ë‹¨ | NetworkPolicy |
| **ì¿¼ë¦¬ ë¶„ë¦¬** | Grafanaì—ì„œ í…Œë„ŒíŠ¸ë³„ ëŒ€ì‹œë³´ë“œ | Label í•„í„°ë§ |

---

## ğŸ—ï¸ C4 Deployment Diagram (ë©€í‹°í…Œë„Œì‹œ)

```mermaid
C4Deployment
    title Deployment Diagram - Multi-Tenancy on Cluster-02 (Node-Level Isolation)

    Deployment_Node(cluster02, "Kubernetes Cluster-02", "Edge Multi-Tenant - 192.168.101.196") {
        Deployment_Node(tenant_a_infra, "Tenant A Infrastructure", "50% ë…¸ë“œ") {
            Deployment_Node(node_a1, "Node-1", "label: tenant=tenant-a") {
                Container(pod_a1, "App Pod A-1", "Workload", "NodeAffinity: tenant-a")
                Container(exporter_a1, "Node Exporter", "Metrics", ":9100")
            }
            Deployment_Node(node_a2, "Node-2", "label: tenant=tenant-a") {
                Container(pod_a2, "App Pod A-2", "Workload", "NodeAffinity: tenant-a")
                Container(exporter_a2, "Node Exporter", "Metrics", ":9100")
            }
        }

        Deployment_Node(tenant_b_infra, "Tenant B Infrastructure", "50% ë…¸ë“œ") {
            Deployment_Node(node_b1, "Node-3", "label: tenant=tenant-b") {
                Container(pod_b1, "App Pod B-1", "Workload", "NodeAffinity: tenant-b")
                Container(exporter_b1, "Node Exporter", "Metrics", ":9100")
            }
            Deployment_Node(node_b2, "Node-4", "label: tenant=tenant-b") {
                Container(pod_b2, "App Pod B-2", "Workload", "NodeAffinity: tenant-b")
                Container(exporter_b2, "Node Exporter", "Metrics", ":9100")
            }
        }

        Deployment_Node(monitoring, "Monitoring Namespace", "Shared Control Plane") {
            Container(agent_a, "Prometheus Agent A", "Agent Mode", "Namespace: monitoring-tenant-a<br/>Scrapes: tenant=tenant-a")
            Container(agent_b, "Prometheus Agent B", "Agent Mode", "Namespace: monitoring-tenant-b<br/>Scrapes: tenant=tenant-b")
        }
    }

    Deployment_Node(cluster01, "Kubernetes Cluster-01", "Central - 192.168.101.194") {
        ContainerDb(receiver, "Thanos Receiver", "Hashring", "Receives from all tenants")
        Container(query, "Thanos Query", "Query Engine", "Deduplication")
        Container(grafana, "Grafana", "Dashboard", "Tenant-aware Dashboards")
    }

    Rel(exporter_a1, agent_a, "Scrape", ":9100")
    Rel(exporter_a2, agent_a, "Scrape", ":9100")
    Rel(pod_a1, agent_a, "Metrics", "/metrics")
    Rel(pod_a2, agent_a, "Metrics", "/metrics")

    Rel(exporter_b1, agent_b, "Scrape", ":9100")
    Rel(exporter_b2, agent_b, "Scrape", ":9100")
    Rel(pod_b1, agent_b, "Metrics", "/metrics")
    Rel(pod_b2, agent_b, "Metrics", "/metrics")

    Rel(agent_a, receiver, "Remote Write", "HTTPS<br/>Header: X-Scope-OrgID=tenant-a")
    Rel(agent_b, receiver, "Remote Write", "HTTPS<br/>Header: X-Scope-OrgID=tenant-b")

    Rel(receiver, query, "StoreAPI", "gRPC")
    Rel(grafana, query, "PromQL", "Filter: tenant_id label")

    UpdateLayoutConfig($c4ShapeInRow="2", $c4BoundaryInRow="1")
```

---

## ğŸ—ï¸ C4 Component Diagram (ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬)

```mermaid
C4Component
    title Component Diagram - Network Isolation (NetworkPolicy)

    Container_Boundary(tenant_a, "Tenant A Namespace") {
        Component(pod_a1, "App Pod A-1", "Container", "10.244.1.10")
        Component(pod_a2, "App Pod A-2", "Container", "10.244.1.20")
        Component(svc_a, "Service A", "ClusterIP", "10.96.1.100")
    }

    Container_Boundary(tenant_b, "Tenant B Namespace") {
        Component(pod_b1, "App Pod B-1", "Container", "10.244.2.10")
        Component(pod_b2, "App Pod B-2", "Container", "10.244.2.20")
        Component(svc_b, "Service B", "ClusterIP", "10.96.2.100")
    }

    Container_Boundary(monitoring, "Monitoring Namespace") {
        Component(agent_a, "Agent A", "Prometheus", "Can scrape Tenant A")
        Component(agent_b, "Agent B", "Prometheus", "Can scrape Tenant B")
    }

    System_Ext(internet, "External", "Internet")

    Rel(pod_a1, svc_a, "Allowed", "Same namespace")
    Rel(pod_a2, svc_a, "Allowed", "Same namespace")
    Rel(pod_b1, svc_b, "Allowed", "Same namespace")
    Rel(pod_b2, svc_b, "Allowed", "Same namespace")

    Rel(agent_a, pod_a1, "Allowed", "NetworkPolicy:<br/>monitoring â†’ tenant-a")
    Rel(agent_a, pod_a2, "Allowed", "NetworkPolicy")
    Rel(agent_b, pod_b1, "Allowed", "NetworkPolicy:<br/>monitoring â†’ tenant-b")
    Rel(agent_b, pod_b2, "Allowed", "NetworkPolicy")

    Rel_Back(pod_a1, pod_b1, "âŒ DENIED", "Cross-tenant blocked")
    Rel_Back(pod_a1, internet, "Allowed", "Egress Policy")
    Rel_Back(pod_b1, internet, "Allowed", "Egress Policy")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")
```

---

## ğŸ—ï¸ ê¸°ì¡´ ë©€í‹°í…Œë„Œì‹œ í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨

```mermaid
graph TB
    subgraph "ê°€ í´ëŸ¬ìŠ¤í„° (cluster-02) - 192.168.101.196"
        subgraph "Tenant A Nodes"
            NA1[Node-1<br/>label: tenant=a<br/>taint: tenant=a:NoSchedule]
            NA2[Node-2<br/>label: tenant=a<br/>taint: tenant=a:NoSchedule]

            PA_POD1[Pod A-1<br/>tolerations: tenant=a]
            PA_POD2[Pod A-2<br/>tolerations: tenant=a]

            NA1 --> PA_POD1
            NA2 --> PA_POD2
        end

        subgraph "Tenant B Nodes"
            NB1[Node-3<br/>label: tenant=b<br/>taint: tenant=b:NoSchedule]
            NB2[Node-4<br/>label: tenant=b<br/>taint: tenant=b:NoSchedule]

            PB_POD1[Pod B-1<br/>tolerations: tenant=b]
            PB_POD2[Pod B-2<br/>tolerations: tenant=b]

            NB1 --> PB_POD1
            NB2 --> PB_POD2
        end

        subgraph "Monitoring (Shared)"
            PA[Prometheus Agent A<br/>scrape tenant=a]
            PB[Prometheus Agent B<br/>scrape tenant=b]

            PA_POD1 --> PA
            PA_POD2 --> PA
            PB_POD1 --> PB
            PB_POD2 --> PB
        end
    end

    subgraph "ì¤‘ì•™ í´ëŸ¬ìŠ¤í„° (cluster-01)"
        RECEIVER[Thanos Receiver]
        QUERY[Thanos Query]
        GRAFANA[Grafana]
    end

    PA -->|Remote Write<br/>tenant_id=a| RECEIVER
    PB -->|Remote Write<br/>tenant_id=b| RECEIVER

    RECEIVER --> QUERY
    QUERY --> GRAFANA

    GRAFANA --> DASH_A[Dashboard A<br/>filter: tenant_id=a]
    GRAFANA --> DASH_B[Dashboard B<br/>filter: tenant_id=b]

    style NA1 fill:#e1f5fe
    style NA2 fill:#e1f5fe
    style NB1 fill:#fff3e0
    style NB2 fill:#fff3e0
    style PA fill:#4fc3f7
    style PB fill:#ff9800
```

---

## 1ï¸âƒ£ ë…¸ë“œ ë ˆì´ë¸” ë° Taints

### ë…¸ë“œ ë¼ë²¨ë§

```bash
# Tenant A ë…¸ë“œ
kubectl label nodes cluster-02-node-1 tenant=a
kubectl label nodes cluster-02-node-2 tenant=a

# Tenant B ë…¸ë“œ
kubectl label nodes cluster-02-node-3 tenant=b
kubectl label nodes cluster-02-node-4 tenant=b
```

### ë…¸ë“œ Taints

```bash
# Tenant A ë…¸ë“œ (Tenant A Podë§Œ ìŠ¤ì¼€ì¤„ë§ ê°€ëŠ¥)
kubectl taint nodes cluster-02-node-1 tenant=a:NoSchedule
kubectl taint nodes cluster-02-node-2 tenant=a:NoSchedule

# Tenant B ë…¸ë“œ (Tenant B Podë§Œ ìŠ¤ì¼€ì¤„ë§ ê°€ëŠ¥)
kubectl taint nodes cluster-02-node-3 tenant=b:NoSchedule
kubectl taint nodes cluster-02-node-4 tenant=b:NoSchedule
```

### ê²€ì¦

```bash
# ë…¸ë“œ í™•ì¸
kubectl get nodes -L tenant

# ì¶œë ¥ ì˜ˆì‹œ
NAME                TENANT
cluster-02-node-1   a
cluster-02-node-2   a
cluster-02-node-3   b
cluster-02-node-4   b
```

---

## 2ï¸âƒ£ Tenantë³„ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë° ResourceQuota

### ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±

```yaml
# Tenant A
apiVersion: v1
kind: Namespace
metadata:
  name: tenant-a
  labels:
    tenant: a
---
# Tenant B
apiVersion: v1
kind: Namespace
metadata:
  name: tenant-b
  labels:
    tenant: b
```

### ResourceQuota

```yaml
# Tenant A Quota
apiVersion: v1
kind: ResourceQuota
metadata:
  name: tenant-a-quota
  namespace: tenant-a
spec:
  hard:
    requests.cpu: "7"           # 8 cores ì¤‘ ì—¬ìœ  1 core
    requests.memory: 14Gi       # 16Gi ì¤‘ ì—¬ìœ  2Gi
    limits.cpu: "8"
    limits.memory: 16Gi
    persistentvolumeclaims: "20"
    services.loadbalancers: "2"
---
# Tenant B Quota
apiVersion: v1
kind: ResourceQuota
metadata:
  name: tenant-b-quota
  namespace: tenant-b
spec:
  hard:
    requests.cpu: "7"
    requests.memory: 14Gi
    limits.cpu: "8"
    limits.memory: 16Gi
    persistentvolumeclaims: "20"
    services.loadbalancers: "2"
```

### LimitRange

```yaml
# Tenant A LimitRange
apiVersion: v1
kind: LimitRange
metadata:
  name: tenant-a-limitrange
  namespace: tenant-a
spec:
  limits:
  - max:
      cpu: "2"
      memory: 4Gi
    min:
      cpu: 100m
      memory: 128Mi
    default:
      cpu: 500m
      memory: 512Mi
    defaultRequest:
      cpu: 200m
      memory: 256Mi
    type: Container
  - max:
      storage: 50Gi
    min:
      storage: 1Gi
    type: PersistentVolumeClaim
```

---

## 3ï¸âƒ£ Tenantë³„ Prometheus Agent ë°°í¬

### Prometheus Agent A (Tenant A)

```yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: prometheus-agent-a
  namespace: monitoring
spec:
  serviceName: prometheus-agent-a
  replicas: 1
  selector:
    matchLabels:
      app: prometheus-agent-a
      tenant: a
  template:
    metadata:
      labels:
        app: prometheus-agent-a
        tenant: a
    spec:
      # Tenant A ë…¸ë“œì—ë§Œ ë°°ì¹˜
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: tenant
                operator: In
                values:
                - a
      # Tenant A Taint í—ˆìš©
      tolerations:
      - key: tenant
        operator: Equal
        value: a
        effect: NoSchedule

      containers:
      - name: prometheus-agent
        image: prom/prometheus:v2.45.0
        args:
        - --enable-feature=agent
        - --config.file=/etc/prometheus/prometheus.yml
        - --storage.agent.path=/data

        volumeMounts:
        - name: config
          mountPath: /etc/prometheus
        - name: data
          mountPath: /data

      volumes:
      - name: config
        configMap:
          name: prometheus-agent-a-config
```

### Prometheus Agent A ì„¤ì •

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-agent-a-config
  namespace: monitoring
data:
  prometheus.yml: |
    global:
      scrape_interval: 15s
      external_labels:
        cluster: cluster-02
        tenant_id: a  # Tenant A ì‹ë³„

    remote_write:
    - url: https://thanos-receive.cluster-01.svc:19291/api/v1/receive
      headers:
        X-Prometheus-Remote-Write-Tenant: tenant-a  # Hashring ë¼ìš°íŒ…

    scrape_configs:
    # Tenant A ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§Œ ìˆ˜ì§‘
    - job_name: kubernetes-pods
      kubernetes_sd_configs:
      - role: pod
        namespaces:
          names:
          - tenant-a
      relabel_configs:
      - source_labels: [__meta_kubernetes_namespace]
        target_label: namespace
```

### Prometheus Agent B (Tenant B)

```yaml
# ë™ì¼í•œ êµ¬ì¡°, ì°¨ì´ì :
# - labels: tenant: b
# - nodeAffinity: tenant=b
# - tolerations: tenant=b
# - external_labels.tenant_id: b
# - namespaces: [tenant-b]
```

---

## 4ï¸âƒ£ NetworkPolicy ê²©ë¦¬

### Tenant A NetworkPolicy

```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: tenant-a-isolation
  namespace: tenant-a
spec:
  podSelector: {}  # ëª¨ë“  Pod
  policyTypes:
  - Ingress
  - Egress

  # Ingress: Tenant A ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ë¶€ë§Œ í—ˆìš©
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          tenant: a

  # Egress í—ˆìš©
  egress:
  # 1. Tenant A ë‚´ë¶€ í†µì‹ 
  - to:
    - namespaceSelector:
        matchLabels:
          tenant: a

  # 2. DNS (kube-system)
  - to:
    - namespaceSelector:
        matchLabels:
          kubernetes.io/metadata.name: kube-system
    ports:
    - protocol: UDP
      port: 53

  # 3. Monitoring (Prometheus Agent)
  - to:
    - namespaceSelector:
        matchLabels:
          kubernetes.io/metadata.name: monitoring
    ports:
    - protocol: TCP
      port: 9090

  # 4. ì™¸ë¶€ ì¸í„°ë„· (ì„ íƒì )
  - to:
    - namespaceSelector: {}
    ports:
    - protocol: TCP
      port: 443
```

### ê²€ì¦ í…ŒìŠ¤íŠ¸

```bash
# Tenant A Podì—ì„œ Tenant B Pod ì ‘ê·¼ ì‹œë„
kubectl run -it --rm test-a -n tenant-a --image=busybox -- sh

# Tenant Bì˜ Pod IPë¡œ curl ì‹œë„
wget -O- http://10.244.3.5  # Tenant B Pod IP

# ì˜ˆìƒ ê²°ê³¼: Timeout (NetworkPolicy ì°¨ë‹¨)
```

---

## 5ï¸âƒ£ ë©”íŠ¸ë¦­ ë¶„ë¦¬ ë° ì¿¼ë¦¬

### Thanos Receiver Hashring (í…Œë„ŒíŠ¸ë³„)

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: thanos-receive-hashring
  namespace: monitoring
data:
  hashrings.json: |
    [
      {
        "hashring": "tenant-a",
        "endpoints": [
          "thanos-receive-0.thanos-receive:10901",
          "thanos-receive-1.thanos-receive:10901"
        ],
        "tenants": ["tenant-a"]
      },
      {
        "hashring": "tenant-b",
        "endpoints": [
          "thanos-receive-2.thanos-receive:10901"
        ],
        "tenants": ["tenant-b"]
      },
      {
        "hashring": "default",
        "endpoints": [
          "thanos-receive-0.thanos-receive:10901",
          "thanos-receive-1.thanos-receive:10901",
          "thanos-receive-2.thanos-receive:10901"
        ],
        "tenants": []
      }
    ]
```

### Grafana í…Œë„ŒíŠ¸ë³„ ëŒ€ì‹œë³´ë“œ

```json
{
  "dashboard": {
    "title": "Tenant A Dashboard",
    "templating": {
      "list": [
        {
          "name": "tenant",
          "type": "constant",
          "current": {
            "value": "a"
          }
        }
      ]
    },
    "panels": [
      {
        "title": "CPU Usage",
        "targets": [
          {
            "expr": "sum(rate(container_cpu_usage_seconds_total{tenant_id=\"a\"}[5m])) by (namespace)"
          }
        ]
      }
    ]
  }
}
```

### PromQL ì¿¼ë¦¬ ì˜ˆì‹œ

```promql
# Tenant A CPU ì‚¬ìš©ë¥ 
sum(rate(container_cpu_usage_seconds_total{tenant_id="a"}[5m])) by (namespace)

# Tenant B Memory ì‚¬ìš©ëŸ‰
sum(container_memory_working_set_bytes{tenant_id="b"}) by (pod)

# Tenant ë¹„êµ
count(kube_pod_info) by (tenant_id)
```

---

## 6ï¸âƒ£ RBAC ê¶Œí•œ ë¶„ë¦¬

### ServiceAccount ìƒì„±

```yaml
# Tenant A ServiceAccount
apiVersion: v1
kind: ServiceAccount
metadata:
  name: tenant-a-admin
  namespace: tenant-a
---
# Tenant B ServiceAccount
apiVersion: v1
kind: ServiceAccount
metadata:
  name: tenant-b-admin
  namespace: tenant-b
```

### Role ë° RoleBinding

```yaml
# Tenant A Role (ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ì „ì²´ ê¶Œí•œ)
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: tenant-a-admin-role
  namespace: tenant-a
rules:
- apiGroups: ["*"]
  resources: ["*"]
  verbs: ["*"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: tenant-a-admin-binding
  namespace: tenant-a
subjects:
- kind: ServiceAccount
  name: tenant-a-admin
  namespace: tenant-a
roleRef:
  kind: Role
  name: tenant-a-admin-role
  apiGroup: rbac.authorization.k8s.io
```

### ClusterRole ì œí•œ (ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì™¸ë¶€ ì ‘ê·¼ ì°¨ë‹¨)

```yaml
# Tenant AëŠ” ìì‹ ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§Œ ì¡°íšŒ ê°€ëŠ¥
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: tenant-a-view
rules:
- apiGroups: [""]
  resources: ["namespaces"]
  verbs: ["get", "list"]
  resourceNames: ["tenant-a"]  # ìì‹ ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§Œ
```

---

## 7ï¸âƒ£ ì›Œí¬ë¡œë“œ ì˜ˆì‹œ (Tenant A)

### Deployment with Affinity & Tolerations

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-app
  namespace: tenant-a
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
      tenant: a
  template:
    metadata:
      labels:
        app: nginx
        tenant: a
    spec:
      # Tenant A ë…¸ë“œì—ë§Œ ë°°ì¹˜
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: tenant
                operator: In
                values:
                - a
        # Pod Anti-Affinity (ë¶„ì‚° ë°°ì¹˜)
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchLabels:
                  app: nginx
              topologyKey: kubernetes.io/hostname

      # Tenant A Taint í—ˆìš©
      tolerations:
      - key: tenant
        operator: Equal
        value: a
        effect: NoSchedule

      containers:
      - name: nginx
        image: nginx:latest
        resources:
          requests:
            cpu: 200m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 512Mi
```

---

## ğŸ“Š ë©€í‹°í…Œë„Œì‹œ ê²€ì¦

### 1. ë…¸ë“œ ë°°ì¹˜ í™•ì¸

```bash
# Tenant A Podê°€ Tenant A ë…¸ë“œì—ë§Œ ìˆëŠ”ì§€ í™•ì¸
kubectl get pods -n tenant-a -o wide

# ì¶œë ¥ ì˜ˆì‹œ
NAME            NODE                TENANT
nginx-app-1     cluster-02-node-1   a
nginx-app-2     cluster-02-node-2   a
nginx-app-3     cluster-02-node-1   a
```

### 2. ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸

```bash
# Tenant A Quota ì‚¬ìš©ë¥ 
kubectl describe resourcequota tenant-a-quota -n tenant-a

# ì¶œë ¥ ì˜ˆì‹œ
Used/Hard:
  requests.cpu:    5/7
  requests.memory: 10Gi/14Gi
```

### 3. ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ í™•ì¸

```bash
# Tenant A â†’ Tenant B í†µì‹  ì‹œë„
kubectl run test -n tenant-a --rm -it --image=busybox -- wget -O- http://service-b.tenant-b.svc

# ì˜ˆìƒ ê²°ê³¼: Timeout (NetworkPolicy ì°¨ë‹¨)
```

### 4. ë©”íŠ¸ë¦­ ë¶„ë¦¬ í™•ì¸

```promql
# Tenant A ë©”íŠ¸ë¦­ë§Œ ì¡°íšŒ
count(up{tenant_id="a"})

# Tenant Bì™€ ì„ì´ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
count(up{tenant_id="b", namespace="tenant-a"})  # ê²°ê³¼: 0
```

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- **ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜** â†’ [ì „ì²´-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜.md](./ì „ì²´-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜.md)
- **ë©€í‹°í…Œë„Œì‹œ êµ¬ì„± ê°€ì´ë“œ** â†’ [../05-ë©€í‹°í…Œë„Œì‹œ-êµ¬ì„±/](../05-ë©€í‹°í…Œë„Œì‹œ-êµ¬ì„±/)
- **ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ** â†’ [../06-ë„¤íŠ¸ì›Œí¬-ë³´ì•ˆ/](../06-ë„¤íŠ¸ì›Œí¬-ë³´ì•ˆ/)

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-20

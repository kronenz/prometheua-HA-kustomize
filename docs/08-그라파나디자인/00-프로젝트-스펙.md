# DataOps í”Œë«í¼ End-to-End ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ì„¤ê³„ì„œ

**í”„ë¡œì íŠ¸ëª…**: DataOps E2E Observability Platform
**ë²„ì „**: v4.0 (íŒŒìŠ¤í…”í†¤ ê³ ë„í™”)
**ì‘ì„±ì¼**: 2025-01-07
**ì‘ì„±ì**: SRE Team, Platform Engineering Team, Data Engineering Team

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì „ë¬¸ê°€ íšŒì˜ë¡](#ì „ë¬¸ê°€-íšŒì˜ë¡)
3. [ëŒ€ì‹œë³´ë“œ ì•„í‚¤í…ì²˜](#ëŒ€ì‹œë³´ë“œ-ì•„í‚¤í…ì²˜)
4. [ìƒ‰ìƒ ë””ìì¸ ì‹œìŠ¤í…œ](#ìƒ‰ìƒ-ë””ìì¸-ì‹œìŠ¤í…œ)
5. [ëŒ€ì‹œë³´ë“œ ìƒì„¸ ìŠ¤í™](#ëŒ€ì‹œë³´ë“œ-ìƒì„¸-ìŠ¤í™)
6. [PromQL í‘œì¤€](#promql-í‘œì¤€)
7. [êµ¬í˜„ ë¡œë“œë§µ](#êµ¬í˜„-ë¡œë“œë§µ)

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

### ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œ

ë² ì–´ë©”íƒˆ Kubernetes ìœ„ì—ì„œ ë™ì‘í•˜ëŠ” ë³µì¡í•œ ë¹…ë°ì´í„° í”Œë«í¼(Spark, Airflow, Trino, Iceberg, S3)ì˜ **ì „ì²´ ìƒëª…ì£¼ê¸°**ë¥¼ End-to-Endë¡œ ëª¨ë‹ˆí„°ë§í•˜ì—¬:

1. **ë°°í¬ ìë™í™”**: GitOps (Bitbucket â†’ Jenkins â†’ ArgoCD â†’ K8s)
2. **ë°°í¬ ê²€ì¦**: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ë°°í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸
3. **ìì› ê°€ìš©ì„±**: CPU, RAM, Storage ê°€ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
4. **ì›Œí¬ë¡œë“œ ì‹¤í–‰**: Spark/Trino/Airflow ì‘ì—… ë¶„ì‚° ì‹¤í–‰ ëª¨ë‹ˆí„°ë§
5. **ì„±ëŠ¥ ìµœì í™”**: ë³‘ëª© ì§€ì  íŒŒì•… ë° ì˜¤ë¥˜ ëŒ€ì‘
6. **End-to-End ì¶”ì **: ë°°í¬ë¶€í„° ë°ì´í„° ì²˜ë¦¬ê¹Œì§€ ì „ êµ¬ê°„ ì‹œê°í™”

### ê¸°ìˆ  ìŠ¤íƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitOps Deployment                        â”‚
â”‚  Bitbucket (Git) â†’ Jenkins (CI) â†’ ArgoCD (CD) â†’ K8s        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  BigData Workloads                          â”‚
â”‚  Spark Jobs â”€â”€â”                                             â”‚
â”‚  Airflow DAGs â”œâ”€â†’ Iceberg Tables â†’ MinIO S3               â”‚
â”‚  Trino Queriesâ”˜                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Storage Backend                            â”‚
â”‚  â€¢ Hive Metastore (ë©”íƒ€ë°ì´í„°)                              â”‚
â”‚  â€¢ Oracle (íŠ¸ëœì­ì…˜ DB)                                     â”‚
â”‚  â€¢ PVC: Isilon/Ceph (ê³µìœ  ìŠ¤í† ë¦¬ì§€)                        â”‚
â”‚  â€¢ MinIO S3 (ì˜¤ë¸Œì íŠ¸ ìŠ¤í† ë¦¬ì§€)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë³µì¡ë„ ìš”ì†Œ

- **ë‹¤ì¤‘ ìŠ¤í† ë¦¬ì§€**: Isilon, Ceph, S3, Oracle, Hive Metastore
- **ë‹¤ì–‘í•œ ì›Œí¬ë¡œë“œ**: Batch(Spark), Streaming(Kafka), Query(Trino), Orchestration(Airflow)
- **ë¶„ì‚° í™˜ê²½**: Multi-cluster Kubernetes (Central + Edge)
- **GitOps íŒŒì´í”„ë¼ì¸**: 3ë‹¨ê³„ ë°°í¬ í”„ë¡œì„¸ìŠ¤
- **ë°ì´í„° ë ˆì´í¬í•˜ìš°ìŠ¤**: Iceberg format + S3 storage

---

## ğŸ‘¥ ì „ë¬¸ê°€ íšŒì˜ë¡

### ì°¸ì„ì

1. **SRE ì „ë¬¸ê°€** (Site Reliability Engineering)
   - ì—­í• : ì‹œìŠ¤í…œ ì•ˆì •ì„±, SLO/SLI, ì•Œë¦¼ ì •ì±…
   - ê´€ì‹¬ì‚¬: Uptime, MTTR, Error Budget

2. **í”Œë«í¼ ì—”ì§€ë‹ˆì–´** (Platform Engineering)
   - ì—­í• : Kubernetes ì¸í”„ë¼, ë„¤íŠ¸ì›Œí¬, ìŠ¤í† ë¦¬ì§€
   - ê´€ì‹¬ì‚¬: ìì› ê°€ìš©ì„±, í´ëŸ¬ìŠ¤í„° í—¬ìŠ¤, ë°°í¬ ìë™í™”

3. **ë°ì´í„° ì—”ì§€ë‹ˆì–´** (Data Engineering)
   - ì—­í• : ë¹…ë°ì´í„° ì›Œí¬ë¡œë“œ, íŒŒì´í”„ë¼ì¸ ìµœì í™”
   - ê´€ì‹¬ì‚¬: Job ì„±ê³µë¥ , ì²˜ë¦¬ ì‹œê°„, ë°ì´í„° í’ˆì§ˆ

4. **DevOps ì—”ì§€ë‹ˆì–´** (DevOps)
   - ì—­í• : CI/CD, GitOps, ë°°í¬ ìë™í™”
   - ê´€ì‹¬ì‚¬: ë¹Œë“œ ì„±ê³µë¥ , ë°°í¬ ì†ë„, ë¡¤ë°± ë©”ì»¤ë‹ˆì¦˜

### íšŒì˜ ê²°ë¡ 

#### 1ï¸âƒ£ ëŒ€ì‹œë³´ë“œ êµ¬ì¡° (Drill-down ë°©ì‹)

```
Portal (Home)
  â”œâ”€ 1. Deployment Pipeline       â† DevOps ê´€ì 
  â”‚    â”œâ”€ Jenkins Build Status
  â”‚    â”œâ”€ ArgoCD Sync Status
  â”‚    â””â”€ K8s Rollout Status
  â”‚
  â”œâ”€ 2. Application Health        â† SRE ê´€ì 
  â”‚    â”œâ”€ Pod Status
  â”‚    â”œâ”€ Service Endpoints
  â”‚    â””â”€ Health Checks
  â”‚
  â”œâ”€ 3. Resource Capacity         â† Platform ê´€ì 
  â”‚    â”œâ”€ CPU/RAM Usage
  â”‚    â”œâ”€ Storage IOPS
  â”‚    â””â”€ Network Bandwidth
  â”‚
  â”œâ”€ 4. Workload Performance      â† Data Engineer ê´€ì 
  â”‚    â”œâ”€ Spark Job Metrics
  â”‚    â”œâ”€ Airflow DAG Runs
  â”‚    â””â”€ Trino Query Performance
  â”‚
  â”œâ”€ 5. Data Pipeline             â† Data Engineer ê´€ì 
  â”‚    â”œâ”€ Iceberg Table Stats
  â”‚    â”œâ”€ S3 Object Metrics
  â”‚    â””â”€ Hive Metastore
  â”‚
  â””â”€ 6. Optimization & Troubleshooting  â† ì „ì²´ íŒ€
       â”œâ”€ Performance Bottlenecks
       â”œâ”€ Error Analysis
       â””â”€ Cost Analysis
```

#### 2ï¸âƒ£ ìƒ‰ìƒ ë””ìì¸ ì›ì¹™

**SRE ì „ë¬¸ê°€ ì˜ê²¬:**
> "24ì‹œê°„ NOC í™˜ê²½ì—ì„œ ì¥ì‹œê°„ ë³´ê¸° ìœ„í•´ ëˆˆì´ í¸ì•ˆí•œ íŒŒìŠ¤í…”í†¤ì´ í•„ìš”í•©ë‹ˆë‹¤.
> ê³ ì±„ë„ ì›ìƒ‰ì€ í”¼ë¡œë¥¼ ìœ ë°œí•˜ê³ , ì„ê³„ê°’ ìƒ‰ìƒ(ë…¹/í™©/ì )ì€ ëª…í™•í•´ì•¼ í•©ë‹ˆë‹¤."

**í”Œë«í¼ ì—”ì§€ë‹ˆì–´ ì˜ê²¬:**
> "ì¸í”„ë¼ ê³„ì¸µê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µì„ ìƒ‰ìƒìœ¼ë¡œ êµ¬ë¶„í•´ì•¼ í•©ë‹ˆë‹¤.
> ë¬¼ë¦¬ ìì›(ì„œë²„/ë„¤íŠ¸ì›Œí¬/ìŠ¤í† ë¦¬ì§€)ì€ ì°¨ê°€ìš´ í†¤,
> ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë”°ëœ»í•œ í†¤ìœ¼ë¡œ êµ¬ë¶„í•˜ë©´ ì§ê´€ì ì…ë‹ˆë‹¤."

**ë°ì´í„° ì—”ì§€ë‹ˆì–´ ì˜ê²¬:**
> "ë°ì´í„° íë¦„ì„ ìƒ‰ìƒ ê·¸ë¼ë°ì´ì…˜ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.
> ì˜ˆ: ë°ì´í„° ìˆ˜ì§‘(íŒŒë€ìƒ‰) â†’ ì²˜ë¦¬(ë³´ë¼ìƒ‰) â†’ ì €ì¥(ì´ˆë¡ìƒ‰)"

#### 3ï¸âƒ£ ë©”íŠ¸ë¦­ ìš°ì„ ìˆœìœ„

**Critical Metrics (ë¹¨ê°„ë¶ˆ ì•Œë¦¼):**
- Deployment Failure Rate > 10%
- Pod CrashLoopBackOff
- CPU/Memory OOM
- Spark Job Failure Rate > 5%
- S3 Write Failure

**Warning Metrics (ë…¸ë€ë¶ˆ ì£¼ì˜):**
- Build Duration > 10ë¶„
- Sync Delay > 5ë¶„
- CPU Usage > 80%
- GC Time Ratio > 15%
- Small Files > 1000ê°œ

**Info Metrics (ì •ë³´ì„±):**
- Active Users
- DAG Success Rate
- Query p95 Latency
- Cost per Job

---

## ğŸ—ï¸ ëŒ€ì‹œë³´ë“œ ì•„í‚¤í…ì²˜

### Drill-down ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì¡°

```mermaid
graph TD
    A[Portal Home] --> B[1. Deployment Pipeline]
    A --> C[2. Application Health]
    A --> D[3. Resource Capacity]
    A --> E[4. Workload Performance]
    A --> F[5. Data Pipeline]
    A --> G[6. Optimization]

    B --> B1[Jenkins Details]
    B --> B2[ArgoCD Details]
    B --> B3[K8s Rollout Details]

    C --> C1[Pod Logs]
    C --> C2[Event Timeline]

    D --> D1[Node Details]
    D --> D2[Storage Details]

    E --> E1[Spark Job Details]
    E --> E2[Airflow Task Details]
    E --> E3[Trino Query Details]

    F --> F1[Iceberg Table Details]
    F --> F2[S3 Bucket Details]

    G --> G1[Slow Query Analysis]
    G --> G2[Cost Breakdown]
```

### End-to-End íë¦„ ì‹œê°í™”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Portal Dashboard                           â”‚
â”‚                                                                â”‚
â”‚  [ë°°í¬] â†’ [ê²€ì¦] â†’ [ìì›] â†’ [ì‹¤í–‰] â†’ [ë°ì´í„°] â†’ [ìµœì í™”]      â”‚
â”‚                                                                â”‚
â”‚  ê° ë‹¨ê³„ë³„ Health Score + ì†Œìš” ì‹œê°„ í‘œì‹œ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ ìƒ‰ìƒ ë””ìì¸ ì‹œìŠ¤í…œ

### íŒŒìŠ¤í…”í†¤ íŒ”ë ˆíŠ¸ (ëˆˆì˜ í”¼ë¡œë„ ìµœì†Œí™”)

#### Primary Colors (ë‹¨ê³„ë³„ êµ¬ë¶„)

```css
/* 1. Deployment - Soft Blue (ì‹ ë¢°ì„±) */
--deploy-primary: #7FB3E8;     /* íŒŒìŠ¤í…” ë¸”ë£¨ */
--deploy-light:   #B8D8F0;     /* ì—°í•œ ë¸”ë£¨ */
--deploy-bg:      rgba(127, 179, 232, 0.1);

/* 2. Health - Soft Green (ì•ˆì •ì„±) */
--health-primary: #81C995;     /* íŒŒìŠ¤í…” ê·¸ë¦° */
--health-light:   #B8E5C5;
--health-bg:      rgba(129, 201, 149, 0.1);

/* 3. Resource - Soft Purple (ìì›) */
--resource-primary: #B19CD9;   /* íŒŒìŠ¤í…” í¼í”Œ */
--resource-light:   #D5C9E8;
--resource-bg:      rgba(177, 156, 217, 0.1);

/* 4. Workload - Soft Orange (í™œë™) */
--workload-primary: #FFB347;   /* íŒŒìŠ¤í…” ì˜¤ë Œì§€ */
--workload-light:   #FFD8A8;
--workload-bg:      rgba(255, 179, 71, 0.1);

/* 5. Data Pipeline - Soft Teal (ë°ì´í„° íë¦„) */
--data-primary: #6FB8B8;       /* íŒŒìŠ¤í…” í‹¸ */
--data-light:   #A8D8D8;
--data-bg:      rgba(111, 184, 184, 0.1);

/* 6. Optimization - Soft Pink (ìµœì í™”) */
--optimize-primary: #F4A4C4;   /* íŒŒìŠ¤í…” í•‘í¬ */
--optimize-light:   #F9D0DF;
--optimize-bg:      rgba(244, 164, 196, 0.1);
```

#### Status Colors (ì‹ í˜¸ë“± ì‹œìŠ¤í…œ - íŒŒìŠ¤í…” ë²„ì „)

```css
/* Success - Soft Green */
--status-success: #81C995;
--status-success-bg: rgba(129, 201, 149, 0.15);

/* Warning - Soft Amber */
--status-warning: #FFD97D;
--status-warning-bg: rgba(255, 217, 125, 0.15);

/* Error - Soft Red */
--status-error: #F48B8B;
--status-error-bg: rgba(244, 139, 139, 0.15);

/* Info - Soft Cyan */
--status-info: #7DD3FC;
--status-info-bg: rgba(125, 211, 252, 0.15);
```

#### Background & Text (ì–´ë‘ìš´ ë°°ê²½ + ë¶€ë“œëŸ¬ìš´ í…ìŠ¤íŠ¸)

```css
/* Backgrounds */
--bg-primary:   #1A1F2E;       /* ë§¤ìš° ì–´ë‘ìš´ ë„¤ì´ë¹„ */
--bg-secondary: #252B3D;       /* ì–´ë‘ìš´ ë„¤ì´ë¹„ */
--bg-tertiary:  #2F3648;       /* ì¤‘ê°„ ë„¤ì´ë¹„ */
--bg-card:      #1E2433;       /* ì¹´ë“œ ë°°ê²½ */

/* Text */
--text-primary:   #E5E7EB;     /* ë°ì€ íšŒìƒ‰ */
--text-secondary: #9CA3AF;     /* ì¤‘ê°„ íšŒìƒ‰ */
--text-tertiary:  #6B7280;     /* ì–´ë‘ìš´ íšŒìƒ‰ */

/* Borders */
--border-light:  #374151;
--border-normal: #4B5563;
```

### ìƒ‰ìƒ ì‚¬ìš© ê·œì¹™

1. **ë°°ê²½**: ì–´ë‘ìš´ ë„¤ì´ë¹„ í†¤ (#1A1F2E ~ #2F3648)
2. **ê°•ì¡°**: íŒŒìŠ¤í…” ì»¬ëŸ¬ë¡œ ë¶€ë“œëŸ½ê²Œ ê°•ì¡°
3. **ìƒíƒœ**: ì‹ í˜¸ë“± ìƒ‰ìƒì€ íŒŒìŠ¤í…” ë²„ì „ ì‚¬ìš©
4. **í˜¸ë²„**: 15% ë°ê¸° ì¦ê°€
5. **í…ìŠ¤íŠ¸**: ìµœì†Œ 4.5:1 ëŒ€ë¹„ìœ¨ ìœ ì§€ (WCAG AA)

---

## ğŸ“Š ëŒ€ì‹œë³´ë“œ ìƒì„¸ ìŠ¤í™

### 0. Portal Dashboard (Home)

**ëª©ì **: End-to-End íë¦„ í•œëˆˆì— íŒŒì•…

**ë ˆì´ì•„ì›ƒ**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DataOps Platform - E2E Observability                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Deploy â”‚ Health â”‚Resourceâ”‚Workloadâ”‚  Data  â”‚ Optim  â”‚â”‚
â”‚  â”‚  95%   â”‚  98%   â”‚  82%   â”‚  91%   â”‚  94%   â”‚  88%   â”‚â”‚
â”‚  â”‚  ğŸŸ¢    â”‚  ğŸŸ¢    â”‚  ğŸŸ¡    â”‚  ğŸŸ¢    â”‚  ğŸŸ¢    â”‚  ğŸŸ¡    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                           â”‚
â”‚  [Timeline View]                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Git Push â†’ Build â†’ Deploy â†’ Health â†’ Run â†’ Completeâ”‚â”‚
â”‚  â”‚    2m      5m      3m       1m      15m      âœ“      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŒ¨ë„ êµ¬ì„±**:
1. **6ë‹¨ê³„ Health Cards** (ê° íŒŒìŠ¤í…” ìƒ‰ìƒ)
2. **E2E Timeline** (ê°€ë¡œ í”Œë¡œìš°ì°¨íŠ¸)
3. **Quick Stats** (4ê°œ í•µì‹¬ ì§€í‘œ)
4. **Recent Incidents** (ìµœê·¼ ì´ìŠˆ)
5. **Navigation Cards** (6ê°œ ëŒ€ì‹œë³´ë“œ ë§í¬)

---

### 1. Deployment Pipeline Dashboard

**ëª©ì **: GitOps ë°°í¬ í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§

**í•µì‹¬ ë©”íŠ¸ë¦­**:

| ë©”íŠ¸ë¦­ | PromQL | ì„ê³„ê°’ | ì„¤ëª… |
|--------|--------|--------|------|
| Jenkins Build Success Rate | `sum(rate(jenkins_job_success_total[1h])) / sum(rate(jenkins_job_total[1h])) * 100` | >90% | CI ë¹Œë“œ ì„±ê³µë¥  |
| Build Duration p95 | `histogram_quantile(0.95, jenkins_job_duration_seconds_bucket)` | <600s | ë¹Œë“œ ì†Œìš” ì‹œê°„ 95% |
| ArgoCD Sync Success Rate | `sum(rate(argocd_app_sync_total{phase="Succeeded"}[1h])) / sum(rate(argocd_app_sync_total[1h])) * 100` | >95% | CD ë™ê¸°í™” ì„±ê³µë¥  |
| Sync Duration | `argocd_app_sync_duration_seconds` | <300s | ë™ê¸°í™” ì†Œìš” ì‹œê°„ |
| Out of Sync Apps | `count(argocd_app_info{sync_status="OutOfSync"})` | 0ê°œ | ë™ê¸°í™” ì‹¤íŒ¨ ì•± ìˆ˜ |

**íŒ¨ë„ ì„¤ëª… (ë§ˆìš°ìŠ¤ ì˜¤ë²„)**:

```markdown
### Jenkins Build Success Rate
**ì„¤ëª…**: ìµœê·¼ 1ì‹œê°„ ë™ì•ˆ Jenkins CI ë¹Œë“œì˜ ì„±ê³µë¥ 

**ê³„ì‚°ì‹**: ì„±ê³µí•œ ë¹Œë“œ ìˆ˜ / ì „ì²´ ë¹Œë“œ ìˆ˜ Ã— 100

**ì •ìƒ ë²”ìœ„**: 90% ì´ìƒ
- ğŸŸ¢ 95% ì´ìƒ: ìš°ìˆ˜
- ğŸŸ¡ 90-95%: ì–‘í˜¸ (ì½”ë“œ í’ˆì§ˆ ì ê²€ í•„ìš”)
- ğŸ”´ 90% ë¯¸ë§Œ: ìœ„í—˜ (ë¹Œë“œ ì‹œìŠ¤í…œ ì ê²€)

**ì¡°ì¹˜ ì‚¬í•­**:
1. ì‹¤íŒ¨ ë¹Œë“œ ë¡œê·¸ í™•ì¸
2. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê²€í† 
3. ì˜ì¡´ì„± ë²„ì „ í™•ì¸

**ê´€ë ¨ ëŒ€ì‹œë³´ë“œ**: Jenkins Details
```

---

### 2. Application Health Dashboard

**ëª©ì **: ë°°í¬ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ìƒ ì‘ë™ ê²€ì¦

**í•µì‹¬ ë©”íŠ¸ë¦­**:

| ë©”íŠ¸ë¦­ | PromQL | ì„ê³„ê°’ | ì„¤ëª… |
|--------|--------|--------|------|
| Pod Running Rate | `count(kube_pod_status_phase{phase="Running"}) / count(kube_pod_status_phase) * 100` | >95% | ì •ìƒ ì‹¤í–‰ ì¤‘ì¸ Pod ë¹„ìœ¨ |
| Pod Restart Count | `sum(rate(kube_pod_container_status_restarts_total[5m]))` | <0.1 | Pod ì¬ì‹œì‘ ë¹ˆë„ |
| CrashLoopBackOff Pods | `count(kube_pod_container_status_waiting_reason{reason="CrashLoopBackOff"})` | 0ê°œ | í¬ë˜ì‹œ ë£¨í”„ ìƒíƒœ Pod |
| Service Availability | `sum(up{job=~".*-service"}) / count(up{job=~".*-service"}) * 100` | 100% | ì„œë¹„ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ ê°€ìš©ì„± |
| Readiness Probe Success | `sum(rate(prober_probe_total{result="success"}[5m])) / sum(rate(prober_probe_total[5m])) * 100` | >99% | Readiness ì²´í¬ ì„±ê³µë¥  |

---

### 3. Resource Capacity Dashboard

**ëª©ì **: ì¸í”„ë¼ ìì› ê°€ìš©ì„± ëª¨ë‹ˆí„°ë§

**í•µì‹¬ ë©”íŠ¸ë¦­**:

| ë©”íŠ¸ë¦­ | PromQL | ì„ê³„ê°’ | ì„¤ëª… |
|--------|--------|--------|------|
| Cluster CPU Usage | `sum(rate(container_cpu_usage_seconds_total[5m])) / sum(machine_cpu_cores) * 100` | <80% | í´ëŸ¬ìŠ¤í„° CPU ì‚¬ìš©ë¥  |
| Cluster Memory Usage | `sum(container_memory_working_set_bytes) / sum(machine_memory_bytes) * 100` | <85% | í´ëŸ¬ìŠ¤í„° ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  |
| Available CPU Cores | `sum(machine_cpu_cores) - sum(kube_pod_container_resource_requests{resource="cpu"})` | >10 cores | í• ë‹¹ ê°€ëŠ¥í•œ CPU |
| Available Memory | `sum(machine_memory_bytes) - sum(kube_pod_container_resource_requests{resource="memory"})` | >50GB | í• ë‹¹ ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ |
| Storage IOPS (Isilon) | `rate(isilon_node_disk_ops_total[5m])` | <50k | ìŠ¤í† ë¦¬ì§€ ì´ˆë‹¹ I/O |
| Ceph OSD Usage | `ceph_osd_stat_bytes_used / ceph_osd_stat_bytes * 100` | <80% | Ceph ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©ë¥  |
| PVC Capacity | `kubelet_volume_stats_used_bytes / kubelet_volume_stats_capacity_bytes * 100` | <90% | PVC ë³¼ë¥¨ ì‚¬ìš©ë¥  |

---

### 4. Workload Performance Dashboard

**ëª©ì **: ë¹…ë°ì´í„° ì›Œí¬ë¡œë“œ ì‹¤í–‰ ëª¨ë‹ˆí„°ë§

**í•µì‹¬ ë©”íŠ¸ë¦­**:

| ë©”íŠ¸ë¦­ | PromQL | ì„ê³„ê°’ | ì„¤ëª… |
|--------|--------|--------|------|
| **Spark Metrics** |
| Spark Job Success Rate | `sum(rate(spark_job_status{status="succeeded"}[1h])) / sum(rate(spark_job_status[1h])) * 100` | >95% | Spark Job ì„±ê³µë¥  |
| Spark GC Time Ratio | `sum(rate(jvm_gc_collection_seconds_sum[5m])) / sum(rate(jvm_gc_collection_seconds_count[5m])) * 100` | <10% | GC ì†Œìš” ì‹œê°„ ë¹„ìœ¨ |
| Executor Memory Usage | `avg(spark_executor_memory_used_bytes / spark_executor_memory_total_bytes) * 100` | <85% | Executor ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  |
| Stage Duration p95 | `histogram_quantile(0.95, spark_stage_duration_seconds_bucket)` | <300s | Stage ì‹¤í–‰ ì‹œê°„ 95% |
| **Airflow Metrics** |
| DAG Success Rate | `sum(rate(airflow_dag_run_duration{state="success"}[1h])) / sum(rate(airflow_dag_run_duration[1h])) * 100` | >98% | DAG ì‹¤í–‰ ì„±ê³µë¥  |
| Task Duration p95 | `histogram_quantile(0.95, airflow_task_duration_bucket)` | Jobë³„ | Task ì‹¤í–‰ ì‹œê°„ 95% |
| Scheduler Latency | `airflow_scheduler_heartbeat` | <30s | ìŠ¤ì¼€ì¤„ëŸ¬ ì‘ë‹µ ì‹œê°„ |
| **Trino Metrics** |
| Query Success Rate | `sum(rate(trino_execution_QueryExecution_CompletedQueries_TotalCount{status="FINISHED"}[5m])) / sum(rate(trino_execution_QueryExecution_CompletedQueries_TotalCount[5m])) * 100` | >99% | ì¿¼ë¦¬ ì„±ê³µë¥  |
| Query p95 Latency | `histogram_quantile(0.95, trino_execution_QueryExecution_ExecutionTime_bucket)` | <10s | ì¿¼ë¦¬ ì‘ë‹µ ì‹œê°„ 95% |
| Running Queries | `trino_execution_QueryManager_RunningQueries` | <100 | ë™ì‹œ ì‹¤í–‰ ì¿¼ë¦¬ ìˆ˜ |

---

### 5. Data Pipeline Dashboard

**ëª©ì **: ë°ì´í„° íë¦„ (Iceberg â†’ S3) ëª¨ë‹ˆí„°ë§

**í•µì‹¬ ë©”íŠ¸ë¦­**:

| ë©”íŠ¸ë¦­ | PromQL | ì„ê³„ê°’ | ì„¤ëª… |
|--------|--------|--------|------|
| **Iceberg Metrics** |
| Table Count | `iceberg_tables_total` | - | ì´ Iceberg í…Œì´ë¸” ìˆ˜ |
| Small Files Count | `iceberg_table_small_files{size_mb<128}` | <1000 | Compaction í•„ìš” ì†Œí˜• íŒŒì¼ |
| Snapshot Age | `time() - iceberg_table_last_snapshot_timestamp` | <86400s | ë§ˆì§€ë§‰ ìŠ¤ëƒ…ìƒ· ê²½ê³¼ ì‹œê°„ |
| Write Throughput | `rate(iceberg_table_records_written[5m])` | - | ì´ˆë‹¹ ë ˆì½”ë“œ ì“°ê¸° ìˆ˜ |
| **S3 Metrics** |
| S3 Write Success Rate | `sum(rate(s3_requests_total{operation="PutObject",status="200"}[5m])) / sum(rate(s3_requests_total{operation="PutObject"}[5m])) * 100` | >99.9% | S3 ì“°ê¸° ì„±ê³µë¥  |
| S3 Write Latency | `histogram_quantile(0.95, s3_request_duration_seconds_bucket{operation="PutObject"})` | <1s | S3 ì“°ê¸° ì§€ì—° ì‹œê°„ |
| Bucket Size | `s3_bucket_size_bytes` | - | S3 ë²„í‚· ìš©ëŸ‰ |
| Object Count | `s3_bucket_objects_count` | - | S3 ì˜¤ë¸Œì íŠ¸ ìˆ˜ |
| **Hive Metastore** |
| Metastore API Latency | `histogram_quantile(0.95, hive_metastore_api_duration_seconds_bucket)` | <500ms | Metastore API ì‘ë‹µ ì‹œê°„ |
| Connection Pool Usage | `hikaricp_connections_active / hikaricp_connections_max * 100` | <80% | DB ì»¤ë„¥ì…˜ í’€ ì‚¬ìš©ë¥  |

---

### 6. Optimization & Troubleshooting Dashboard

**ëª©ì **: ì„±ëŠ¥ ë³‘ëª© ì§€ì  íŒŒì•… ë° ìµœì í™”

**í•µì‹¬ ë©”íŠ¸ë¦­**:

| ë©”íŠ¸ë¦­ | PromQL | ì„ê³„ê°’ | ì„¤ëª… |
|--------|--------|--------|------|
| Slowest Spark Jobs | `topk(10, spark_job_duration_seconds)` | - | ê°€ì¥ ëŠë¦° Spark Job Top 10 |
| Memory OOM Events | `sum(rate(container_memory_failures_total{failure_type="oom"}[5m]))` | 0 | Out of Memory ë°œìƒ ë¹ˆë„ |
| Network Bottleneck | `rate(node_network_transmit_bytes_total[5m]) / node_network_speed_bytes * 100` | <70% | ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ì‚¬ìš©ë¥  |
| Storage Latency | `histogram_quantile(0.99, kubelet_volume_stats_inodes_used_bucket)` | <50ms | ìŠ¤í† ë¦¬ì§€ I/O ì§€ì—° |
| Cost per Job | `sum(spark_job_duration_seconds * spark_executor_cores * 0.031) by (job_name)` | - | Jobë³„ ë¹„ìš© (ì˜ˆìƒ) |
| Error Rate by Component | `sum(rate(log_messages_total{level="error"}[5m])) by (component)` | - | ì»´í¬ë„ŒíŠ¸ë³„ ì˜¤ë¥˜ ë°œìƒë¥  |

---

## ğŸ“ PromQL í‘œì¤€ ê°€ì´ë“œ

### Naming Convention

```promql
# Good
spark_job_success_rate
airflow_dag_run_duration_seconds
s3_write_latency_milliseconds

# Bad
spark_success
dag_time
s3_time
```

### Rate vs Increase

```promql
# Rate: ì´ˆë‹¹ ì¦ê°€ìœ¨ (ê²Œì´ì§€ì²˜ëŸ¼ ì‚¬ìš©)
rate(metric_total[5m])

# Increase: ì ˆëŒ€ ì¦ê°€ëŸ‰ (ì¹´ìš´í„° ì¦ê°€ë¶„)
increase(metric_total[1h])
```

### Histogram Quantile

```promql
# p95 ê³„ì‚°
histogram_quantile(0.95, metric_bucket)

# p99 ê³„ì‚°
histogram_quantile(0.99, metric_bucket)
```

### Aggregation

```promql
# Sum by label
sum(metric) by (namespace, pod)

# Average without label
avg(metric) without (instance)

# Top K
topk(10, metric)

# Bottom K
bottomk(5, metric)
```

---

## ğŸš€ êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ê¸°ë°˜ ì‘ì—… (1ì£¼)

- [x] ì „ë¬¸ê°€ íšŒì˜ ë° ìŠ¤í™ ì‘ì„±
- [ ] íŒŒìŠ¤í…”í†¤ ìƒ‰ìƒ ì‹œìŠ¤í…œ ì ìš©
- [ ] Portal Dashboard êµ¬í˜„

### Phase 2: Core Dashboards (2ì£¼)

- [ ] Deployment Pipeline Dashboard
- [ ] Application Health Dashboard
- [ ] Resource Capacity Dashboard

### Phase 3: Advanced Dashboards (2ì£¼)

- [ ] Workload Performance Dashboard
- [ ] Data Pipeline Dashboard
- [ ] Optimization Dashboard

### Phase 4: í†µí•© ë° ê²€ì¦ (1ì£¼)

- [ ] Drill-down ë„¤ë¹„ê²Œì´ì…˜ ì—°ê²°
- [ ] ëª¨ë“  íŒ¨ë„ ì„¤ëª… ì¶”ê°€
- [ ] PromQL ê²€ì¦ ë° ìµœì í™”
- [ ] ì‚¬ìš©ì í…ŒìŠ¤íŠ¸

### Phase 5: ìš´ì˜ ì¤€ë¹„ (1ì£¼)

- [ ] ì•Œë¦¼ ê·œì¹™ ì„¤ì •
- [ ] ë¬¸ì„œí™” ì™„ë£Œ
- [ ] ìš´ì˜ ê°€ì´ë“œ ì‘ì„±

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. âœ… **í”„ë¡œì íŠ¸ ìŠ¤í™ ì‘ì„± ì™„ë£Œ**
2. ğŸ”„ **íŒŒìŠ¤í…”í†¤ ìƒ‰ìƒ ì ìš©í•œ Portal Dashboard êµ¬í˜„**
3. â³ **6ê°œ ìƒì„¸ ëŒ€ì‹œë³´ë“œ ìˆœì°¨ êµ¬í˜„**

---

**ì‘ì„±ì**: DataOps Platform Team
**ìµœì¢… ìˆ˜ì •**: 2025-01-07
**ë²„ì „**: 1.0

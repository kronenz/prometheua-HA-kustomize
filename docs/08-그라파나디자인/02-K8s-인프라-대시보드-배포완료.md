# DataOps Lifecycle Dashboard v2 - ì‚¬ìš©ì ê°€ì´ë“œ

## ğŸ“Š Dashboard ê°œìš”
DataOps Lifecycle Dashboard v2ëŠ” ArgoCD GitOps ë°°í¬ì™€ Jenkins CI íŒŒì´í”„ë¼ì¸ì„ í†µí•© ëª¨ë‹ˆí„°ë§í•˜ëŠ” ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.

## ğŸŒ ì ‘ì† ì •ë³´

### Grafana
- **URL**: http://grafana.k8s-cluster-01.miribit.lab
- **Dashboard Path**: `/d/dataops-lifecycle-v2`
- **Dashboard Name**: DataOps Lifecycle Dashboard v2

### Jenkins
- **URL**: http://jenkins.k8s-cluster-01.miribit.lab
- **Username**: admin
- **Password**: admin123!

### ArgoCD
- **URL**: http://argocd.k8s-cluster-01.miribit.lab

## ğŸ“ˆ Dashboard êµ¬ì„±

### 1. GitOps (ArgoCD) ì„¹ì…˜

#### Applications í˜„í™©
- **í˜„ì¬ ê°’**: 19ê°œ Application
- **ì˜ë¯¸**: ArgoCDë¡œ ê´€ë¦¬ ì¤‘ì¸ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜

#### Out of Sync Applications  
- **í˜„ì¬ ê°’**: 4ê°œ
- **ì˜ë¯¸**: Git ì €ì¥ì†Œì™€ ì‹¤ì œ í´ëŸ¬ìŠ¤í„° ìƒíƒœê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ì•±
- **ëŒ€ìƒ**:
  - prometheus-agent-cluster-02
  - prometheus-agent-cluster-03
  - prometheus-agent-cluster-04
  - thanos-receiver

#### Sync ì„±ê³µë¥ 
- **í˜„ì¬ ê°’**: 99.98%
- **ì˜ë¯¸**: ìµœê·¼ 24ì‹œê°„ ë™ì•ˆì˜ Sync ì„±ê³µë¥ 
- **ê³„ì‚°**: (ì„±ê³µí•œ Sync / ì „ì²´ Sync) Ã— 100

#### í‰ê·  Sync ì‹œê°„
- **í˜„ì¬ ê°’**: 0.42ì´ˆ
- **ì˜ë¯¸**: Application Reconcileì— ê±¸ë¦¬ëŠ” í‰ê·  ì‹œê°„

#### Application Sync ìƒíƒœ ì¶”ì´
- **ê·¸ë˜í”„ íƒ€ì…**: Time Series
- **í‘œì‹œ ë‚´ìš©**: 
  - Synced: Gitê³¼ ë™ê¸°í™”ëœ ì•± ìˆ˜
  - OutOfSync: ë™ê¸°í™” í•„ìš”í•œ ì•± ìˆ˜
  - Unknown: ìƒíƒœ ë¶ˆëª… ì•± ìˆ˜

#### Sync ì‘ì—… ë¹ˆë„
- **í˜„ì¬ ê°’**: 5,090 syncs/24h
- **ì˜ë¯¸**: 24ì‹œê°„ ë™ì•ˆ ì‹¤í–‰ëœ ì´ Sync ì‘ì—… ìˆ˜

### 2. Jenkins CI Pipeline ì„¹ì…˜

#### Jenkins ë¹Œë“œ ì„±ê³µ/ì‹¤íŒ¨ ì¶”ì´
- **ê·¸ë˜í”„ íƒ€ì…**: Time Series
- **í‘œì‹œ ë‚´ìš©**:
  - ì´ˆë¡ìƒ‰ ì„ : ì„±ê³µ ë¹Œë“œ ë¹„ìœ¨
  - ë¹¨ê°„ìƒ‰ ì„ : ì‹¤íŒ¨ ë¹Œë“œ ë¹„ìœ¨

#### Jenkins ë¹Œë“œ Duration
- **ê·¸ë˜í”„ íƒ€ì…**: Time Series
- **í‘œì‹œ ë‚´ìš©**:
  - P50: ì¤‘ê°„ê°’ (50% ë¹Œë“œê°€ ì´ ì‹œê°„ ì´ë‚´ ì™„ë£Œ)
  - P95: 95% ë¹Œë“œê°€ ì´ ì‹œê°„ ì´ë‚´ ì™„ë£Œ
  - P99: 99% ë¹Œë“œê°€ ì´ ì‹œê°„ ì´ë‚´ ì™„ë£Œ

**í˜„ì¬ ê°’**:
- P50: 13.9ì´ˆ
- P95: 13.9ì´ˆ
- P99: 20.5ì´ˆ

#### ìµœê·¼ Jenkins ë¹Œë“œ ë‚´ì—­
- **íŒ¨ë„ íƒ€ì…**: Table
- **í‘œì‹œ ë‚´ìš©**: Jobë³„ ë¹Œë“œ íšŸìˆ˜
  - dataops-build-pipeline: 2íšŒ
  - dataops-test-pipeline: 2íšŒ

### 3. Rollback & Config Drift ì„¹ì…˜

#### Config Drift ê°ì§€
- **íŒ¨ë„ íƒ€ì…**: Stat
- **í˜„ì¬ ê°’**: 4ê°œ
- **Color Coding**:
  - ğŸŸ¢ Green (0ê°œ): ëª¨ë“  ì•±ì´ ë™ê¸°í™”ë¨
  - ğŸŸ¡ Yellow (1-4ê°œ): ê²½ë¯¸í•œ Config Drift
  - ğŸ”´ Red (5ê°œ ì´ìƒ): ì‹¬ê°í•œ Config Drift

#### ìµœê·¼ Rollback ë‚´ì—­
- **íŒ¨ë„ íƒ€ì…**: Table
- **í‘œì‹œ ë‚´ìš©**: OutOfSync ìƒíƒœì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ëª©ë¡
- **ì»¬ëŸ¼**:
  - Application: ì•± ì´ë¦„
  - Sync Status: ë™ê¸°í™” ìƒíƒœ
  - Health: í—¬ìŠ¤ ìƒíƒœ
  - Cluster: ëŒ€ìƒ í´ëŸ¬ìŠ¤í„°
  - Namespace: ë°°í¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
  - Repository: Git ì €ì¥ì†Œ

## ğŸ”§ ëª¨ë‹ˆí„°ë§ë˜ëŠ” Jenkins Jobs

### 1. dataops-build-pipeline
- **íŠ¸ë¦¬ê±°**: 5ë¶„ë§ˆë‹¤ ìë™ ì‹¤í–‰
- **Duration**: ~14ì´ˆ
- **ëª©ì **: ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

### 2. dataops-test-pipeline
- **íŠ¸ë¦¬ê±°**: 5ë¶„ë§ˆë‹¤ ìë™ ì‹¤í–‰
- **Duration**: ~14ì´ˆ
- **ëª©ì **: í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

### 3. dataops-deploy-pipeline
- **íŠ¸ë¦¬ê±°**: ìˆ˜ë™ ì‹¤í–‰
- **Duration**: ê°€ë³€
- **ëª©ì **: ë°°í¬ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

## ğŸ“Š ì£¼ìš” ë©”íŠ¸ë¦­ ì´í•´í•˜ê¸°

### ArgoCD ë©”íŠ¸ë¦­

#### argocd_app_info
ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë©”íŠ¸ë¦­
```promql
argocd_app_info{
  name="app-name",
  sync_status="Synced|OutOfSync",
  health_status="Healthy|Degraded|Progressing"
}
```

#### argocd_app_sync_total
Sync ì‘ì—…ì˜ ì´ íšŸìˆ˜
```promql
argocd_app_sync_total{
  phase="Succeeded|Failed|Error"
}
```

#### argocd_app_reconcile_*
Reconcile ì‘ì—…ì˜ ì†Œìš” ì‹œê°„
```promql
rate(argocd_app_reconcile_sum[5m]) / 
rate(argocd_app_reconcile_count[5m])
```

### Jenkins ë©”íŠ¸ë¦­

#### jenkins_runs_*_total
ë¹Œë“œ ê²°ê³¼ë³„ ì´ íšŸìˆ˜
- `jenkins_runs_success_total`: ì„±ê³µ
- `jenkins_runs_failure_total`: ì‹¤íŒ¨
- `jenkins_runs_aborted_total`: ì¤‘ë‹¨
- `jenkins_runs_unstable_total`: ë¶ˆì•ˆì •

#### jenkins_job_total_duration
Job ì‹¤í–‰ ì‹œê°„ ë¶„í¬ (Quantiles)
```promql
jenkins_job_total_duration{quantile="0.5"}   # P50
jenkins_job_total_duration{quantile="0.95"}  # P95
jenkins_job_total_duration{quantile="0.99"}  # P99
```

#### default_jenkins_builds_*
Jobë³„ ìƒì„¸ ë©”íŠ¸ë¦­
```promql
default_jenkins_builds_total_build_count_total{
  jenkins_job="dataops-build-pipeline"
}
```

## ğŸš¨ ì•ŒëŒ ì„¤ì • ê¶Œì¥ì‚¬í•­

### Critical
- Config Drift 5ê°œ ì´ìƒ
- Jenkins ë¹Œë“œ ì‹¤íŒ¨ 3íšŒ ì—°ì†
- ArgoCD Sync ì‹¤íŒ¨ìœ¨ 1% ì´ìƒ

### Warning
- Config Drift 3ê°œ ì´ìƒ
- Jenkins ë¹Œë“œ Duration P99 > 60ì´ˆ
- ArgoCD Reconcile ì‹œê°„ > 5ì´ˆ

## ğŸ“ ê´€ë ¨ ë¬¸ì„œ
- [PromQL ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë¦¬ì†ŒìŠ¤ ì¿¼ë¦¬](./promql-namespace-resources.md)
- [ArgoCD Metrics ë°°í¬ ê°€ì´ë“œ](./05-ArgoCD-Metrics-ë°°í¬ê°€ì´ë“œ.md)
- [Jenkins ë°°í¬ ë° ë©”íŠ¸ë¦­ ìˆ˜ì§‘](./07-Jenkins-ë°°í¬-ë°-ë©”íŠ¸ë¦­-ìˆ˜ì§‘-ì™„ë£Œ.md)
- [ìµœì¢… ë°°í¬ ì™„ë£Œ ë¦¬í¬íŠ¸](./10-ìµœì¢…-ëŒ€ì‹œë³´ë“œ-ë°°í¬-ì™„ë£Œ-ë¦¬í¬íŠ¸.md)

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### Dashboardì— ë°ì´í„°ê°€ í‘œì‹œë˜ì§€ ì•Šì„ ë•Œ
1. Prometheus Target ìƒíƒœ í™•ì¸
   ```bash
   kubectl get servicemonitors -n monitoring
   ```

2. Metrics ìˆ˜ì§‘ í™•ì¸
   ```bash
   kubectl port-forward -n monitoring svc/prometheus-kube-prometheus-stack-prometheus 9090:9090
   # http://localhost:9090/targets ì ‘ì†
   ```

3. Grafana ConfigMap í™•ì¸
   ```bash
   kubectl get cm -n monitoring -l grafana_dashboard=1
   ```

### Jenkins Jobì´ ì‹¤í–‰ë˜ì§€ ì•Šì„ ë•Œ
1. Jenkins Pod ìƒíƒœ í™•ì¸
   ```bash
   kubectl get pods -n jenkins
   ```

2. Job ì„¤ì • í™•ì¸
   ```bash
   kubectl exec -n jenkins jenkins-0 -c jenkins -- ls -la /var/jenkins_home/jobs/
   ```

3. Cron íŠ¸ë¦¬ê±° í™•ì¸
   - Jenkins UIì—ì„œ Job ì„¤ì • í™•ì¸
   - "Build Triggers" > "Build periodically" í™œì„±í™” ì—¬ë¶€

### ArgoCD ë©”íŠ¸ë¦­ì´ ìˆ˜ì§‘ë˜ì§€ ì•Šì„ ë•Œ
1. ServiceMonitor ìƒíƒœ í™•ì¸
   ```bash
   kubectl get servicemonitor -n monitoring | grep argocd
   ```

2. ArgoCD Service Label í™•ì¸
   ```bash
   kubectl get svc -n argocd -l app.kubernetes.io/name=argocd-metrics
   ```

3. Prometheus Log í™•ì¸
   ```bash
   kubectl logs -n monitoring prometheus-kube-prometheus-stack-prometheus-0 -c prometheus
   ```

## ğŸ“ ì§€ì›
ë¬¸ì œ ë°œìƒ ì‹œ ë‹¤ìŒ ì •ë³´ì™€ í•¨ê»˜ ë¬¸ì˜:
- Dashboard ìŠ¤í¬ë¦°ìƒ·
- Prometheus Target ìƒíƒœ
- ê´€ë ¨ Pod ë¡œê·¸
- ì‹œë„í•œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë‹¨ê³„
